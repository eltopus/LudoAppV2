!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.ludo=e()}}(function(){var e;return function e(t,o,n){function r(s,a){if(!o[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=o[s]={exports:{}};t[s][0].call(c.exports,function(e){var o=t[s][1][e];return r(o||e)},c,c.exports,e,t,o,n)}return o[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t,o){"use strict";var n=function(){function e(){}return e.UUID=function(){if("undefined"!=typeof window&&void 0!==window.crypto&&void 0!==window.crypto.getRandomValues){var e=new Uint16Array(8);return window.crypto.getRandomValues(e),this.pad4(e[0])+this.pad4(e[1])+"-"+this.pad4(e[2])+"-"+this.pad4(e[3])+"-"+this.pad4(e[4])+"-"+this.pad4(e[5])+this.pad4(e[6])+this.pad4(e[7])}return this.random4()+this.random4()+"-"+this.random4()+"-"+this.random4()+"-"+this.random4()+"-"+this.random4()+this.random4()+this.random4()},e.pad4=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t},e.random4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},e}();o.UUID=n},{}],2:[function(t,o,n){!function(r,i){"use strict";"function"==typeof e&&e.amd?e("error-stack-parser",["stackframe"],i):"object"==typeof n?o.exports=i(t("stackframe")):r.ErrorStackParser=i(r.StackFrame)}(this,function(e){"use strict";function t(e,t,o){if("function"==typeof Array.prototype.map)return e.map(t,o);for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=t.call(o,e[r]);return n}function o(e,t,o){if("function"==typeof Array.prototype.filter)return e.filter(t,o);for(var n=[],r=0;r<e.length;r++)t.call(o,e[r])&&n.push(e[r]);return n}function n(e,t){if("function"==typeof Array.prototype.indexOf)return e.indexOf(t);for(var o=0;o<e.length;o++)if(e[o]===t)return o;return-1}return{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(/^\s*at .*(\S+\:\d+|\(native\))/m))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/,o=t.exec(e.replace(/[\(\)]/g,""));return[o[1],o[2]||void 0,o[3]||void 0]},parseV8OrIE:function(r){return t(o(r.stack.split("\n"),function(e){return!!e.match(/^\s*at .*(\S+\:\d+|\(native\))/m)},this),function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var o=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),r=this.extractLocation(o.pop()),i=o.join(" ")||void 0,s=n(["eval","<anonymous>"],r[0])>-1?void 0:r[0];return new e(i,void 0,s,r[1],r[2],t)},this)},parseFFOrSafari:function(n){return t(o(n.stack.split("\n"),function(e){return!e.match(/^(eval@)?(\[native code\])?$/)},this),function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new e(t);var o=t.split("@"),n=this.extractLocation(o.pop()),r=o.join("@")||void 0;return new e(r,void 0,n[0],n[1],n[2],t)},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var o=/Line (\d+).*script (?:in )?(\S+)/i,n=t.message.split("\n"),r=[],i=2,s=n.length;i<s;i+=2){var a=o.exec(n[i]);a&&r.push(new e(void 0,void 0,a[2],a[1],void 0,n[i]))}return r},parseOpera10:function(t){for(var o=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=t.stacktrace.split("\n"),r=[],i=0,s=n.length;i<s;i+=2){var a=o.exec(n[i]);a&&r.push(new e(a[3]||void 0,void 0,a[2],a[1],void 0,n[i]))}return r},parseOpera11:function(n){return t(o(n.stack.split("\n"),function(e){return!!e.match(/(^|@)\S+\:\d+/)&&!e.match(/^Error created at/)},this),function(t){var o,n=t.split("@"),r=this.extractLocation(n.pop()),i=n.shift()||"",s=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;i.match(/\(([^\)]*)\)/)&&(o=i.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var a=void 0===o||"[arguments not available]"===o?void 0:o.split(",");return new e(s,a,r[0],r[1],r[2],t)},this)}}})},{stackframe:5}],3:[function(t,o,n){!function(t,r){"use strict";"function"==typeof e&&e.amd?e("stackframe",[],r):"object"==typeof n?o.exports=r():t.StackFrame=r()}(this,function(){"use strict";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e){return e[0].toUpperCase()+e.substring(1)}function o(e){return function(){return this[e]}}function n(e){if(e instanceof Object)for(var o=r.concat(i.concat(s.concat(a))),n=0;n<o.length;n++)e.hasOwnProperty(o[n])&&void 0!==e[o[n]]&&this["set"+t(o[n])](e[o[n]])}var r=["isConstructor","isEval","isNative","isToplevel"],i=["columnNumber","lineNumber"],s=["fileName","functionName","source"],a=["args"];n.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof n)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new n(e)}},toString:function(){return(this.getFunctionName()||"{anonymous}")+"("+(this.getArgs()||[]).join(",")+")"+(this.getFileName()?"@"+this.getFileName():"")+(e(this.getLineNumber())?":"+this.getLineNumber():"")+(e(this.getColumnNumber())?":"+this.getColumnNumber():"")}};for(var u=0;u<r.length;u++)n.prototype["get"+t(r[u])]=o(r[u]),n.prototype["set"+t(r[u])]=function(e){return function(t){this[e]=Boolean(t)}}(r[u]);for(var l=0;l<i.length;l++)n.prototype["get"+t(i[l])]=o(i[l]),n.prototype["set"+t(i[l])]=function(t){return function(o){if(!e(o))throw new TypeError(t+" must be a Number");this[t]=Number(o)}}(i[l]);for(var c=0;c<s.length;c++)n.prototype["get"+t(s[c])]=o(s[c]),n.prototype["set"+t(s[c])]=function(e){return function(t){this[e]=String(t)}}(s[c]);return n})},{}],4:[function(t,o,n){!function(r,i){"use strict";"function"==typeof e&&e.amd?e("stack-generator",["stackframe"],i):"object"==typeof n?o.exports=i(t("stackframe")):r.StackGenerator=i(r.StackFrame)}(this,function(e){return{backtrace:function(t){var o=[],n=10;"object"==typeof t&&"number"==typeof t.maxStackSize&&(n=t.maxStackSize);for(var r=arguments.callee;r&&o.length<n;){for(var i=new Array(r.arguments.length),s=0;s<i.length;++s)i[s]=r.arguments[s];/function(?:\s+([\w$]+))+\s*\(/.test(r.toString())?o.push(new e({functionName:RegExp.$1||void 0,args:i})):o.push(new e({args:i}));try{r=r.caller}catch(e){break}}return o}}})},{stackframe:3}],5:[function(t,o,n){!function(t,r){"use strict";"function"==typeof e&&e.amd?e("stackframe",[],r):"object"==typeof n?o.exports=r():t.StackFrame=r()}(this,function(){"use strict";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e,t,o,n,r,i){void 0!==e&&this.setFunctionName(e),void 0!==t&&this.setArgs(t),void 0!==o&&this.setFileName(o),void 0!==n&&this.setLineNumber(n),void 0!==r&&this.setColumnNumber(r),void 0!==i&&this.setSource(i)}return t.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(e){this.functionName=String(e)},getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getFileName:function(){return this.fileName},setFileName:function(e){this.fileName=String(e)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(t){if(!e(t))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(t)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(t){if(!e(t))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(t)},getSource:function(){return this.source},setSource:function(e){this.source=String(e)},toString:function(){return(this.getFunctionName()||"{anonymous}")+"("+(this.getArgs()||[]).join(",")+")"+(this.getFileName()?"@"+this.getFileName():"")+(e(this.getLineNumber())?":"+this.getLineNumber():"")+(e(this.getColumnNumber())?":"+this.getColumnNumber():"")}},t})},{}],6:[function(e,t,o){function n(){this._array=[],this._set=Object.create(null)}var r=e("./util"),i=Object.prototype.hasOwnProperty;n.fromArray=function(e,t){for(var o=new n,r=0,i=e.length;r<i;r++)o.add(e[r],t);return o},n.prototype.size=function(){return Object.getOwnPropertyNames(this._set).length},n.prototype.add=function(e,t){var o=r.toSetString(e),n=i.call(this._set,o),s=this._array.length;n&&!t||this._array.push(e),n||(this._set[o]=s)},n.prototype.has=function(e){var t=r.toSetString(e);return i.call(this._set,t)},n.prototype.indexOf=function(e){var t=r.toSetString(e);if(i.call(this._set,t))return this._set[t];throw new Error('"'+e+'" is not in the set.')},n.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},n.prototype.toArray=function(){return this._array.slice()},o.ArraySet=n},{"./util":12}],7:[function(e,t,o){function n(e){return e<0?1+(-e<<1):0+(e<<1)}function r(e){var t=1==(1&e),o=e>>1;return t?-o:o}var i=e("./base64");o.encode=function(e){var t,o="",r=n(e);do{t=31&r,r>>>=5,r>0&&(t|=32),o+=i.encode(t)}while(r>0);return o},o.decode=function(e,t,o){var n,s,a=e.length,u=0,l=0;do{if(t>=a)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(s=i.decode(e.charCodeAt(t++))))throw new Error("Invalid base64 digit: "+e.charAt(t-1));n=!!(32&s),s&=31,u+=s<<l,l+=5}while(n);o.value=r(u),o.rest=t}},{"./base64":8}],8:[function(e,t,o){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");o.encode=function(e){if(0<=e&&e<n.length)return n[e];throw new TypeError("Must be between 0 and 63: "+e)},o.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1}},{}],9:[function(e,t,o){function n(e,t,r,i,s,a){var u=Math.floor((t-e)/2)+e,l=s(r,i[u],!0);return 0===l?u:l>0?t-u>1?n(u,t,r,i,s,a):a==o.LEAST_UPPER_BOUND?t<i.length?t:-1:u:u-e>1?n(e,u,r,i,s,a):a==o.LEAST_UPPER_BOUND?u:e<0?-1:e}o.GREATEST_LOWER_BOUND=1,o.LEAST_UPPER_BOUND=2,o.search=function(e,t,r,i){if(0===t.length)return-1;var s=n(-1,t.length,e,t,r,i||o.GREATEST_LOWER_BOUND);if(s<0)return-1;for(;s-1>=0&&0===r(t[s],t[s-1],!0);)--s;return s}},{}],10:[function(e,t,o){function n(e,t,o){var n=e[t];e[t]=e[o],e[o]=n}function r(e,t){return Math.round(e+Math.random()*(t-e))}function i(e,t,o,s){if(o<s){var a=r(o,s),u=o-1;n(e,a,s);for(var l=e[s],c=o;c<s;c++)t(e[c],l)<=0&&(u+=1,n(e,u,c));n(e,u+1,c);var h=u+1;i(e,t,o,h-1),i(e,t,h+1,s)}}o.quickSort=function(e,t){i(e,t,0,e.length-1)}},{}],11:[function(e,t,o){function n(e){var t=e;return"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,""))),null!=t.sections?new s(t):new r(t)}function r(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var o=a.getArg(t,"version"),n=a.getArg(t,"sources"),r=a.getArg(t,"names",[]),i=a.getArg(t,"sourceRoot",null),s=a.getArg(t,"sourcesContent",null),u=a.getArg(t,"mappings"),c=a.getArg(t,"file",null);if(o!=this._version)throw new Error("Unsupported version: "+o);n=n.map(String).map(a.normalize).map(function(e){return i&&a.isAbsolute(i)&&a.isAbsolute(e)?a.relative(i,e):e}),this._names=l.fromArray(r.map(String),!0),this._sources=l.fromArray(n,!0),this.sourceRoot=i,this.sourcesContent=s,this._mappings=u,this.file=c}function i(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function s(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var o=a.getArg(t,"version"),r=a.getArg(t,"sections");if(o!=this._version)throw new Error("Unsupported version: "+o);this._sources=new l,this._names=new l;var i={line:-1,column:0};this._sections=r.map(function(e){if(e.url)throw new Error("Support for url field in sections not implemented.");var t=a.getArg(e,"offset"),o=a.getArg(t,"line"),r=a.getArg(t,"column");if(o<i.line||o===i.line&&r<i.column)throw new Error("Section offsets must be ordered and non-overlapping.");return i=t,{generatedOffset:{generatedLine:o+1,generatedColumn:r+1},consumer:new n(a.getArg(e,"map"))}})}var a=e("./util"),u=e("./binary-search"),l=e("./array-set").ArraySet,c=e("./base64-vlq"),h=e("./quick-sort").quickSort;n.fromSourceMap=function(e){return r.fromSourceMap(e)},n.prototype._version=3,n.prototype.__generatedMappings=null,Object.defineProperty(n.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),n.prototype.__originalMappings=null,Object.defineProperty(n.prototype,"_originalMappings",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),n.prototype._charIsMappingSeparator=function(e,t){var o=e.charAt(t);return";"===o||","===o},n.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},n.GENERATED_ORDER=1,n.ORIGINAL_ORDER=2,n.GREATEST_LOWER_BOUND=1,n.LEAST_UPPER_BOUND=2,n.prototype.eachMapping=function(e,t,o){var r,i=t||null,s=o||n.GENERATED_ORDER;switch(s){case n.GENERATED_ORDER:r=this._generatedMappings;break;case n.ORIGINAL_ORDER:r=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var u=this.sourceRoot;r.map(function(e){var t=null===e.source?null:this._sources.at(e.source);return null!=t&&null!=u&&(t=a.join(u,t)),{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}},this).forEach(e,i)},n.prototype.allGeneratedPositionsFor=function(e){var t=a.getArg(e,"line"),o={source:a.getArg(e,"source"),originalLine:t,originalColumn:a.getArg(e,"column",0)};if(null!=this.sourceRoot&&(o.source=a.relative(this.sourceRoot,o.source)),!this._sources.has(o.source))return[];o.source=this._sources.indexOf(o.source);var n=[],r=this._findMapping(o,this._originalMappings,"originalLine","originalColumn",a.compareByOriginalPositions,u.LEAST_UPPER_BOUND);if(r>=0){var i=this._originalMappings[r];if(void 0===e.column)for(var s=i.originalLine;i&&i.originalLine===s;)n.push({line:a.getArg(i,"generatedLine",null),column:a.getArg(i,"generatedColumn",null),lastColumn:a.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[++r];else for(var l=i.originalColumn;i&&i.originalLine===t&&i.originalColumn==l;)n.push({line:a.getArg(i,"generatedLine",null),column:a.getArg(i,"generatedColumn",null),lastColumn:a.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[++r]}return n},o.SourceMapConsumer=n,r.prototype=Object.create(n.prototype),r.prototype.consumer=n,r.fromSourceMap=function(e){var t=Object.create(r.prototype),o=t._names=l.fromArray(e._names.toArray(),!0),n=t._sources=l.fromArray(e._sources.toArray(),!0);t.sourceRoot=e._sourceRoot,t.sourcesContent=e._generateSourcesContent(t._sources.toArray(),t.sourceRoot),t.file=e._file;for(var s=e._mappings.toArray().slice(),u=t.__generatedMappings=[],c=t.__originalMappings=[],p=0,f=s.length;p<f;p++){var g=s[p],d=new i;d.generatedLine=g.generatedLine,d.generatedColumn=g.generatedColumn,g.source&&(d.source=n.indexOf(g.source),d.originalLine=g.originalLine,d.originalColumn=g.originalColumn,g.name&&(d.name=o.indexOf(g.name)),c.push(d)),u.push(d)}return h(t.__originalMappings,a.compareByOriginalPositions),t},r.prototype._version=3,Object.defineProperty(r.prototype,"sources",{get:function(){return this._sources.toArray().map(function(e){return null!=this.sourceRoot?a.join(this.sourceRoot,e):e},this)}}),r.prototype._parseMappings=function(e,t){for(var o,n,r,s,u,l=1,p=0,f=0,g=0,d=0,y=0,v=e.length,m=0,_={},b={},I=[],w=[];m<v;)if(";"===e.charAt(m))l++,m++,p=0;else if(","===e.charAt(m))m++;else{for(o=new i,o.generatedLine=l,s=m;s<v&&!this._charIsMappingSeparator(e,s);s++);if(n=e.slice(m,s),r=_[n])m+=n.length;else{for(r=[];m<s;)c.decode(e,m,b),u=b.value,m=b.rest,r.push(u);if(2===r.length)throw new Error("Found a source, but no line and column");if(3===r.length)throw new Error("Found a source and line, but no column");_[n]=r}o.generatedColumn=p+r[0],p=o.generatedColumn,r.length>1&&(o.source=d+r[1],d+=r[1],o.originalLine=f+r[2],f=o.originalLine,o.originalLine+=1,o.originalColumn=g+r[3],g=o.originalColumn,r.length>4&&(o.name=y+r[4],y+=r[4])),w.push(o),"number"==typeof o.originalLine&&I.push(o)}h(w,a.compareByGeneratedPositionsDeflated),this.__generatedMappings=w,h(I,a.compareByOriginalPositions),this.__originalMappings=I},r.prototype._findMapping=function(e,t,o,n,r,i){if(e[o]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[o]);if(e[n]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[n]);return u.search(e,t,r,i)},r.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var o=this._generatedMappings[e+1];if(t.generatedLine===o.generatedLine){t.lastGeneratedColumn=o.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},r.prototype.originalPositionFor=function(e){var t={generatedLine:a.getArg(e,"line"),generatedColumn:a.getArg(e,"column")},o=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",a.compareByGeneratedPositionsDeflated,a.getArg(e,"bias",n.GREATEST_LOWER_BOUND));if(o>=0){var r=this._generatedMappings[o];if(r.generatedLine===t.generatedLine){var i=a.getArg(r,"source",null);null!==i&&(i=this._sources.at(i),null!=this.sourceRoot&&(i=a.join(this.sourceRoot,i)));var s=a.getArg(r,"name",null);return null!==s&&(s=this._names.at(s)),{source:i,line:a.getArg(r,"originalLine",null),column:a.getArg(r,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}},r.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e}))},r.prototype.sourceContentFor=function(e,t){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(e=a.relative(this.sourceRoot,e)),this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];var o;if(null!=this.sourceRoot&&(o=a.urlParse(this.sourceRoot))){var n=e.replace(/^file:\/\//,"");if("file"==o.scheme&&this._sources.has(n))return this.sourcesContent[this._sources.indexOf(n)];if((!o.path||"/"==o.path)&&this._sources.has("/"+e))return this.sourcesContent[this._sources.indexOf("/"+e)]}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},r.prototype.generatedPositionFor=function(e){var t=a.getArg(e,"source");if(null!=this.sourceRoot&&(t=a.relative(this.sourceRoot,t)),!this._sources.has(t))return{line:null,column:null,lastColumn:null};t=this._sources.indexOf(t);var o={source:t,originalLine:a.getArg(e,"line"),originalColumn:a.getArg(e,"column")},r=this._findMapping(o,this._originalMappings,"originalLine","originalColumn",a.compareByOriginalPositions,a.getArg(e,"bias",n.GREATEST_LOWER_BOUND));if(r>=0){var i=this._originalMappings[r];if(i.source===o.source)return{line:a.getArg(i,"generatedLine",null),column:a.getArg(i,"generatedColumn",null),lastColumn:a.getArg(i,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},o.BasicSourceMapConsumer=r,s.prototype=Object.create(n.prototype),s.prototype.constructor=n,s.prototype._version=3,Object.defineProperty(s.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var o=0;o<this._sections[t].consumer.sources.length;o++)e.push(this._sections[t].consumer.sources[o]);return e}}),s.prototype.originalPositionFor=function(e){var t={generatedLine:a.getArg(e,"line"),generatedColumn:a.getArg(e,"column")},o=u.search(t,this._sections,function(e,t){var o=e.generatedLine-t.generatedOffset.generatedLine;return o||e.generatedColumn-t.generatedOffset.generatedColumn}),n=this._sections[o];return n?n.consumer.originalPositionFor({line:t.generatedLine-(n.generatedOffset.generatedLine-1),column:t.generatedColumn-(n.generatedOffset.generatedLine===t.generatedLine?n.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},s.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},s.prototype.sourceContentFor=function(e,t){for(var o=0;o<this._sections.length;o++){var n=this._sections[o],r=n.consumer.sourceContentFor(e,!0);if(r)return r}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},s.prototype.generatedPositionFor=function(e){for(var t=0;t<this._sections.length;t++){var o=this._sections[t];if(-1!==o.consumer.sources.indexOf(a.getArg(e,"source"))){var n=o.consumer.generatedPositionFor(e);if(n){return{line:n.line+(o.generatedOffset.generatedLine-1),column:n.column+(o.generatedOffset.generatedLine===n.line?o.generatedOffset.generatedColumn-1:0)}}}}return{line:null,column:null}},s.prototype._parseMappings=function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var o=0;o<this._sections.length;o++)for(var n=this._sections[o],r=n.consumer._generatedMappings,i=0;i<r.length;i++){var s=r[i],u=n.consumer._sources.at(s.source);null!==n.consumer.sourceRoot&&(u=a.join(n.consumer.sourceRoot,u)),this._sources.add(u),u=this._sources.indexOf(u);var l=n.consumer._names.at(s.name);this._names.add(l),l=this._names.indexOf(l);var c={source:u,generatedLine:s.generatedLine+(n.generatedOffset.generatedLine-1),generatedColumn:s.generatedColumn+(n.generatedOffset.generatedLine===s.generatedLine?n.generatedOffset.generatedColumn-1:0),originalLine:s.originalLine,originalColumn:s.originalColumn,name:l};this.__generatedMappings.push(c),"number"==typeof c.originalLine&&this.__originalMappings.push(c)}h(this.__generatedMappings,a.compareByGeneratedPositionsDeflated),h(this.__originalMappings,a.compareByOriginalPositions)},o.IndexedSourceMapConsumer=s},{"./array-set":6,"./base64-vlq":7,"./binary-search":9,"./quick-sort":10,"./util":12}],12:[function(e,t,o){function n(e,t,o){if(t in e)return e[t];if(3===arguments.length)return o;throw new Error('"'+t+'" is a required argument.')}function r(e){var t=e.match(v);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}function i(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function s(e){var t=e,n=r(e);if(n){if(!n.path)return e;t=n.path}for(var s,a=o.isAbsolute(t),u=t.split(/\/+/),l=0,c=u.length-1;c>=0;c--)s=u[c],"."===s?u.splice(c,1):".."===s?l++:l>0&&(""===s?(u.splice(c+1,l),l=0):(u.splice(c,2),l--));return t=u.join("/"),""===t&&(t=a?"/":"."),n?(n.path=t,i(n)):t}function a(e,t){""===e&&(e="."),""===t&&(t=".");var o=r(t),n=r(e);if(n&&(e=n.path||"/"),o&&!o.scheme)return n&&(o.scheme=n.scheme),i(o);if(o||t.match(m))return t;if(n&&!n.host&&!n.path)return n.host=t,i(n);var a="/"===t.charAt(0)?t:s(e.replace(/\/+$/,"")+"/"+t);return n?(n.path=a,i(n)):a}function u(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");for(var o=0;0!==t.indexOf(e+"/");){var n=e.lastIndexOf("/");if(n<0)return t;if(e=e.slice(0,n),e.match(/^([^\/]+:\/)?\/*$/))return t;++o}return Array(o+1).join("../")+t.substr(e.length+1)}function l(e){return e}function c(e){return p(e)?"$"+e:e}function h(e){return p(e)?e.slice(1):e}function p(e){if(!e)return!1;var t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(var o=t-10;o>=0;o--)if(36!==e.charCodeAt(o))return!1;return!0}function f(e,t,o){var n=e.source-t.source;return 0!==n?n:0!==(n=e.originalLine-t.originalLine)?n:0!==(n=e.originalColumn-t.originalColumn)||o?n:0!==(n=e.generatedColumn-t.generatedColumn)?n:(n=e.generatedLine-t.generatedLine,0!==n?n:e.name-t.name)}function g(e,t,o){var n=e.generatedLine-t.generatedLine;return 0!==n?n:0!==(n=e.generatedColumn-t.generatedColumn)||o?n:0!==(n=e.source-t.source)?n:0!==(n=e.originalLine-t.originalLine)?n:(n=e.originalColumn-t.originalColumn,0!==n?n:e.name-t.name)}function d(e,t){return e===t?0:e>t?1:-1}function y(e,t){var o=e.generatedLine-t.generatedLine;return 0!==o?o:0!==(o=e.generatedColumn-t.generatedColumn)?o:0!==(o=d(e.source,t.source))?o:0!==(o=e.originalLine-t.originalLine)?o:(o=e.originalColumn-t.originalColumn,0!==o?o:d(e.name,t.name))}o.getArg=n;var v=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,m=/^data:.+\,.+$/;o.urlParse=r,o.urlGenerate=i,o.normalize=s,o.join=a,o.isAbsolute=function(e){return"/"===e.charAt(0)||!!e.match(v)},o.relative=u;var _=function(){return!("__proto__"in Object.create(null))}();o.toSetString=_?l:c,o.fromSetString=_?l:h,o.compareByOriginalPositions=f,o.compareByGeneratedPositionsDeflated=g,o.compareByGeneratedPositionsInflated=y},{}],13:[function(t,o,n){!function(r,i){"use strict";"function"==typeof e&&e.amd?e("stacktrace-gps",["source-map","stackframe"],i):"object"==typeof n?o.exports=i(t("source-map/lib/source-map-consumer"),t("stackframe")):r.StackTraceGPS=i(r.SourceMap||r.sourceMap,r.StackFrame)}(this,function(e,t){"use strict";function o(e){return new Promise(function(t,o){var n=new XMLHttpRequest;n.open("get",e),n.onerror=o,n.onreadystatechange=function(){4===n.readyState&&(n.status>=200&&n.status<300?t(n.responseText):o(new Error("HTTP status: "+n.status+" retrieving "+e)))},n.send()})}function n(e){if("undefined"!=typeof window&&window.atob)return window.atob(e);throw new Error("You must supply a polyfill for window.atob in this environment")}function r(e){if("undefined"!=typeof JSON&&JSON.parse)return JSON.parse(e);throw new Error("You must supply a polyfill for JSON.parse in this environment")}function i(e,t){for(var o,n=/function\s+([^(]*?)\s*\(([^)]*)\)/,r=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,i=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,s=e.split("\n"),a="",u=Math.min(t,20),l=0;l<u;++l){var c=s[t-l-1],h=c.indexOf("//");if(h>=0&&(c=c.substr(0,h)),c){if(a=c+a,(o=r.exec(a))&&o[1])return o[1];if((o=n.exec(a))&&o[1])return o[1];if((o=i.exec(a))&&o[1])return o[1]}}}function s(){if("function"!=typeof Object.defineProperty||"function"!=typeof Object.create)throw new Error("Unable to consume source maps in older browsers")}function a(e){if("object"!=typeof e)throw new TypeError("Given StackFrame is not an object");if("string"!=typeof e.fileName)throw new TypeError("Given file name is not a String");if("number"!=typeof e.lineNumber||e.lineNumber%1!=0||e.lineNumber<1)throw new TypeError("Given line number must be a positive integer");if("number"!=typeof e.columnNumber||e.columnNumber%1!=0||e.columnNumber<0)throw new TypeError("Given column number must be a non-negative integer");return!0}function u(e){var t=/\/\/[#@] ?sourceMappingURL=([^\s'"]+)\s*$/.exec(e);if(t&&t[1])return t[1];throw new Error("sourceMappingURL not found")}function l(o,n,r){return new Promise(function(i,s){var a=new e.SourceMapConsumer(n),u=a.originalPositionFor({line:o.lineNumber,column:o.columnNumber});if(u.source){var l=a.sourceContentFor(u.source);l&&(r[u.source]=l),i(new t(u.name||o.functionName,o.args,u.source,u.line,u.column))}else s(new Error("Could not get original source for given stackframe and source map"))})}return function e(c){if(!(this instanceof e))return new e(c);c=c||{},this.sourceCache=c.sourceCache||{},this.ajax=c.ajax||o,this._atob=c.atob||n,this._get=function(e){return new Promise(function(t,o){var n="data:"===e.substr(0,5);if(this.sourceCache[e])t(this.sourceCache[e]);else if(c.offline&&!n)o(new Error("Cannot make network requests in offline mode"));else if(n){var r=e.match(/^data:application\/json;([\w=:"-]+;)*base64,/);if(r){var i=r[0].length,s=e.substr(i),a=this._atob(s);this.sourceCache[e]=a,t(a)}else o(new Error("The encoding of the inline sourcemap is not supported"))}else{var u=this.ajax(e,{method:"get"});this.sourceCache[e]=u,u.then(t,o)}}.bind(this))},this.pinpoint=function(e){return new Promise(function(t,o){this.getMappedLocation(e).then(function(e){function o(){t(e)}this.findFunctionName(e).then(t,o).catch(o)}.bind(this),o)}.bind(this))},this.findFunctionName=function(e){return new Promise(function(o,n){a(e),this._get(e.fileName).then(function(n){var r=e.lineNumber,s=e.columnNumber,a=i(n,r);o(a?new t(a,e.args,e.fileName,r,s):e)},n).catch(n)}.bind(this))},this.getMappedLocation=function(e){return new Promise(function(t,o){s(),a(e);var n=this.sourceCache,i=e.fileName;this._get(i).then(function(s){var a=u(s),c="data:"===a.substr(0,5),h=i.substring(0,i.lastIndexOf("/")+1);"/"===a[0]||c||/^https?:\/\/|^\/\//i.test(a)||(a=h+a),this._get(a).then(function(o){"string"==typeof o&&(o=r(o.replace(/^\)\]\}'/,""))),void 0===o.sourceRoot&&(o.sourceRoot=h),l(e,o,n).then(t).catch(function(){t(e)})},o).catch(o)}.bind(this),o).catch(o)}.bind(this))}}})},{"source-map/lib/source-map-consumer":11,stackframe:5}],14:[function(t,o,n){!function(r,i){"use strict";"function"==typeof e&&e.amd?e("stacktrace",["error-stack-parser","stack-generator","stacktrace-gps"],i):"object"==typeof n?o.exports=i(t("error-stack-parser"),t("stack-generator"),t("stacktrace-gps")):r.StackTrace=i(r.ErrorStackParser,r.StackGenerator,r.StackTraceGPS)}(this,function(e,t,o){function n(e,t){var o={};return[e,t].forEach(function(e){for(var t in e)e.hasOwnProperty(t)&&(o[t]=e[t]);return o}),o}function r(e){return e.stack||e["opera#sourceloc"]}function i(e,t){return"function"==typeof t?e.filter(t):e}var s={filter:function(e){return-1===(e.functionName||"").indexOf("StackTrace$$")&&-1===(e.functionName||"").indexOf("ErrorStackParser$$")&&-1===(e.functionName||"").indexOf("StackTraceGPS$$")&&-1===(e.functionName||"").indexOf("StackGenerator$$")},sourceCache:{}},a=function(){try{throw new Error}catch(e){return e}};return{get:function(e){var t=a();return r(t)?this.fromError(t,e):this.generateArtificially(e)},getSync:function(o){o=n(s,o);var u=a();return i(r(u)?e.parse(u):t.backtrace(o),o.filter)},fromError:function(t,r){r=n(s,r);var a=new o(r);return new Promise(function(o){var n=i(e.parse(t),r.filter);o(Promise.all(n.map(function(e){return new Promise(function(t){function o(){t(e)}a.pinpoint(e).then(t,o).catch(o)})})))}.bind(this))},generateArtificially:function(e){e=n(s,e);var o=t.backtrace(e);return"function"==typeof e.filter&&(o=o.filter(e.filter)),Promise.resolve(o)},instrument:function(e,t,o,n){if("function"!=typeof e)throw new Error("Cannot instrument non-function object");if("function"==typeof e.__stacktraceOriginalFn)return e;var i=function(){try{return this.get().then(t,o).catch(o),e.apply(n||this,arguments)}catch(e){throw r(e)&&this.fromError(e).then(t,o).catch(o),e}}.bind(this);return i.__stacktraceOriginalFn=e,i},deinstrument:function(e){if("function"!=typeof e)throw new Error("Cannot de-instrument non-function object");return"function"==typeof e.__stacktraceOriginalFn?e.__stacktraceOriginalFn:e},report:function(e,t,o){return new Promise(function(n,r){var i=new XMLHttpRequest;i.onerror=r,i.onreadystatechange=function(){4===i.readyState&&(i.status>=200&&i.status<400?n(i.responseText):r(new Error("POST to "+t+" failed with status: "+i.status)))},i.open("post",t),i.setRequestHeader("Content-Type","application/json");var s={stack:e};void 0!==o&&(s.message=o),i.send(JSON.stringify(s))})
}}})},{"error-stack-parser":2,"stack-generator":4,"stacktrace-gps":13}],15:[function(e,t,o){"use strict";var n=e("./util"),r=e("./Queue"),i=function(){function e(e){this.root=null,this.compare=e||n.defaultCompare,this.nElements=0}return e.prototype.add=function(e){return!n.isUndefined(e)&&(null!==this.insertNode(this.createNode(e))&&(this.nElements++,!0))},e.prototype.clear=function(){this.root=null,this.nElements=0},e.prototype.isEmpty=function(){return 0===this.nElements},e.prototype.size=function(){return this.nElements},e.prototype.contains=function(e){return!n.isUndefined(e)&&null!==this.searchNode(this.root,e)},e.prototype.remove=function(e){var t=this.searchNode(this.root,e);return null!==t&&(this.removeNode(t),this.nElements--,!0)},e.prototype.inorderTraversal=function(e){this.inorderTraversalAux(this.root,e,{stop:!1})},e.prototype.preorderTraversal=function(e){this.preorderTraversalAux(this.root,e,{stop:!1})},e.prototype.postorderTraversal=function(e){this.postorderTraversalAux(this.root,e,{stop:!1})},e.prototype.levelTraversal=function(e){this.levelTraversalAux(this.root,e)},e.prototype.minimum=function(){if(!this.isEmpty())return this.minimumAux(this.root).element},e.prototype.maximum=function(){if(!this.isEmpty())return this.maximumAux(this.root).element},e.prototype.forEach=function(e){this.inorderTraversal(e)},e.prototype.toArray=function(){var e=[];return this.inorderTraversal(function(t){return e.push(t),!0}),e},e.prototype.height=function(){return this.heightAux(this.root)},e.prototype.searchNode=function(e,t){for(var o=null;null!==e&&0!==o;)o=this.compare(t,e.element),o<0?e=e.leftCh:o>0&&(e=e.rightCh);return e},e.prototype.transplant=function(e,t){null===e.parent?this.root=t:e===e.parent.leftCh?e.parent.leftCh=t:e.parent.rightCh=t,null!==t&&(t.parent=e.parent)},e.prototype.removeNode=function(e){if(null===e.leftCh)this.transplant(e,e.rightCh);else if(null===e.rightCh)this.transplant(e,e.leftCh);else{var t=this.minimumAux(e.rightCh);t.parent!==e&&(this.transplant(t,t.rightCh),t.rightCh=e.rightCh,t.rightCh.parent=t),this.transplant(e,t),t.leftCh=e.leftCh,t.leftCh.parent=t}},e.prototype.inorderTraversalAux=function(e,t,o){null===e||o.stop||(this.inorderTraversalAux(e.leftCh,t,o),o.stop||(o.stop=!1===t(e.element),o.stop||this.inorderTraversalAux(e.rightCh,t,o)))},e.prototype.levelTraversalAux=function(e,t){var o=new r.default;for(null!==e&&o.enqueue(e);!o.isEmpty();){if(e=o.dequeue(),!1===t(e.element))return;null!==e.leftCh&&o.enqueue(e.leftCh),null!==e.rightCh&&o.enqueue(e.rightCh)}},e.prototype.preorderTraversalAux=function(e,t,o){null===e||o.stop||(o.stop=!1===t(e.element),o.stop||(this.preorderTraversalAux(e.leftCh,t,o),o.stop||this.preorderTraversalAux(e.rightCh,t,o)))},e.prototype.postorderTraversalAux=function(e,t,o){null===e||o.stop||(this.postorderTraversalAux(e.leftCh,t,o),o.stop||(this.postorderTraversalAux(e.rightCh,t,o),o.stop||(o.stop=!1===t(e.element))))},e.prototype.minimumAux=function(e){for(;null!==e.leftCh;)e=e.leftCh;return e},e.prototype.maximumAux=function(e){for(;null!==e.rightCh;)e=e.rightCh;return e},e.prototype.heightAux=function(e){return null===e?-1:Math.max(this.heightAux(e.leftCh),this.heightAux(e.rightCh))+1},e.prototype.insertNode=function(e){for(var t=null,o=this.root,n=null;null!==o;){if(0===(n=this.compare(e.element,o.element)))return null;n<0?(t=o,o=o.leftCh):(t=o,o=o.rightCh)}return e.parent=t,null===t?this.root=e:this.compare(e.element,t.element)<0?t.leftCh=e:t.rightCh=e,e},e.prototype.createNode=function(e){return{element:e,leftCh:null,rightCh:null,parent:null}},e}();Object.defineProperty(o,"__esModule",{value:!0}),o.default=i},{"./Queue":25,"./util":30}],16:[function(e,t,o){"use strict";var n=e("./util"),r=e("./Dictionary"),i=e("./Set"),s=function(){function e(e){this.toStrF=e||n.defaultToString,this.dictionary=new r.default(this.toStrF),this.nElements=0}return e.prototype.add=function(e,t){if(void 0===t&&(t=1),n.isUndefined(e)||t<=0)return!1;if(this.contains(e))this.dictionary.getValue(e).copies+=t;else{var o={value:e,copies:t};this.dictionary.setValue(e,o)}return this.nElements+=t,!0},e.prototype.count=function(e){return this.contains(e)?this.dictionary.getValue(e).copies:0},e.prototype.contains=function(e){return this.dictionary.containsKey(e)},e.prototype.remove=function(e,t){if(void 0===t&&(t=1),n.isUndefined(e)||t<=0)return!1;if(this.contains(e)){var o=this.dictionary.getValue(e);return t>o.copies?this.nElements-=o.copies:this.nElements-=t,o.copies-=t,o.copies<=0&&this.dictionary.remove(e),!0}return!1},e.prototype.toArray=function(){for(var e=[],t=this.dictionary.values(),o=0,n=t;o<n.length;o++)for(var r=n[o],i=r.value,s=r.copies,a=0;a<s;a++)e.push(i);return e},e.prototype.toSet=function(){for(var e=new i.default(this.toStrF),t=this.dictionary.values(),o=0,n=t;o<n.length;o++){var r=n[o],s=r.value;e.add(s)}return e},e.prototype.forEach=function(e){this.dictionary.forEach(function(t,o){for(var n=o.value,r=o.copies,i=0;i<r;i++)if(!1===e(n))return!1;return!0})},e.prototype.size=function(){return this.nElements},e.prototype.isEmpty=function(){return 0===this.nElements},e.prototype.clear=function(){this.nElements=0,this.dictionary.clear()},e}();Object.defineProperty(o,"__esModule",{value:!0}),o.default=s},{"./Dictionary":17,"./Set":26,"./util":30}],17:[function(e,t,o){"use strict";var n=e("./util"),r=function(){function e(e){this.table={},this.nElements=0,this.toStr=e||n.defaultToString}return e.prototype.getValue=function(e){var t=this.table["$"+this.toStr(e)];if(!n.isUndefined(t))return t.value},e.prototype.setValue=function(e,t){if(!n.isUndefined(e)&&!n.isUndefined(t)){var o,r="$"+this.toStr(e),i=this.table[r];return n.isUndefined(i)?(this.nElements++,o=void 0):o=i.value,this.table[r]={key:e,value:t},o}},e.prototype.remove=function(e){var t="$"+this.toStr(e),o=this.table[t];if(!n.isUndefined(o))return delete this.table[t],this.nElements--,o.value},e.prototype.keys=function(){var e=[];for(var t in this.table)if(n.has(this.table,t)){var o=this.table[t];e.push(o.key)}return e},e.prototype.values=function(){var e=[];for(var t in this.table)if(n.has(this.table,t)){var o=this.table[t];e.push(o.value)}return e},e.prototype.forEach=function(e){for(var t in this.table)if(n.has(this.table,t)){var o=this.table[t],r=e(o.key,o.value);if(!1===r)return}},e.prototype.containsKey=function(e){return!n.isUndefined(this.getValue(e))},e.prototype.clear=function(){this.table={},this.nElements=0},e.prototype.size=function(){return this.nElements},e.prototype.isEmpty=function(){return this.nElements<=0},e.prototype.toString=function(){var e="{";return this.forEach(function(t,o){e+="\n\t"+t+" : "+o}),e+"\n}"},e}();Object.defineProperty(o,"__esModule",{value:!0}),o.default=r},{"./util":30}],18:[function(e,t,o){"use strict";var n=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},r=e("./Dictionary"),i=e("./util"),s=function(e){function t(t,o){e.call(this,o),this.defaultFactoryFunction=t}return n(t,e),t.prototype.setDefault=function(t,o){var n=e.prototype.getValue.call(this,t);return i.isUndefined(n)?(this.setValue(t,o),o):n},t.prototype.getValue=function(e){return this.setDefault(e,this.defaultFactoryFunction())},t}(r.default);Object.defineProperty(o,"__esModule",{value:!0}),o.default=s},{"./Dictionary":17,"./util":30}],19:[function(e,t,o){"use strict";var n=e("./util"),r=e("./arrays"),i=function(){function e(e){this.data=[],this.compare=e||n.defaultCompare}return e.prototype.leftChildIndex=function(e){return 2*e+1},e.prototype.rightChildIndex=function(e){return 2*e+2},e.prototype.parentIndex=function(e){return Math.floor((e-1)/2)},e.prototype.minIndex=function(e,t){return t>=this.data.length?e>=this.data.length?-1:e:this.compare(this.data[e],this.data[t])<=0?e:t},e.prototype.siftUp=function(e){for(var t=this.parentIndex(e);e>0&&this.compare(this.data[t],this.data[e])>0;)r.swap(this.data,t,e),e=t,t=this.parentIndex(e)},e.prototype.siftDown=function(e){for(var t=this.minIndex(this.leftChildIndex(e),this.rightChildIndex(e));t>=0&&this.compare(this.data[e],this.data[t])>0;)r.swap(this.data,t,e),e=t,t=this.minIndex(this.leftChildIndex(e),this.rightChildIndex(e))},e.prototype.peek=function(){return this.data.length>0?this.data[0]:void 0},e.prototype.add=function(e){if(!n.isUndefined(e))return this.data.push(e),this.siftUp(this.data.length-1),!0},e.prototype.removeRoot=function(){if(this.data.length>0){var e=this.data[0];return this.data[0]=this.data[this.data.length-1],this.data.splice(this.data.length-1,1),this.data.length>0&&this.siftDown(0),e}},e.prototype.contains=function(e){var t=n.compareToEquals(this.compare);return r.contains(this.data,e,t)},e.prototype.size=function(){return this.data.length},e.prototype.isEmpty=function(){return this.data.length<=0},e.prototype.clear=function(){this.data.length=0},e.prototype.forEach=function(e){r.forEach(this.data,e)},e}();Object.defineProperty(o,"__esModule",{value:!0}),o.default=i},{"./arrays":28,"./util":30}],20:[function(e,t,o){"use strict";var n=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},r=e("./Dictionary"),i=e("./util"),s=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},e}(),a=function(e){function t(t){e.call(this,t),this.head=new s(null,null),this.tail=new s(null,null),this.head.next=this.tail,this.tail.prev=this.head}return n(t,e),t.prototype.appendToTail=function(e){var t=this.tail.prev;t.next=e,e.prev=t,e.next=this.tail,this.tail.prev=e},t.prototype.getLinkedDictionaryPair=function(e){if(!i.isUndefined(e)){var t="$"+this.toStr(e);return this.table[t]}},t.prototype.getValue=function(e){var t=this.getLinkedDictionaryPair(e);if(!i.isUndefined(t))return t.value},t.prototype.remove=function(t){var o=this.getLinkedDictionaryPair(t);if(!i.isUndefined(o))return e.prototype.remove.call(this,t),o.unlink(),o.value},t.prototype.clear=function(){e.prototype.clear.call(this),this.head.next=this.tail,this.tail.prev=this.head},t.prototype.replace=function(e,t){var o="$"+this.toStr(t.key);t.next=e.next,t.prev=e.prev,this.remove(e.key),t.prev.next=t,t.next.prev=t,this.table[o]=t,++this.nElements},t.prototype.setValue=function(e,t){if(!i.isUndefined(e)&&!i.isUndefined(t)){var o=this.getLinkedDictionaryPair(e),n=new s(e,t),r="$"+this.toStr(e);return i.isUndefined(o)?(this.appendToTail(n),this.table[r]=n,void++this.nElements):(this.replace(o,n),o.value)}},t.prototype.keys=function(){var e=[];return this.forEach(function(t,o){e.push(t)}),e},t.prototype.values=function(){var e=[];return this.forEach(function(t,o){e.push(o)}),e},t.prototype.forEach=function(e){for(var t=this.head.next;null!=t.next;){if(!1===e(t.key,t.value))return;t=t.next}},t}(r.default);Object.defineProperty(o,"__esModule",{value:!0}),o.default=a},{"./Dictionary":17,"./util":30}],21:[function(e,t,o){"use strict";var n=e("./util"),r=e("./arrays"),i=function(){function e(){this.firstNode=null,this.lastNode=null,this.nElements=0}return e.prototype.add=function(e,t){if(n.isUndefined(t)&&(t=this.nElements),t<0||t>this.nElements||n.isUndefined(e))return!1;var o=this.createNode(e);if(0===this.nElements)this.firstNode=o,this.lastNode=o;else if(t===this.nElements)this.lastNode.next=o,this.lastNode=o;else if(0===t)o.next=this.firstNode,this.firstNode=o;else{var r=this.nodeAtIndex(t-1);o.next=r.next,r.next=o}return this.nElements++,!0},e.prototype.first=function(){if(null!==this.firstNode)return this.firstNode.element},e.prototype.last=function(){if(null!==this.lastNode)return this.lastNode.element},e.prototype.elementAtIndex=function(e){var t=this.nodeAtIndex(e);if(null!==t)return t.element},e.prototype.indexOf=function(e,t){var o=t||n.defaultEquals;if(n.isUndefined(e))return-1;for(var r=this.firstNode,i=0;null!==r;){if(o(r.element,e))return i;i++,r=r.next}return-1},e.prototype.contains=function(e,t){return this.indexOf(e,t)>=0},e.prototype.remove=function(e,t){var o=t||n.defaultEquals;if(this.nElements<1||n.isUndefined(e))return!1;for(var r=null,i=this.firstNode;null!==i;){if(o(i.element,e))return i===this.firstNode?(this.firstNode=this.firstNode.next,i===this.lastNode&&(this.lastNode=null)):i===this.lastNode?(this.lastNode=r,r.next=i.next,i.next=null):(r.next=i.next,i.next=null),this.nElements--,!0;r=i,i=i.next}return!1},e.prototype.clear=function(){this.firstNode=null,this.lastNode=null,this.nElements=0},e.prototype.equals=function(t,o){var r=o||n.defaultEquals;return t instanceof e&&(this.size()===t.size()&&this.equalsAux(this.firstNode,t.firstNode,r))},e.prototype.equalsAux=function(e,t,o){for(;null!==e;){if(!o(e.element,t.element))return!1;e=e.next,t=t.next}return!0},e.prototype.removeElementAtIndex=function(e){if(!(e<0||e>=this.nElements)){var t;if(1===this.nElements)t=this.firstNode.element,this.firstNode=null,this.lastNode=null;else{var o=this.nodeAtIndex(e-1);null===o?(t=this.firstNode.element,this.firstNode=this.firstNode.next):o.next===this.lastNode&&(t=this.lastNode.element,this.lastNode=o),null!==o&&(t=o.next.element,o.next=o.next.next)}return this.nElements--,t}},e.prototype.forEach=function(e){for(var t=this.firstNode;null!==t&&!1!==e(t.element);)t=t.next},e.prototype.reverse=function(){for(var e=null,t=this.firstNode,o=null;null!==t;)o=t.next,t.next=e,e=t,t=o;o=this.firstNode,this.firstNode=this.lastNode,this.lastNode=o},e.prototype.toArray=function(){for(var e=[],t=this.firstNode;null!==t;)e.push(t.element),t=t.next;return e},e.prototype.size=function(){return this.nElements},e.prototype.isEmpty=function(){return this.nElements<=0},e.prototype.toString=function(){return r.toString(this.toArray())},e.prototype.nodeAtIndex=function(e){if(e<0||e>=this.nElements)return null;if(e===this.nElements-1)return this.lastNode;for(var t=this.firstNode,o=0;o<e;o++)t=t.next;return t},e.prototype.createNode=function(e){return{element:e,next:null}},e}();Object.defineProperty(o,"__esModule",{value:!0}),o.default=i},{"./arrays":28,"./util":30}],22:[function(e,t,o){"use strict";var n=e("./util"),r=e("./Dictionary"),i=e("./arrays"),s=function(){function e(e,t,o){void 0===o&&(o=!1),this.dict=new r.default(e),this.equalsF=t||n.defaultEquals,this.allowDuplicate=o}return e.prototype.getValue=function(e){var t=this.dict.getValue(e);return n.isUndefined(t)?[]:i.copy(t)},e.prototype.setValue=function(e,t){if(n.isUndefined(e)||n.isUndefined(t))return!1;if(!this.containsKey(e))return this.dict.setValue(e,[t]),!0;var o=this.dict.getValue(e);return!(!this.allowDuplicate&&i.contains(o,t,this.equalsF))&&(o.push(t),!0)},e.prototype.remove=function(e,t){if(n.isUndefined(t)){var o=this.dict.remove(e);return!n.isUndefined(o)}var r=this.dict.getValue(e);return!!i.remove(r,t,this.equalsF)&&(0===r.length&&this.dict.remove(e),!0)},e.prototype.keys=function(){return this.dict.keys()},e.prototype.values=function(){for(var e=this.dict.values(),t=[],o=0,n=e;o<n.length;o++)for(var r=n[o],i=0,s=r;i<s.length;i++){var a=s[i];t.push(a)}return t},e.prototype.containsKey=function(e){return this.dict.containsKey(e)},e.prototype.clear=function(){this.dict.clear()},e.prototype.size=function(){return this.dict.size()},e.prototype.isEmpty=function(){return this.dict.isEmpty()},e}();Object.defineProperty(o,"__esModule",{value:!0}),o.default=s},{"./Dictionary":17,"./arrays":28,"./util":30}],23:[function(e,t,o){"use strict";var n;!function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER",e[e.INSIDE_AT_END=2]="INSIDE_AT_END",e[e.INSIDE_AT_START=3]="INSIDE_AT_START"}(n||(n={}));var r=function(){function e(e,t){void 0===e&&(e=[]),void 0===t&&(t={}),this.rootIds=e,this.nodes=t,this.initRootIds(),this.initNodes()}return e.prototype.initRootIds=function(){for(var e=0,t=this.rootIds;e<t.length;e++){var o=t[e];this.createEmptyNodeIfNotExist(o)}},e.prototype.initNodes=function(){for(var e in this.nodes)if(this.nodes.hasOwnProperty(e))for(var t=0,o=this.nodes[e];t<o.length;t++){var n=o[t];this.createEmptyNodeIfNotExist(n)}},e.prototype.createEmptyNodeIfNotExist=function(e){this.nodes[e]||(this.nodes[e]=[])},e.prototype.getRootIds=function(){return this.rootIds.slice()},e.prototype.getNodes=function(){var e={};for(var t in this.nodes)this.nodes.hasOwnProperty(t)&&(e[t]=this.nodes[t].slice());return e},e.prototype.getObject=function(){return{rootIds:this.getRootIds(),nodes:this.getNodes()}},e.prototype.toObject=function(){return this.getObject()},e.prototype.flatten=function(){function e(t,o,n,r){if(void 0===r&&(r=0),t&&o&&n&&o[t]){r++;for(var i=o[t],s=0;s<i.length;s++){var a=i[s];n.push({id:a,level:r,hasParent:!0}),e(a,o,n,r)}r--}}for(var t=this,o=[],n=0;n<this.rootIds.length;n++){var r=this.rootIds[n];o.push({id:r,level:0,hasParent:!1,childrenCount:void 0}),e(r,this.nodes,o,0)}for(var i=0,s=o;i<s.length;i++){var a=s[i];a.childrenCount=function(e){if(t.nodes[e]){return t.nodes[e].length}return 0}(a.id)}return o},e.prototype.moveIdBeforeId=function(e,t){return this.moveId(e,t,n.BEFORE)},e.prototype.moveIdAfterId=function(e,t){return this.moveId(e,t,n.AFTER)},e.prototype.moveIdIntoId=function(e,t,o){return void 0===o&&(o=!0),o?this.moveId(e,t,n.INSIDE_AT_START):this.moveId(e,t,n.INSIDE_AT_END)},e.prototype.swapRootIdWithRootId=function(e,t){var o=this.findRootId(e),n=this.findRootId(t);this.swapRootPositionWithRootPosition(o,n)},e.prototype.swapRootPositionWithRootPosition=function(e,t){var o=this.rootIds[t];this.rootIds[t]=this.rootIds[e],this.rootIds[e]=o},e.prototype.deleteId=function(e){this.rootDeleteId(e),this.nodeAndSubNodesDelete(e),this.nodeRefrencesDelete(e)},e.prototype.insertIdBeforeId=function(e,t){var o=this.findRootId(e);o>-1&&this.insertIdIntoRoot(t,o);for(var n in this.nodes)if(this.nodes.hasOwnProperty(n)){var r=this.findNodeId(n,e);r>-1&&this.insertIdIntoNode(n,t,r)}},e.prototype.insertIdAfterId=function(e,t){var o=this.findRootId(e);o>-1&&this.insertIdIntoRoot(t,o+1);for(var n in this.nodes)if(this.nodes.hasOwnProperty(n)){var r=this.findNodeId(n,e);r>-1&&this.insertIdIntoNode(n,t,r+1)}},e.prototype.insertIdIntoId=function(e,t){this.nodeInsertAtEnd(e,t),this.nodes[t]=[]},e.prototype.insertIdIntoRoot=function(e,t){if(void 0===t)this.rootInsertAtEnd(e);else if(t<0){var o=this.rootIds.length;this.rootIds.splice(t+o+1,0,e)}else this.rootIds.splice(t,0,e);this.nodes[e]=this.nodes[e]||[]},e.prototype.insertIdIntoNode=function(e,t,o){if(this.nodes[e]=this.nodes[e]||[],this.nodes[t]=this.nodes[t]||[],void 0===o)this.nodeInsertAtEnd(e,t);else if(o<0){var n=this.nodes[e].length;this.nodes[e].splice(o+n+1,0,t)}else this.nodes[e].splice(o,0,t)},e.prototype.moveId=function(e,t,o){var r=e,i=this.findRootId(r);this.nodes[t];for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){this.findNodeId(s,t);break}var a=t,u=this.findRootId(a);this.nodes[t];for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){this.findNodeId(s,t);break}if(i>-1)if(u>-1)switch(this.rootDelete(i),u>i&&u--,o){case n.BEFORE:this.insertIdIntoRoot(r,u);break;case n.AFTER:this.insertIdIntoRoot(r,u+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(a,r);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(a,r)}else{this.rootDelete(i);for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var l=this.findNodeId(s,a);if(l>-1){switch(o){case n.BEFORE:this.insertIdIntoNode(s,r,l);break;case n.AFTER:this.insertIdIntoNode(s,r,l+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(a,r);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(a,r)}break}}}else if(u>-1){for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var l=this.findNodeId(s,r);if(l>-1){this.nodeDeleteAtIndex(s,l);break}}switch(o){case n.BEFORE:this.insertIdIntoRoot(r,u);break;case n.AFTER:this.insertIdIntoRoot(r,u+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(a,r);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(a,r)}}else{for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var l=this.findNodeId(s,r);if(l>-1){this.nodeDeleteAtIndex(s,l);break}}for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var l=this.findNodeId(s,a);if(l>-1){switch(o){case n.BEFORE:this.insertIdIntoNode(s,r,l);break;case n.AFTER:this.insertIdIntoNode(s,r,l+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(a,r);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(a,r)}break}}}},e.prototype.swapArrayElements=function(e,t,o){var n=e[t];return e[t]=e[o],e[o]=n,e},e.prototype.rootDeleteId=function(e){var t=this.findRootId(e);t>-1&&this.rootDelete(t)},e.prototype.nodeAndSubNodesDelete=function(e){for(var t=[],o=0;o<this.nodes[e].length;o++){var n=this.nodes[e][o];this.nodeAndSubNodesDelete(n),t.push(e)}this.nodeDelete(e);for(var o=0;o<t.length;o++)this.nodeDelete(t[o])},e.prototype.nodeRefrencesDelete=function(e){for(var t in this.nodes)if(this.nodes.hasOwnProperty(t))for(var o=0;o<this.nodes[t].length;o++){var n=this.nodes[t][o];n===e&&this.nodeDeleteAtIndex(t,o)}},e.prototype.nodeDelete=function(e){delete this.nodes[e]},e.prototype.findRootId=function(e){return this.rootIds.indexOf(e)},e.prototype.findNodeId=function(e,t){return this.nodes[e].indexOf(t)},e.prototype.findNode=function(e){return this.nodes[e]},e.prototype.nodeInsertAtStart=function(e,t){this.nodes[e].unshift(t)},e.prototype.nodeInsertAtEnd=function(e,t){this.nodes[e].push(t)},e.prototype.rootDelete=function(e){this.rootIds.splice(e,1)},e.prototype.nodeDeleteAtIndex=function(e,t){this.nodes[e].splice(t,1)},e.prototype.rootInsertAtStart=function(e){this.rootIds.unshift(e)},e.prototype.rootInsertAtEnd=function(e){this.rootIds.push(e)},e}();Object.defineProperty(o,"__esModule",{value:!0}),o.default=r},{}],24:[function(e,t,o){"use strict";var n=e("./util"),r=e("./Heap"),i=function(){function e(e){this.heap=new r.default(n.reverseCompareFunction(e))}return e.prototype.enqueue=function(e){return this.heap.add(e)},e.prototype.add=function(e){return this.heap.add(e)},e.prototype.dequeue=function(){if(0!==this.heap.size()){var e=this.heap.peek();return this.heap.removeRoot(),e}},e.prototype.peek=function(){return this.heap.peek()},e.prototype.contains=function(e){return this.heap.contains(e)},e.prototype.isEmpty=function(){return this.heap.isEmpty()},e.prototype.size=function(){return this.heap.size()},e.prototype.clear=function(){this.heap.clear()},e.prototype.forEach=function(e){this.heap.forEach(e)},e}();Object.defineProperty(o,"__esModule",{value:!0}),o.default=i},{"./Heap":19,"./util":30}],25:[function(e,t,o){"use strict";var n=e("./LinkedList"),r=function(){function e(){this.list=new n.default}return e.prototype.enqueue=function(e){return this.list.add(e)},e.prototype.add=function(e){return this.list.add(e)},e.prototype.dequeue=function(){if(0!==this.list.size()){var e=this.list.first();return this.list.removeElementAtIndex(0),e}},e.prototype.peek=function(){if(0!==this.list.size())return this.list.first()},e.prototype.size=function(){return this.list.size()},e.prototype.contains=function(e,t){return this.list.contains(e,t)},e.prototype.isEmpty=function(){return this.list.size()<=0},e.prototype.clear=function(){this.list.clear()},e.prototype.forEach=function(e){this.list.forEach(e)},e}();Object.defineProperty(o,"__esModule",{value:!0}),o.default=r},{"./LinkedList":21}],26:[function(e,t,o){"use strict";var n=e("./util"),r=e("./arrays"),i=e("./Dictionary"),s=function(){function e(e){this.dictionary=new i.default(e)}return e.prototype.contains=function(e){return this.dictionary.containsKey(e)},e.prototype.add=function(e){return!this.contains(e)&&!n.isUndefined(e)&&(this.dictionary.setValue(e,e),!0)},e.prototype.intersection=function(e){var t=this;this.forEach(function(o){return e.contains(o)||t.remove(o),!0})},e.prototype.union=function(e){var t=this;e.forEach(function(e){return t.add(e),!0})},e.prototype.difference=function(e){var t=this;e.forEach(function(e){return t.remove(e),!0})},e.prototype.isSubsetOf=function(e){if(this.size()>e.size())return!1;var t=!0;return this.forEach(function(o){return!!e.contains(o)||(t=!1,!1)}),t},e.prototype.remove=function(e){return!!this.contains(e)&&(this.dictionary.remove(e),!0)},e.prototype.forEach=function(e){this.dictionary.forEach(function(t,o){return e(o)})},e.prototype.toArray=function(){return this.dictionary.values()},e.prototype.isEmpty=function(){return this.dictionary.isEmpty()},e.prototype.size=function(){return this.dictionary.size()},e.prototype.clear=function(){this.dictionary.clear()},e.prototype.toString=function(){return r.toString(this.toArray())},e}();Object.defineProperty(o,"__esModule",{value:!0}),o.default=s},{"./Dictionary":17,"./arrays":28,"./util":30}],27:[function(e,t,o){"use strict";var n=e("./LinkedList"),r=function(){function e(){this.list=new n.default}return e.prototype.push=function(e){return this.list.add(e,0)},e.prototype.add=function(e){return this.list.add(e,0)},e.prototype.pop=function(){return this.list.removeElementAtIndex(0)},e.prototype.peek=function(){return this.list.first()},e.prototype.size=function(){return this.list.size()},e.prototype.contains=function(e,t){return this.list.contains(e,t)},e.prototype.isEmpty=function(){return this.list.isEmpty()},e.prototype.clear=function(){this.list.clear()},e.prototype.forEach=function(e){this.list.forEach(e)},e}();Object.defineProperty(o,"__esModule",{value:!0}),o.default=r},{"./LinkedList":21}],28:[function(e,t,o){"use strict";function n(e,t,o){for(var n=o||f.defaultEquals,r=e.length,i=0;i<r;i++)if(n(e[i],t))return i;return-1}function r(e,t,o){for(var n=o||f.defaultEquals,r=e.length,i=r-1;i>=0;i--)if(n(e[i],t))return i;return-1}function i(e,t,o){return n(e,t,o)>=0}function s(e,t,o){var r=n(e,t,o);return!(r<0)&&(e.splice(r,1),!0)}function a(e,t,o){for(var n=o||f.defaultEquals,r=e.length,i=0,s=0;s<r;s++)n(e[s],t)&&i++;return i}function u(e,t,o){var n=o||f.defaultEquals;if(e.length!==t.length)return!1;for(var r=e.length,i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}function l(e){return e.concat()}function c(e,t,o){if(t<0||t>=e.length||o<0||o>=e.length)return!1;var n=e[t];return e[t]=e[o],e[o]=n,!0}function h(e){return"["+e.toString()+"]"}function p(e,t){for(var o=0,n=e;o<n.length;o++){if(!1===t(n[o]))return}}var f=e("./util");o.indexOf=n,o.lastIndexOf=r,o.contains=i,o.remove=s,o.frequency=a,o.equals=u,o.copy=l,o.swap=c,o.toString=h,o.forEach=p},{"./util":30}],29:[function(t,o,n){(function(r){!function(t){if("object"==typeof n&&void 0!==o)o.exports=t();else if("function"==typeof e&&e.amd)e([],t);else{var i;i="undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:this,i.listComponent=t()}}(function(){return(t=function e(o,n,r){function i(a,u){if(!n[a]){if(!o[a]){var l="function"==typeof t&&t;if(!u&&l)return l(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var h=n[a]={exports:{}};o[a][0].call(h.exports,function(e){var t=o[a][1][e];return i(t||e)},h,h.exports,e,o,n,r)}return n[a].exports}for(var s="function"==typeof t&&t,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,o){"use strict";var n=e("./util"),r=e("./Queue"),i=function(){function e(e){this.root=null,this.compare=e||n.defaultCompare,this.nElements=0}return e.prototype.add=function(e){return!n.isUndefined(e)&&(null!==this.insertNode(this.createNode(e))&&(this.nElements++,!0))},e.prototype.clear=function(){this.root=null,this.nElements=0},e.prototype.isEmpty=function(){return 0===this.nElements},e.prototype.size=function(){return this.nElements},e.prototype.contains=function(e){return!n.isUndefined(e)&&null!==this.searchNode(this.root,e)},e.prototype.remove=function(e){var t=this.searchNode(this.root,e);return null!==t&&(this.removeNode(t),this.nElements--,!0)},e.prototype.inorderTraversal=function(e){this.inorderTraversalAux(this.root,e,{stop:!1})},e.prototype.preorderTraversal=function(e){this.preorderTraversalAux(this.root,e,{stop:!1})},e.prototype.postorderTraversal=function(e){this.postorderTraversalAux(this.root,e,{stop:!1})},e.prototype.levelTraversal=function(e){this.levelTraversalAux(this.root,e)},e.prototype.minimum=function(){if(!this.isEmpty())return this.minimumAux(this.root).element},e.prototype.maximum=function(){if(!this.isEmpty())return this.maximumAux(this.root).element},e.prototype.forEach=function(e){this.inorderTraversal(e)},e.prototype.toArray=function(){var e=[];return this.inorderTraversal(function(t){return e.push(t),!0}),e},e.prototype.height=function(){return this.heightAux(this.root)},e.prototype.searchNode=function(e,t){for(var o=null;null!==e&&0!==o;)o=this.compare(t,e.element),o<0?e=e.leftCh:o>0&&(e=e.rightCh);return e},e.prototype.transplant=function(e,t){null===e.parent?this.root=t:e===e.parent.leftCh?e.parent.leftCh=t:e.parent.rightCh=t,null!==t&&(t.parent=e.parent)},e.prototype.removeNode=function(e){if(null===e.leftCh)this.transplant(e,e.rightCh);else if(null===e.rightCh)this.transplant(e,e.leftCh);else{var t=this.minimumAux(e.rightCh);t.parent!==e&&(this.transplant(t,t.rightCh),t.rightCh=e.rightCh,t.rightCh.parent=t),this.transplant(e,t),t.leftCh=e.leftCh,t.leftCh.parent=t}},e.prototype.inorderTraversalAux=function(e,t,o){null===e||o.stop||(this.inorderTraversalAux(e.leftCh,t,o),o.stop||(o.stop=!1===t(e.element),o.stop||this.inorderTraversalAux(e.rightCh,t,o)))},e.prototype.levelTraversalAux=function(e,t){var o=new r.default;for(null!==e&&o.enqueue(e);!o.isEmpty();){if(e=o.dequeue(),!1===t(e.element))return;null!==e.leftCh&&o.enqueue(e.leftCh),null!==e.rightCh&&o.enqueue(e.rightCh)}},e.prototype.preorderTraversalAux=function(e,t,o){null===e||o.stop||(o.stop=!1===t(e.element),o.stop||(this.preorderTraversalAux(e.leftCh,t,o),o.stop||this.preorderTraversalAux(e.rightCh,t,o)))},e.prototype.postorderTraversalAux=function(e,t,o){null===e||o.stop||(this.postorderTraversalAux(e.leftCh,t,o),o.stop||(this.postorderTraversalAux(e.rightCh,t,o),o.stop||(o.stop=!1===t(e.element))))},e.prototype.minimumAux=function(e){for(;null!==e.leftCh;)e=e.leftCh;return e},e.prototype.maximumAux=function(e){for(;null!==e.rightCh;)e=e.rightCh;return e},e.prototype.heightAux=function(e){return null===e?-1:Math.max(this.heightAux(e.leftCh),this.heightAux(e.rightCh))+1},e.prototype.insertNode=function(e){for(var t=null,o=this.root,n=null;null!==o;){if(0===(n=this.compare(e.element,o.element)))return null;n<0?(t=o,o=o.leftCh):(t=o,o=o.rightCh)}return e.parent=t,null===t?this.root=e:this.compare(e.element,t.element)<0?t.leftCh=e:t.rightCh=e,e},e.prototype.createNode=function(e){return{element:e,leftCh:null,rightCh:null,parent:null}},e}();Object.defineProperty(o,"__esModule",{value:!0}),o.default=i},{"./Queue":11,"./util":15}],2:[function(e,t,o){"use strict";var n=e("./util"),r=e("./Dictionary"),i=e("./Set"),s=function(){function e(e){this.toStrF=e||n.defaultToString,this.dictionary=new r.default(this.toStrF),this.nElements=0}return e.prototype.add=function(e,t){if(void 0===t&&(t=1),n.isUndefined(e)||t<=0)return!1;if(this.contains(e))this.dictionary.getValue(e).copies+=t;else{var o={value:e,copies:t};this.dictionary.setValue(e,o)}return this.nElements+=t,!0},e.prototype.count=function(e){return this.contains(e)?this.dictionary.getValue(e).copies:0},e.prototype.contains=function(e){return this.dictionary.containsKey(e)},e.prototype.remove=function(e,t){if(void 0===t&&(t=1),n.isUndefined(e)||t<=0)return!1;if(this.contains(e)){var o=this.dictionary.getValue(e);return t>o.copies?this.nElements-=o.copies:this.nElements-=t,o.copies-=t,o.copies<=0&&this.dictionary.remove(e),!0}return!1},e.prototype.toArray=function(){for(var e=[],t=this.dictionary.values(),o=0,n=t;o<n.length;o++)for(var r=n[o],i=r.value,s=r.copies,a=0;a<s;a++)e.push(i);return e},e.prototype.toSet=function(){for(var e=new i.default(this.toStrF),t=this.dictionary.values(),o=0,n=t;o<n.length;o++){var r=n[o],s=r.value;e.add(s)}return e},e.prototype.forEach=function(e){this.dictionary.forEach(function(t,o){
for(var n=o.value,r=o.copies,i=0;i<r;i++)if(!1===e(n))return!1;return!0})},e.prototype.size=function(){return this.nElements},e.prototype.isEmpty=function(){return 0===this.nElements},e.prototype.clear=function(){this.nElements=0,this.dictionary.clear()},e}();Object.defineProperty(o,"__esModule",{value:!0}),o.default=s},{"./Dictionary":3,"./Set":12,"./util":15}],3:[function(e,t,o){"use strict";var n=e("./util"),r=function(){function e(e){this.table={},this.nElements=0,this.toStr=e||n.defaultToString}return e.prototype.getValue=function(e){var t=this.table["$"+this.toStr(e)];if(!n.isUndefined(t))return t.value},e.prototype.setValue=function(e,t){if(!n.isUndefined(e)&&!n.isUndefined(t)){var o,r="$"+this.toStr(e),i=this.table[r];return n.isUndefined(i)?(this.nElements++,o=void 0):o=i.value,this.table[r]={key:e,value:t},o}},e.prototype.remove=function(e){var t="$"+this.toStr(e),o=this.table[t];if(!n.isUndefined(o))return delete this.table[t],this.nElements--,o.value},e.prototype.keys=function(){var e=[];for(var t in this.table)if(n.has(this.table,t)){var o=this.table[t];e.push(o.key)}return e},e.prototype.values=function(){var e=[];for(var t in this.table)if(n.has(this.table,t)){var o=this.table[t];e.push(o.value)}return e},e.prototype.forEach=function(e){for(var t in this.table)if(n.has(this.table,t)){var o=this.table[t],r=e(o.key,o.value);if(!1===r)return}},e.prototype.containsKey=function(e){return!n.isUndefined(this.getValue(e))},e.prototype.clear=function(){this.table={},this.nElements=0},e.prototype.size=function(){return this.nElements},e.prototype.isEmpty=function(){return this.nElements<=0},e.prototype.toString=function(){var e="{";return this.forEach(function(t,o){e+="\n\t"+t+" : "+o}),e+"\n}"},e}();Object.defineProperty(o,"__esModule",{value:!0}),o.default=r},{"./util":15}],4:[function(e,t,o){"use strict";var n=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},r=e("./Dictionary"),i=e("./util"),s=function(e){function t(t,o){e.call(this,o),this.defaultFactoryFunction=t}return n(t,e),t.prototype.setDefault=function(t,o){var n=e.prototype.getValue.call(this,t);return i.isUndefined(n)?(this.setValue(t,o),o):n},t.prototype.getValue=function(e){return this.setDefault(e,this.defaultFactoryFunction())},t}(r.default);Object.defineProperty(o,"__esModule",{value:!0}),o.default=s},{"./Dictionary":3,"./util":15}],5:[function(e,t,o){"use strict";var n=e("./util"),r=e("./arrays"),i=function(){function e(e){this.data=[],this.compare=e||n.defaultCompare}return e.prototype.leftChildIndex=function(e){return 2*e+1},e.prototype.rightChildIndex=function(e){return 2*e+2},e.prototype.parentIndex=function(e){return Math.floor((e-1)/2)},e.prototype.minIndex=function(e,t){return t>=this.data.length?e>=this.data.length?-1:e:this.compare(this.data[e],this.data[t])<=0?e:t},e.prototype.siftUp=function(e){for(var t=this.parentIndex(e);e>0&&this.compare(this.data[t],this.data[e])>0;)r.swap(this.data,t,e),e=t,t=this.parentIndex(e)},e.prototype.siftDown=function(e){for(var t=this.minIndex(this.leftChildIndex(e),this.rightChildIndex(e));t>=0&&this.compare(this.data[e],this.data[t])>0;)r.swap(this.data,t,e),e=t,t=this.minIndex(this.leftChildIndex(e),this.rightChildIndex(e))},e.prototype.peek=function(){return this.data.length>0?this.data[0]:void 0},e.prototype.add=function(e){if(!n.isUndefined(e))return this.data.push(e),this.siftUp(this.data.length-1),!0},e.prototype.removeRoot=function(){if(this.data.length>0){var e=this.data[0];return this.data[0]=this.data[this.data.length-1],this.data.splice(this.data.length-1,1),this.data.length>0&&this.siftDown(0),e}},e.prototype.contains=function(e){var t=n.compareToEquals(this.compare);return r.contains(this.data,e,t)},e.prototype.size=function(){return this.data.length},e.prototype.isEmpty=function(){return this.data.length<=0},e.prototype.clear=function(){this.data.length=0},e.prototype.forEach=function(e){r.forEach(this.data,e)},e}();Object.defineProperty(o,"__esModule",{value:!0}),o.default=i},{"./arrays":14,"./util":15}],6:[function(e,t,o){"use strict";var n=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},r=e("./Dictionary"),i=e("./util"),s=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},e}(),a=function(e){function t(t){e.call(this,t),this.head=new s(null,null),this.tail=new s(null,null),this.head.next=this.tail,this.tail.prev=this.head}return n(t,e),t.prototype.appendToTail=function(e){var t=this.tail.prev;t.next=e,e.prev=t,e.next=this.tail,this.tail.prev=e},t.prototype.getLinkedDictionaryPair=function(e){if(!i.isUndefined(e)){var t="$"+this.toStr(e);return this.table[t]}},t.prototype.getValue=function(e){var t=this.getLinkedDictionaryPair(e);if(!i.isUndefined(t))return t.value},t.prototype.remove=function(t){var o=this.getLinkedDictionaryPair(t);if(!i.isUndefined(o))return e.prototype.remove.call(this,t),o.unlink(),o.value},t.prototype.clear=function(){e.prototype.clear.call(this),this.head.next=this.tail,this.tail.prev=this.head},t.prototype.replace=function(e,t){var o="$"+this.toStr(t.key);t.next=e.next,t.prev=e.prev,this.remove(e.key),t.prev.next=t,t.next.prev=t,this.table[o]=t,++this.nElements},t.prototype.setValue=function(e,t){if(!i.isUndefined(e)&&!i.isUndefined(t)){var o=this.getLinkedDictionaryPair(e),n=new s(e,t),r="$"+this.toStr(e);return i.isUndefined(o)?(this.appendToTail(n),this.table[r]=n,void++this.nElements):(this.replace(o,n),o.value)}},t.prototype.keys=function(){var e=[];return this.forEach(function(t,o){e.push(t)}),e},t.prototype.values=function(){var e=[];return this.forEach(function(t,o){e.push(o)}),e},t.prototype.forEach=function(e){for(var t=this.head.next;null!=t.next;){if(!1===e(t.key,t.value))return;t=t.next}},t}(r.default);Object.defineProperty(o,"__esModule",{value:!0}),o.default=a},{"./Dictionary":3,"./util":15}],7:[function(e,t,o){"use strict";var n=e("./util"),r=e("./arrays"),i=function(){function e(){this.firstNode=null,this.lastNode=null,this.nElements=0}return e.prototype.add=function(e,t){if(n.isUndefined(t)&&(t=this.nElements),t<0||t>this.nElements||n.isUndefined(e))return!1;var o=this.createNode(e);if(0===this.nElements)this.firstNode=o,this.lastNode=o;else if(t===this.nElements)this.lastNode.next=o,this.lastNode=o;else if(0===t)o.next=this.firstNode,this.firstNode=o;else{var r=this.nodeAtIndex(t-1);o.next=r.next,r.next=o}return this.nElements++,!0},e.prototype.first=function(){if(null!==this.firstNode)return this.firstNode.element},e.prototype.last=function(){if(null!==this.lastNode)return this.lastNode.element},e.prototype.elementAtIndex=function(e){var t=this.nodeAtIndex(e);if(null!==t)return t.element},e.prototype.indexOf=function(e,t){var o=t||n.defaultEquals;if(n.isUndefined(e))return-1;for(var r=this.firstNode,i=0;null!==r;){if(o(r.element,e))return i;i++,r=r.next}return-1},e.prototype.contains=function(e,t){return this.indexOf(e,t)>=0},e.prototype.remove=function(e,t){var o=t||n.defaultEquals;if(this.nElements<1||n.isUndefined(e))return!1;for(var r=null,i=this.firstNode;null!==i;){if(o(i.element,e))return i===this.firstNode?(this.firstNode=this.firstNode.next,i===this.lastNode&&(this.lastNode=null)):i===this.lastNode?(this.lastNode=r,r.next=i.next,i.next=null):(r.next=i.next,i.next=null),this.nElements--,!0;r=i,i=i.next}return!1},e.prototype.clear=function(){this.firstNode=null,this.lastNode=null,this.nElements=0},e.prototype.equals=function(t,o){var r=o||n.defaultEquals;return t instanceof e&&(this.size()===t.size()&&this.equalsAux(this.firstNode,t.firstNode,r))},e.prototype.equalsAux=function(e,t,o){for(;null!==e;){if(!o(e.element,t.element))return!1;e=e.next,t=t.next}return!0},e.prototype.removeElementAtIndex=function(e){if(!(e<0||e>=this.nElements)){var t;if(1===this.nElements)t=this.firstNode.element,this.firstNode=null,this.lastNode=null;else{var o=this.nodeAtIndex(e-1);null===o?(t=this.firstNode.element,this.firstNode=this.firstNode.next):o.next===this.lastNode&&(t=this.lastNode.element,this.lastNode=o),null!==o&&(t=o.next.element,o.next=o.next.next)}return this.nElements--,t}},e.prototype.forEach=function(e){for(var t=this.firstNode;null!==t&&!1!==e(t.element);)t=t.next},e.prototype.reverse=function(){for(var e=null,t=this.firstNode,o=null;null!==t;)o=t.next,t.next=e,e=t,t=o;o=this.firstNode,this.firstNode=this.lastNode,this.lastNode=o},e.prototype.toArray=function(){for(var e=[],t=this.firstNode;null!==t;)e.push(t.element),t=t.next;return e},e.prototype.size=function(){return this.nElements},e.prototype.isEmpty=function(){return this.nElements<=0},e.prototype.toString=function(){return r.toString(this.toArray())},e.prototype.nodeAtIndex=function(e){if(e<0||e>=this.nElements)return null;if(e===this.nElements-1)return this.lastNode;for(var t=this.firstNode,o=0;o<e;o++)t=t.next;return t},e.prototype.createNode=function(e){return{element:e,next:null}},e}();Object.defineProperty(o,"__esModule",{value:!0}),o.default=i},{"./arrays":14,"./util":15}],8:[function(e,t,o){"use strict";var n=e("./util"),r=e("./Dictionary"),i=e("./arrays"),s=function(){function e(e,t,o){void 0===o&&(o=!1),this.dict=new r.default(e),this.equalsF=t||n.defaultEquals,this.allowDuplicate=o}return e.prototype.getValue=function(e){var t=this.dict.getValue(e);return n.isUndefined(t)?[]:i.copy(t)},e.prototype.setValue=function(e,t){if(n.isUndefined(e)||n.isUndefined(t))return!1;if(!this.containsKey(e))return this.dict.setValue(e,[t]),!0;var o=this.dict.getValue(e);return!(!this.allowDuplicate&&i.contains(o,t,this.equalsF))&&(o.push(t),!0)},e.prototype.remove=function(e,t){if(n.isUndefined(t)){var o=this.dict.remove(e);return!n.isUndefined(o)}var r=this.dict.getValue(e);return!!i.remove(r,t,this.equalsF)&&(0===r.length&&this.dict.remove(e),!0)},e.prototype.keys=function(){return this.dict.keys()},e.prototype.values=function(){for(var e=this.dict.values(),t=[],o=0,n=e;o<n.length;o++)for(var r=n[o],i=0,s=r;i<s.length;i++){var a=s[i];t.push(a)}return t},e.prototype.containsKey=function(e){return this.dict.containsKey(e)},e.prototype.clear=function(){this.dict.clear()},e.prototype.size=function(){return this.dict.size()},e.prototype.isEmpty=function(){return this.dict.isEmpty()},e}();Object.defineProperty(o,"__esModule",{value:!0}),o.default=s},{"./Dictionary":3,"./arrays":14,"./util":15}],9:[function(e,t,o){"use strict";var n;!function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER",e[e.INSIDE_AT_END=2]="INSIDE_AT_END",e[e.INSIDE_AT_START=3]="INSIDE_AT_START"}(n||(n={}));var r=function(){function e(e,t){void 0===e&&(e=[]),void 0===t&&(t={}),this.rootIds=e,this.nodes=t,this.initRootIds(),this.initNodes()}return e.prototype.initRootIds=function(){for(var e=0,t=this.rootIds;e<t.length;e++){var o=t[e];this.createEmptyNodeIfNotExist(o)}},e.prototype.initNodes=function(){for(var e in this.nodes)if(this.nodes.hasOwnProperty(e))for(var t=0,o=this.nodes[e];t<o.length;t++){var n=o[t];this.createEmptyNodeIfNotExist(n)}},e.prototype.createEmptyNodeIfNotExist=function(e){this.nodes[e]||(this.nodes[e]=[])},e.prototype.getRootIds=function(){return this.rootIds.slice()},e.prototype.getNodes=function(){var e={};for(var t in this.nodes)this.nodes.hasOwnProperty(t)&&(e[t]=this.nodes[t].slice());return e},e.prototype.getObject=function(){return{rootIds:this.getRootIds(),nodes:this.getNodes()}},e.prototype.toObject=function(){return this.getObject()},e.prototype.flatten=function(){function e(t,o,n,r){if(void 0===r&&(r=0),t&&o&&n&&o[t]){r++;for(var i=o[t],s=0;s<i.length;s++){var a=i[s];n.push({id:a,level:r,hasParent:!0}),e(a,o,n,r)}r--}}for(var t=this,o=[],n=0;n<this.rootIds.length;n++){var r=this.rootIds[n];o.push({id:r,level:0,hasParent:!1,childrenCount:void 0}),e(r,this.nodes,o,0)}for(var i=0,s=o;i<s.length;i++){var a=s[i];a.childrenCount=function(e){if(t.nodes[e]){return t.nodes[e].length}return 0}(a.id)}return o},e.prototype.moveIdBeforeId=function(e,t){return this.moveId(e,t,n.BEFORE)},e.prototype.moveIdAfterId=function(e,t){return this.moveId(e,t,n.AFTER)},e.prototype.moveIdIntoId=function(e,t,o){return void 0===o&&(o=!0),o?this.moveId(e,t,n.INSIDE_AT_START):this.moveId(e,t,n.INSIDE_AT_END)},e.prototype.swapRootIdWithRootId=function(e,t){var o=this.findRootId(e),n=this.findRootId(t);this.swapRootPositionWithRootPosition(o,n)},e.prototype.swapRootPositionWithRootPosition=function(e,t){var o=this.rootIds[t];this.rootIds[t]=this.rootIds[e],this.rootIds[e]=o},e.prototype.deleteId=function(e){this.rootDeleteId(e),this.nodeAndSubNodesDelete(e),this.nodeRefrencesDelete(e)},e.prototype.insertIdBeforeId=function(e,t){var o=this.findRootId(e);o>-1&&this.insertIdIntoRoot(t,o);for(var n in this.nodes)if(this.nodes.hasOwnProperty(n)){var r=this.findNodeId(n,e);r>-1&&this.insertIdIntoNode(n,t,r)}},e.prototype.insertIdAfterId=function(e,t){var o=this.findRootId(e);o>-1&&this.insertIdIntoRoot(t,o+1);for(var n in this.nodes)if(this.nodes.hasOwnProperty(n)){var r=this.findNodeId(n,e);r>-1&&this.insertIdIntoNode(n,t,r+1)}},e.prototype.insertIdIntoId=function(e,t){this.nodeInsertAtEnd(e,t),this.nodes[t]=[]},e.prototype.insertIdIntoRoot=function(e,t){if(void 0===t)this.rootInsertAtEnd(e);else if(t<0){var o=this.rootIds.length;this.rootIds.splice(t+o+1,0,e)}else this.rootIds.splice(t,0,e);this.nodes[e]=this.nodes[e]||[]},e.prototype.insertIdIntoNode=function(e,t,o){if(this.nodes[e]=this.nodes[e]||[],this.nodes[t]=this.nodes[t]||[],void 0===o)this.nodeInsertAtEnd(e,t);else if(o<0){var n=this.nodes[e].length;this.nodes[e].splice(o+n+1,0,t)}else this.nodes[e].splice(o,0,t)},e.prototype.moveId=function(e,t,o){var r=e,i=this.findRootId(r);this.nodes[t];for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){this.findNodeId(s,t);break}var a=t,u=this.findRootId(a);this.nodes[t];for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){this.findNodeId(s,t);break}if(i>-1)if(u>-1)switch(this.rootDelete(i),u>i&&u--,o){case n.BEFORE:this.insertIdIntoRoot(r,u);break;case n.AFTER:this.insertIdIntoRoot(r,u+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(a,r);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(a,r)}else{this.rootDelete(i);for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var l=this.findNodeId(s,a);if(l>-1){switch(o){case n.BEFORE:this.insertIdIntoNode(s,r,l);break;case n.AFTER:this.insertIdIntoNode(s,r,l+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(a,r);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(a,r)}break}}}else if(u>-1){for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var l=this.findNodeId(s,r);if(l>-1){this.nodeDeleteAtIndex(s,l);break}}switch(o){case n.BEFORE:this.insertIdIntoRoot(r,u);break;case n.AFTER:this.insertIdIntoRoot(r,u+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(a,r);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(a,r)}}else{for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var l=this.findNodeId(s,r);if(l>-1){this.nodeDeleteAtIndex(s,l);break}}for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var l=this.findNodeId(s,a);if(l>-1){switch(o){case n.BEFORE:this.insertIdIntoNode(s,r,l);break;case n.AFTER:this.insertIdIntoNode(s,r,l+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(a,r);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(a,r)}break}}}},e.prototype.swapArrayElements=function(e,t,o){var n=e[t];return e[t]=e[o],e[o]=n,e},e.prototype.rootDeleteId=function(e){var t=this.findRootId(e);t>-1&&this.rootDelete(t)},e.prototype.nodeAndSubNodesDelete=function(e){for(var t=[],o=0;o<this.nodes[e].length;o++){var n=this.nodes[e][o];this.nodeAndSubNodesDelete(n),t.push(e)}this.nodeDelete(e);for(var o=0;o<t.length;o++)this.nodeDelete(t[o])},e.prototype.nodeRefrencesDelete=function(e){for(var t in this.nodes)if(this.nodes.hasOwnProperty(t))for(var o=0;o<this.nodes[t].length;o++){var n=this.nodes[t][o];n===e&&this.nodeDeleteAtIndex(t,o)}},e.prototype.nodeDelete=function(e){delete this.nodes[e]},e.prototype.findRootId=function(e){return this.rootIds.indexOf(e)},e.prototype.findNodeId=function(e,t){return this.nodes[e].indexOf(t)},e.prototype.findNode=function(e){return this.nodes[e]},e.prototype.nodeInsertAtStart=function(e,t){this.nodes[e].unshift(t)},e.prototype.nodeInsertAtEnd=function(e,t){this.nodes[e].push(t)},e.prototype.rootDelete=function(e){this.rootIds.splice(e,1)},e.prototype.nodeDeleteAtIndex=function(e,t){this.nodes[e].splice(t,1)},e.prototype.rootInsertAtStart=function(e){this.rootIds.unshift(e)},e.prototype.rootInsertAtEnd=function(e){this.rootIds.push(e)},e}();Object.defineProperty(o,"__esModule",{value:!0}),o.default=r},{}],10:[function(e,t,o){"use strict";var n=e("./util"),r=e("./Heap"),i=function(){function e(e){this.heap=new r.default(n.reverseCompareFunction(e))}return e.prototype.enqueue=function(e){return this.heap.add(e)},e.prototype.add=function(e){return this.heap.add(e)},e.prototype.dequeue=function(){if(0!==this.heap.size()){var e=this.heap.peek();return this.heap.removeRoot(),e}},e.prototype.peek=function(){return this.heap.peek()},e.prototype.contains=function(e){return this.heap.contains(e)},e.prototype.isEmpty=function(){return this.heap.isEmpty()},e.prototype.size=function(){return this.heap.size()},e.prototype.clear=function(){this.heap.clear()},e.prototype.forEach=function(e){this.heap.forEach(e)},e}();Object.defineProperty(o,"__esModule",{value:!0}),o.default=i},{"./Heap":5,"./util":15}],11:[function(e,t,o){"use strict";var n=e("./LinkedList"),r=function(){function e(){this.list=new n.default}return e.prototype.enqueue=function(e){return this.list.add(e)},e.prototype.add=function(e){return this.list.add(e)},e.prototype.dequeue=function(){if(0!==this.list.size()){var e=this.list.first();return this.list.removeElementAtIndex(0),e}},e.prototype.peek=function(){if(0!==this.list.size())return this.list.first()},e.prototype.size=function(){return this.list.size()},e.prototype.contains=function(e,t){return this.list.contains(e,t)},e.prototype.isEmpty=function(){return this.list.size()<=0},e.prototype.clear=function(){this.list.clear()},e.prototype.forEach=function(e){this.list.forEach(e)},e}();Object.defineProperty(o,"__esModule",{value:!0}),o.default=r},{"./LinkedList":7}],12:[function(e,t,o){"use strict";var n=e("./util"),r=e("./arrays"),i=e("./Dictionary"),s=function(){function e(e){this.dictionary=new i.default(e)}return e.prototype.contains=function(e){return this.dictionary.containsKey(e)},e.prototype.add=function(e){return!this.contains(e)&&!n.isUndefined(e)&&(this.dictionary.setValue(e,e),!0)},e.prototype.intersection=function(e){var t=this;this.forEach(function(o){return e.contains(o)||t.remove(o),!0})},e.prototype.union=function(e){var t=this;e.forEach(function(e){return t.add(e),!0})},e.prototype.difference=function(e){var t=this;e.forEach(function(e){return t.remove(e),!0})},e.prototype.isSubsetOf=function(e){if(this.size()>e.size())return!1;var t=!0;return this.forEach(function(o){return!!e.contains(o)||(t=!1,!1)}),t},e.prototype.remove=function(e){return!!this.contains(e)&&(this.dictionary.remove(e),!0)},e.prototype.forEach=function(e){this.dictionary.forEach(function(t,o){return e(o)})},e.prototype.toArray=function(){return this.dictionary.values()},e.prototype.isEmpty=function(){return this.dictionary.isEmpty()},e.prototype.size=function(){return this.dictionary.size()},e.prototype.clear=function(){this.dictionary.clear()},e.prototype.toString=function(){return r.toString(this.toArray())},e}();Object.defineProperty(o,"__esModule",{value:!0}),o.default=s},{"./Dictionary":3,"./arrays":14,"./util":15}],13:[function(e,t,o){"use strict";var n=e("./LinkedList"),r=function(){function e(){this.list=new n.default}return e.prototype.push=function(e){return this.list.add(e,0)},e.prototype.add=function(e){return this.list.add(e,0)},e.prototype.pop=function(){return this.list.removeElementAtIndex(0)},e.prototype.peek=function(){return this.list.first()},e.prototype.size=function(){return this.list.size()},e.prototype.contains=function(e,t){return this.list.contains(e,t)},e.prototype.isEmpty=function(){return this.list.isEmpty()},e.prototype.clear=function(){this.list.clear()},e.prototype.forEach=function(e){this.list.forEach(e)},e}();Object.defineProperty(o,"__esModule",{value:!0}),o.default=r},{"./LinkedList":7}],14:[function(e,t,o){"use strict";function n(e,t,o){for(var n=o||f.defaultEquals,r=e.length,i=0;i<r;i++)if(n(e[i],t))return i;return-1}function r(e,t,o){for(var n=o||f.defaultEquals,r=e.length,i=r-1;i>=0;i--)if(n(e[i],t))return i;return-1}function i(e,t,o){return n(e,t,o)>=0}function s(e,t,o){var r=n(e,t,o);return!(r<0)&&(e.splice(r,1),!0)}function a(e,t,o){for(var n=o||f.defaultEquals,r=e.length,i=0,s=0;s<r;s++)n(e[s],t)&&i++;return i}function u(e,t,o){var n=o||f.defaultEquals;if(e.length!==t.length)return!1;for(var r=e.length,i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}function l(e){return e.concat()}function c(e,t,o){if(t<0||t>=e.length||o<0||o>=e.length)return!1;var n=e[t];return e[t]=e[o],e[o]=n,!0}function h(e){return"["+e.toString()+"]"}function p(e,t){for(var o=0,n=e;o<n.length;o++){if(!1===t(n[o]))return}}var f=e("./util");o.indexOf=n,o.lastIndexOf=r,o.contains=i,o.remove=s,o.frequency=a,o.equals=u,o.copy=l,o.swap=c,o.toString=h,o.forEach=p},{"./util":15}],15:[function(e,t,o){"use strict";function n(e,t){return e<t?-1:e===t?0:1}function r(e,t){return e===t}function i(e){return null===e?"COLLECTION_NULL":u(e)?"COLLECTION_UNDEFINED":l(e)?"$s"+e:"$o"+e.toString()}function s(e,t){if(void 0===t&&(t=","),null===e)return"COLLECTION_NULL";if(u(e))return"COLLECTION_UNDEFINED";if(l(e))return e.toString();var n="{",r=!0;for(var i in e)o.has(e,i)&&(r?r=!1:n+=t,n=n+i+":"+e[i]);return n+"}"}function a(e){return"function"==typeof e}function u(e){return void 0===e}function l(e){return"[object String]"===Object.prototype.toString.call(e)}function c(e){return a(e)?function(t,o){return-1*e(t,o)}:function(e,t){return e<t?1:e===t?0:-1}}function h(e){return function(t,o){return 0===e(t,o)}}var p=Object.prototype.hasOwnProperty;o.has=function(e,t){return p.call(e,t)},o.defaultCompare=n,o.defaultEquals=r,o.defaultToString=i,o.makeString=s,o.isFunction=a,o.isUndefined=u,o.isString=l,o.reverseCompareFunction=c,o.compareToEquals=h},{}],"typescript-collections":[function(e,t,o){"use strict";var n=e("./arrays");o.arrays=n;var r=e("./Bag");o.Bag=r.default;var i=e("./BSTree");o.BSTree=i.default;var s=e("./Dictionary");o.Dictionary=s.default;var a=e("./Heap");o.Heap=a.default;var u=e("./LinkedDictionary");o.LinkedDictionary=u.default;var l=e("./LinkedList");o.LinkedList=l.default;var c=e("./MultiDictionary");o.MultiDictionary=c.default;var h=e("./FactoryDictionary");o.FactoryDictionary=h.default;var p=e("./FactoryDictionary");o.DefaultDictionary=p.default;var f=e("./Queue");o.Queue=f.default;var g=e("./PriorityQueue");o.PriorityQueue=g.default;var d=e("./Set");o.Set=d.default;var y=e("./Stack");o.Stack=y.default;var v=e("./MultiRootTree");o.MultiRootTree=v.default;var m=e("./util");o.util=m},{"./BSTree":1,"./Bag":2,"./Dictionary":3,"./FactoryDictionary":4,"./Heap":5,"./LinkedDictionary":6,"./LinkedList":7,"./MultiDictionary":8,"./MultiRootTree":9,"./PriorityQueue":10,"./Queue":11,"./Set":12,"./Stack":13,"./arrays":14,"./util":15}]},{},[]))("typescript-collections")})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./BSTree":15,"./Bag":16,"./Dictionary":17,"./FactoryDictionary":18,"./Heap":19,"./LinkedDictionary":20,"./LinkedList":21,"./MultiDictionary":22,"./MultiRootTree":23,"./PriorityQueue":24,"./Queue":25,"./Set":26,"./Stack":27,"./arrays":28,"./util":30,"typescript-collections":29}],30:[function(e,t,o){"use strict";function n(e,t){return e<t?-1:e===t?0:1}function r(e,t){return e===t}function i(e){return null===e?"COLLECTION_NULL":u(e)?"COLLECTION_UNDEFINED":l(e)?"$s"+e:"$o"+e.toString()}function s(e,t){if(void 0===t&&(t=","),null===e)return"COLLECTION_NULL";if(u(e))return"COLLECTION_UNDEFINED";if(l(e))return e.toString();var n="{",r=!0;for(var i in e)o.has(e,i)&&(r?r=!1:n+=t,n=n+i+":"+e[i]);return n+"}"}function a(e){return"function"==typeof e}function u(e){return void 0===e}function l(e){return"[object String]"===Object.prototype.toString.call(e)}function c(e){return a(e)?function(t,o){return-1*e(t,o)}:function(e,t){return e<t?1:e===t?0:-1}}function h(e){return function(t,o){return 0===e(t,o)}}var p=Object.prototype.hasOwnProperty;o.has=function(e,t){return p.call(e,t)},o.defaultCompare=n,o.defaultEquals=r,o.defaultToString=i,o.makeString=s,o.isFunction=a,o.isUndefined=u,o.isString=l,o.reverseCompareFunction=c,o.compareToEquals=h},{}],31:[function(e,t,o){"use strict";var n=e("../utils/DataStructures"),r=e("../log/category/CategoryService"),i=e("../log/LoggerOptions"),s=function(){function e(){}return e.prototype.help=function(){console.log(e._help)},e.prototype.example=function(){console.log(e._example)},e.prototype.showSettings=function(t){void 0===t&&(t="all");var o=new n.StringBuilder,r=e._getCategoryService();e._getCategories(t).forEach(function(t){e._processCategory(r,t,o,0)}),console.log(o.toString())},e.prototype.change=function(t){var o=e._getCategoryService(),n=e._getCategories(t.category),r=null,s=null,a=null,u=null,l=null,c=function(e){null!==l&&(l+=", "),null===l?l=e:l+=e};c("recursive="+t.recursive),"string"==typeof t.logLevel&&(r=i.LogLevel.fromString(t.logLevel),c("logLevel="+t.logLevel)),"string"==typeof t.logFormat&&(s=i.DateFormatEnum.fromString(t.logFormat),c("logFormat="+t.logFormat)),"boolean"==typeof t.showCategoryName&&(a=t.showCategoryName,c("showCategoryName="+t.showCategoryName)),"boolean"==typeof t.showTimestamp&&(u=t.showTimestamp,c("showTimestamp="+t.showTimestamp));var h=function(e){var t=o.getCategorySettings(e);null!==t&&(null!==r&&(t.logLevel=r),null!==s&&(t.logFormat.dateFormat.formatEnum=s),null!==u&&(t.logFormat.showTimeStamp=u),null!==a&&(t.logFormat.showCategoryName=a))};n.forEach(function(o){return e._applyToCategory(o,t.recursive,h)}),console.log("Applied changes: "+l+" to categories '"+t.category+"'.")},e.prototype.reset=function(t){void 0===t&&(t="all");var o=e._getCategoryService(),n=function(e){var t=o.getCategorySettings(e),n=o.getOriginalCategorySettings(e);null!==t&&null!==n&&(t.logLevel=n.logLevel,t.logFormat.dateFormat.formatEnum=n.logFormat.dateFormat.formatEnum,t.logFormat.showTimeStamp=n.logFormat.showTimeStamp,t.logFormat.showCategoryName=n.logFormat.showCategoryName)};e._getCategories(t).forEach(function(t){return e._applyToCategory(t,!0,n)}),console.log("Applied reset to category: "+t+".")},e._processCategory=function(t,o,n,r){var s=t.getCategorySettings(o);if(null!==s){if(n.append("  "+o.id+": "),r>0)for(var a=0;a<r;a++)n.append("  ");n.append(o.name+" ("+i.LogLevel[s.logLevel].toString()+"@"+i.LoggerType[s.loggerType].toString()+")\n"),o.children.length>0&&o.children.forEach(function(o){e._processCategory(t,o,n,r+1)})}},e._applyToCategory=function(t,o,n){n(t),o&&t.children.forEach(function(t){e._applyToCategory(t,o,n)})},e._getCategoryService=function(){return r.CategoryServiceFactory.getRuntimeSettings()},e._getCategories=function(t){var o=e._getCategoryService(),n=[];if("all"===t)n=o.getRootCategories();else{var r=o.getCategoryById(t);if(null===r)throw new Error("Failed to find category with id "+t);n.push(r)}return n},e}();s._help='\n  help(): void\n    ** Shows this help.\n    \n  example(): void\n    ** Shows an example on how to use this.\n    \n  showSettings(id: number | "all" = "all"): void\n    ** Shows settings for a specific category, or for all. The id of categories can be found by calling this method without parameter.\n    \n  change(settings: CategoryServiceControlSettings): void\n    ** Changes the current settings for one or all categories. \n    ** \n       CategoryServiceControlSettings, properties of object:\n         category: number | "all"\n           ** Apply to specific category, or "all".\n           ** Required        \n        \n         recursive: boolean\n           ** Apply to child categories (true) or not.\n           ** Required\n           \n         logLevel: "Fatal" | "Error" | "Warn" | "Info" | "Debug" | "Trace" | undefined\n           ** Set log level, undefined will not change the setting.\n           ** Optional\n         \n         logFormat: "Default" | "YearMonthDayTime" | "YearDayMonthWithFullTime" | "YearDayMonthTime" | undefined\n           ** Set the log format, undefined will not change the setting.\n           ** Optional\n         \n         showTimestamp: boolean | undefined  \n           ** Whether to show timestamp, undefined will not change the setting.\n           ** Optional\n         \n         showCategoryName: boolean | undefined\n           ** Whether to show the category name, undefined will not change the setting.\n           ** Optional\n           \n   reset(id: number | "all"): void\n     ** Resets everything to original values, for one specific or for all categories.\n',s._example='\n  Examples:\n    change({category: "all", recursive:true, logLevel: "Info"}) \n      ** Change loglevel to Info for all categories, apply to child categories as well.\n     \n    change({category: 1, recursive:false, logLevel: "Warn"})\n      ** Change logLevel for category 1, do not recurse.\n      \n    change({category: "all", recursive:true, logLevel: "Debug", logFormat: "YearDayMonthTime", showTimestamp:false, showCategoryName:false})    \n      ** Change loglevel to Debug for all categories, apply format, do not show timestamp and category names - recursively to child categories.    \n      \n',o.CategoryServiceControlImpl=s},{"../log/LoggerOptions":34,"../log/category/CategoryService":41,"../utils/DataStructures":48}],32:[function(e,t,o){"use strict";var n=e("../log/LoggerOptions"),r=e("../log/standard/LoggerFactoryService"),i=e("../utils/DataStructures"),s=function(){function e(){}return e.prototype.help=function(){console.log(e._help)},e.prototype.listFactories=function(){var t=e._getRuntimeSettingsLoggerFactories(),o=new i.StringBuilder;o.appendLine("Registered LoggerFactories (index / name)");for(var n=0;n<t.length;n++){var r=t[n];o.append("  "+n).append(": "+r.getName()+"\n")}console.log(o.toString())},e.prototype.showSettings=function(t){void 0===t&&(t="all");var o=[];if("all"===t){var r=0;e._getRuntimeSettingsLoggerFactories().forEach(function(e){o.push(new i.TuplePair(r++,e))})}else{var s=e._getRuntimeSettingsLoggerFactories();if(!(t>=0&&t<s.length))throw new Error("Requested number: "+t+" was not found.");o.push(new i.TuplePair(t,s[t]))}for(var a=0,u=o;a<u.length;a++){var l=u[a];console.log("  LoggerFactory: "+l.y.getName()+" (id="+l.x+")");for(var c=l.y.getLogGroupRuntimeSettings(),h=0;h<c.length;h++){var p=c[h];console.log("     LogGroup: (id="+h+")"),console.log("       RegExp: "+p.logGroupRule.regExp.source),console.log("       Level: "+n.LogLevel[p.level].toString()),console.log("       LoggerType: "+n.LoggerType[p.loggerType].toString())}}},e.prototype.reset=function(t){void 0===t&&(t="all");var o=e._getRuntimeSettingsLoggerFactories(),n=[];"all"===t?n=o:t>=0&&t<o.length&&n.push(o[t]),n.forEach(function(e){console.log("Reset all settings for factory "+t),new a(e).reset()})},e.prototype.getLoggerFactoryControl=function(t){var o=e._getRuntimeSettingsLoggerFactories();if(t>=0&&t<o.length)return new a(o[t]);throw new Error("idFactory is invalid (less than 0) or non existing id.")},e._getRuntimeSettingsLoggerFactories=function(){return e._getSettings().getRuntimeSettingsForLoggerFactories()},e._getSettings=function(){return r.LFService.getRuntimeSettings()},e}()
;s._help='\n  help(): void\n    ** Shows this help.\n    \n  listFactories(): void\n    ** List all registered LoggerFactories with associated log groups with respective ids (ids can be used to target a factory and/or group).\n    \n  showSettings(idFactory: number | "all"): void\n    ** Show log group settings for idFactory (use listFactories to find id for a LoggerFactory). If idFactory is "all" shows all factories. \n  \n  getLoggerFactoryControl(idFactory: number): LoggerFactoryControl\n    ** Return LoggerFactoryControl when found for given idFactory or throws Error if invalid or null, get the id by using listFactories()\n    \n  reset(idFactory: number | "all"): void\n    ** Resets given factory or all factories back to original values. \n',o.LoggerControlImpl=s;var a=function(){function e(e){this._settings=e}return e.prototype.help=function(){console.log(e._help)},e.prototype.example=function(){console.log(e._example)},e.prototype.showSettings=function(e){void 0===e&&(e="all");var t=new i.StringBuilder,o=this._settings.getLogGroupRuntimeSettings();t.appendLine("Registered LogGroups (index / expression)");for(var r=0;r<o.length;r++){var s=o[r];t.appendLine("  "+r+": "+s.logGroupRule.regExp.source+", logLevel="+n.LogLevel[s.level].toString()+", showTimestamp="+s.logFormat.showTimeStamp+", showLoggerName="+s.logFormat.showLoggerName+", format="+n.DateFormatEnum[s.logFormat.dateFormat.formatEnum].toString())}console.log(t.toString())},e.prototype.change=function(e){var t=this._getLogGroupRunTimeSettingsFor(e.group),o=null,r=null,i=null,s=null,a=null,u=function(e){null!==a&&(a+=", "),null===a?a=e:a+=e};"string"==typeof e.logLevel&&(o=n.LogLevel.fromString(e.logLevel),u("logLevel="+e.logLevel)),"string"==typeof e.logFormat&&(r=n.DateFormatEnum.fromString(e.logFormat),u("logFormat="+e.logFormat)),"boolean"==typeof e.showLoggerName&&(i=e.showLoggerName,u("showLoggerName="+e.showLoggerName)),"boolean"==typeof e.showTimestamp&&(s=e.showTimestamp,u("showTimestamp="+e.showTimestamp)),t.forEach(function(e){null!==o&&(e.level=o),null!==r&&(e.logFormat.dateFormat.formatEnum=r),null!==s&&(e.logFormat.showTimeStamp=s),null!==i&&(e.logFormat.showLoggerName=i)}),console.log("Applied changes: "+a+" to log groups '"+e.group+"'.")},e.prototype.reset=function(e){void 0===e&&(e="all");for(var t=this._getLogGroupRunTimeSettingsFor(e),o=0,n=t;o<n.length;o++){var r=n[o];r.level=r.logGroupRule.level,r.logFormat.showTimeStamp=r.logGroupRule.logFormat.showTimeStamp,r.logFormat.showLoggerName=r.logGroupRule.logFormat.showLoggerName,r.logFormat.dateFormat.formatEnum=r.logGroupRule.logFormat.dateFormat.formatEnum}console.log("Reset all settings for group "+e)},e.prototype._getLogGroupRunTimeSettingsFor=function(e){var t=[];return"all"===e?t=this._settings.getLogGroupRuntimeSettings():(this._checkIndex(e),t.push(this._settings.getLogGroupRuntimeSettings()[e])),t},e.prototype._checkIndex=function(e){if(e<0||e>=this._settings.getLogGroupRuntimeSettings().length)throw new Error("Invalid index, use listLogGroups to find out a valid one.")},e}();a._help='\n  help(): void\n    ** Shows this help.\n    \n  example(): void\n    ** Shows an example of usage.\n\n  showSettings(id: number | "all"): void\n    ** Prints settings for given group id, "all" for all group.\n\n  change(settings: LogGroupControlSettings): void\n    ** Changes the current settings for one or all log groups. \n    ** \n       LogGroupControlSettings, properties of object:\n         group: number | "all"\n           ** Apply to specific group, or "all".\n           ** Required        \n           \n         logLevel: "Fatal" | "Error" | "Warn" | "Info" | "Debug" | "Trace" | undefined\n           ** Set log level, undefined will not change the setting.\n           ** Optional\n         \n         logFormat: "Default" | "YearMonthDayTime" | "YearDayMonthWithFullTime" | "YearDayMonthTime" | undefined\n           ** Set the log format, undefined will not change the setting.\n           ** Optional\n         \n         showTimestamp: boolean | undefined  \n           ** Whether to show timestamp, undefined will not change the setting.\n           ** Optional\n         \n         showLoggerName: boolean | undefined\n           ** Whether to show the logger name, undefined will not change the setting.\n           ** Optional  \n           \n  reset(id: number | "all"): void\n    ** Resets everything to original values, for one specific or for all groups.\n    \n  help():\n    ** Shows this help.\n',a._example='\n  Examples:\n    change({group: "all", logLevel: "Info"}) \n      ** Change loglevel to Info for all groups.\n     \n    change({group: 1, recursive:false, logLevel: "Warn"})\n      ** Change logLevel for group 1 to Warn.\n      \n    change({group: "all", logLevel: "Debug", logFormat: "YearDayMonthTime", showTimestamp:false, showLoggerName:false})    \n      ** Change loglevel to Debug for all groups, apply format, do not show timestamp and logger names.      \n'},{"../log/LoggerOptions":34,"../log/standard/LoggerFactoryService":45,"../utils/DataStructures":48}],33:[function(e,t,o){"use strict";var n=e("../log/category/CategoryService"),r=e("../log/LoggerOptions"),i=e("../utils/MessageUtils"),s=function(){function e(){}return e.register=function(){if(!e.registered){e.registered=!0;var t=function(t){var o=t.data;null!==o&&e.processMessageFromExtension(o)};"undefined"!=typeof window&&(window.removeEventListener("message",t),window.addEventListener("message",t))}},e.processMessageFromExtension=function(t){if(e.registered)if("tsl-extension"===t.from){var o=t.data;switch(o.type){case"register":e.enableExtensionIntegration();break;case"request-change-loglevel":var n=o.value,r=e.applyLogLevel(n.categoryId,n.logLevel,n.recursive);r.length>0&&e.sendCategoriesRuntimeUpdateMessage(r);break;default:console.log("Unknown command to process message from extension, command was: "+o.type)}}else"tsl-logging"!==t.from&&console.log("Dropping unknown message: "+JSON.stringify(t))},e.sendCategoryLogMessage=function(t){if(e.registered){var o=t.getCategories().map(function(e){return e.id}),n={type:"log-message",value:{categories:o,errorAsStack:t.getErrorAsStack(),formattedMessage:i.MessageFormatUtils.renderDefaultMessage(t,!1),logLevel:r.LogLevel[t.getLevel()].toString(),message:t.getMessage(),resolvedErrorMessage:t.isResolvedErrorMessage()}},s={data:n,from:"tsl-logging"};e.sendMessage(s)}},e.sendCategoriesRuntimeUpdateMessage=function(t){if(e.registered){var o=n.CategoryServiceImpl.getInstance(),i={categories:Array()};t.forEach(function(e){var t=o.getCategorySettings(e);null!=t&&i.categories.push({id:e.id,logLevel:r.LogLevel[t.logLevel].toString()})});var s={type:"categories-rt-update",value:i},a={data:s,from:"tsl-logging"};e.sendMessage(a)}},e.sendRootCategoriesToExtension=function(){if(e.registered){var t=n.CategoryServiceImpl.getInstance().getRootCategories().map(function(t){return e.getCategoryAsJSON(t)}),o={type:"root-categories-tree",value:t},r={data:o,from:"tsl-logging"};e.sendMessage(r)}},e.getCategoryAsJSON=function(t){return{children:t.children.map(function(t){return e.getCategoryAsJSON(t)}),id:t.id,logLevel:r.LogLevel[t.logLevel].toString(),name:t.name,parentId:null!=t.parent?t.parent.id:null}},e.applyLogLevel=function(t,o,i){var s=[],a=n.CategoryServiceImpl.getInstance().getCategoryById(t);return null!=a?e._applyLogLevelRecursive(a,r.LogLevel.fromString(o),i,s):console.log("Could not change log level, failed to find category with id: "+t),s},e._applyLogLevelRecursive=function(t,o,r,i){var s=n.CategoryServiceImpl.getInstance().getCategorySettings(t);null!=s&&(s.logLevel=o,i.push(t),r&&t.children.forEach(function(t){e._applyLogLevelRecursive(t,o,r,i)}))},e.getAllCategories=function(){var e=[],t=function(e,o){o.push(e),e.children.forEach(function(e){t(e,o)})};return n.CategoryServiceImpl.getInstance().getRootCategories().forEach(function(o){t(o,e)}),e},e.sendMessage=function(t){e.registered&&"undefined"!=typeof window&&window.postMessage(t,"*")},e.enableExtensionIntegration=function(){if(e.registered){n.CategoryServiceImpl.getInstance().enableExtensionIntegration(),e.sendRootCategoriesToExtension();var t=e.getAllCategories();e.sendCategoriesRuntimeUpdateMessage(t)}},e}();s.registered=!1,o.ExtensionHelper=s},{"../log/LoggerOptions":34,"../log/category/CategoryService":41,"../utils/MessageUtils":50}],34:[function(e,t,o){"use strict";!function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warn=3]="Warn",e[e.Error=4]="Error",e[e.Fatal=5]="Fatal"}(o.LogLevel||(o.LogLevel={})),function(e){function t(t){if(null==t)throw new Error("Argument must be set");switch(t.toLowerCase()){case"trace":return e.Trace;case"debug":return e.Debug;case"info":return e.Info;case"warn":return e.Warn;case"error":return e.Error;case"fatal":return e.Fatal;default:throw new Error("Unsupported value for conversion: "+t)}}e.fromString=t}(o.LogLevel||(o.LogLevel={}));!function(e){e[e.Console=0]="Console",e[e.MessageBuffer=1]="MessageBuffer",e[e.Custom=2]="Custom"}(o.LoggerType||(o.LoggerType={}));var n;!function(e){e[e.Default=0]="Default",e[e.YearMonthDayTime=1]="YearMonthDayTime",e[e.YearDayMonthWithFullTime=2]="YearDayMonthWithFullTime",e[e.YearDayMonthTime=3]="YearDayMonthTime"}(n=o.DateFormatEnum||(o.DateFormatEnum={})),function(e){function t(t){if(null==t)throw new Error("Argument must be set");switch(t.toLowerCase()){case"default":return e.Default;case"yearmonthdayTime":return e.YearMonthDayTime;case"yeardaymonthwithfulltime":return e.YearDayMonthWithFullTime;case"yeardaymonthtime":return e.YearDayMonthTime;default:throw new Error("Unsupported value for conversion: "+t)}}e.fromString=t}(n=o.DateFormatEnum||(o.DateFormatEnum={}));var r=function(){function e(e,t){void 0===e&&(e=n.Default),void 0===t&&(t="-"),this._formatEnum=e,this._dateSeparator=t}return Object.defineProperty(e.prototype,"formatEnum",{get:function(){return this._formatEnum},set:function(e){this._formatEnum=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateSeparator",{get:function(){return this._dateSeparator},set:function(e){this._dateSeparator=e},enumerable:!0,configurable:!0}),e.prototype.copy=function(){return new e(this._formatEnum,this._dateSeparator)},e}();o.DateFormat=r;var i=function(){function e(e,t,o){void 0===e&&(e=new r),void 0===t&&(t=!0),void 0===o&&(o=!0),this._showTimeStamp=!0,this._showLoggerName=!0,this._dateFormat=e,this._showTimeStamp=t,this._showLoggerName=o}return Object.defineProperty(e.prototype,"dateFormat",{get:function(){return this._dateFormat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTimeStamp",{get:function(){return this._showTimeStamp},set:function(e){this._showTimeStamp=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showLoggerName",{get:function(){return this._showLoggerName},set:function(e){this._showLoggerName=e},enumerable:!0,configurable:!0}),e}();o.LogFormat=i;var s=function(){function e(e,t,o){void 0===e&&(e=new r),void 0===t&&(t=!0),void 0===o&&(o=!0),this._dateFormat=e,this._showTimeStamp=t,this._showCategoryName=o}return Object.defineProperty(e.prototype,"dateFormat",{get:function(){return this._dateFormat},set:function(e){this._dateFormat=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTimeStamp",{get:function(){return this._showTimeStamp},set:function(e){this._showTimeStamp=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showCategoryName",{get:function(){return this._showCategoryName},set:function(e){this._showCategoryName=e},enumerable:!0,configurable:!0}),e.prototype.copy=function(){return new e(this._dateFormat.copy(),this._showTimeStamp,this._showCategoryName)},e}();o.CategoryLogFormat=s},{}],35:[function(e,t,o){"use strict";var n=e("../../utils/DataStructures"),r=e("../../utils/MessageUtils"),i=e("../LoggerOptions"),s=function(){function e(e,t,o,n,r,i,s){this._resolvedErrorMessage=!1,this._errorAsStack=null,this._message=e,this._error=t,this._categories=o,this._date=n,this._level=r,this._logFormat=i,this._ready=s}return e.prototype.getMessage=function(){return this._message},e.prototype.getErrorAsStack=function(){return this._errorAsStack},e.prototype.setErrorAsStack=function(e){this._errorAsStack=e},e.prototype.getError=function(){return this._error},e.prototype.getCategories=function(){return this._categories},e.prototype.getDate=function(){return this._date},e.prototype.getLevel=function(){return this._level},e.prototype.getLogFormat=function(){return this._logFormat},e.prototype.isReady=function(){return this._ready},e.prototype.setReady=function(e){this._ready=e},Object.defineProperty(e.prototype,"resolvedErrorMessage",{get:function(){return this._resolvedErrorMessage},set:function(e){this._resolvedErrorMessage=e},enumerable:!0,configurable:!0}),e.prototype.isResolvedErrorMessage=function(){return this._resolvedErrorMessage},e}(),a=function(){function e(e,t){this.allMessages=new n.LinkedList,this.rootCategory=e,this.runtimeSettings=t}return e.prototype.trace=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];this._log.apply(this,[i.LogLevel.Trace,e,null,!1].concat(t))},e.prototype.debug=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];this._log.apply(this,[i.LogLevel.Debug,e,null,!1].concat(t))},e.prototype.info=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];this._log.apply(this,[i.LogLevel.Info,e,null,!1].concat(t))},e.prototype.warn=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];this._log.apply(this,[i.LogLevel.Warn,e,null,!1].concat(t))},e.prototype.error=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];this._log.apply(this,[i.LogLevel.Error,e,t,!1].concat(o))},e.prototype.fatal=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];this._log.apply(this,[i.LogLevel.Fatal,e,t,!1].concat(o))},e.prototype.resolved=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];this._log.apply(this,[i.LogLevel.Error,e,t,!0].concat(o))},e.prototype.log=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this._log.apply(this,[e,t,o,!1].concat(n))},e.prototype.tracec=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];this._logc.apply(this,[i.LogLevel.Trace,e,function(){return null},!1].concat(t))},e.prototype.debugc=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];this._logc.apply(this,[i.LogLevel.Debug,e,function(){return null},!1].concat(t))},e.prototype.infoc=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];this._logc.apply(this,[i.LogLevel.Info,e,function(){return null},!1].concat(t))},e.prototype.warnc=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];this._logc.apply(this,[i.LogLevel.Warn,e,function(){return null},!1].concat(t))},e.prototype.errorc=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];this._logc.apply(this,[i.LogLevel.Error,e,t,!1].concat(o))},e.prototype.fatalc=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];this._logc.apply(this,[i.LogLevel.Fatal,e,t,!1].concat(o))},e.prototype.resolvedc=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];this._logc.apply(this,[i.LogLevel.Error,e,t,!0].concat(o))},e.prototype.logc=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this._logc.apply(this,[e,t,o,!1].concat(n))},e.prototype.getRootCategory=function(){return this.rootCategory},e.prototype.createDefaultLogMessage=function(e){return r.MessageFormatUtils.renderDefaultMessage(e,!0)},e.prototype._log=function(e,t,o,n){void 0===o&&(o=null),void 0===n&&(n=!1);for(var r=[],i=4;i<arguments.length;i++)r[i-4]=arguments[i];this._logInternal.apply(this,[e,function(){return t},function(){return o},n].concat(r))},e.prototype._logc=function(e,t,o,n){void 0===n&&(n=!1);for(var r=[],i=4;i<arguments.length;i++)r[i-4]=arguments[i];this._logInternal.apply(this,[e,t,o,n].concat(r))},e.prototype._logInternal=function(e,t,o,n){for(var i=this,a=[],u=4;u<arguments.length;u++)a[u-4]=arguments[u];var l;void 0!==a&&a.length>0?l=a:(l=[],l.push(this.rootCategory));for(var c=this,h=0;h<l.length;h++){if("break"===function(a){var u=l[a];if(null==u)throw new Error("Cannot have a null element within categories, at index="+a);var h=c.runtimeSettings.getCategorySettings(u);if(null==h)throw new Error("Category with path: "+u.getCategoryPath()+" is not registered with this logger, maybe you registered it with a different root logger?");if(h.logLevel<=e){var p=null!=o?o():null;if(null==p){var f=new s(t(),p,l,new Date,e,h.logFormat,!0);f.resolvedErrorMessage=n,c.allMessages.addTail(f),c.processMessages()}else{var g=new s(t(),p,l,new Date,e,h.logFormat,!1);g.resolvedErrorMessage=n,c.allMessages.addTail(g),r.MessageFormatUtils.renderError(p).then(function(e){g.setErrorAsStack(e),g.setReady(!0),i.processMessages()})}return"break"}}(h))break}},e.prototype.processMessages=function(){var e=this.allMessages;if(e.getSize()>0)do{var t=e.getHead();if(null!=t){if(!t.isReady())break;e.removeHead(),this.doLog(t)}}while(e.getSize()>0)},e}();o.AbstractCategoryLogger=a},{"../../utils/DataStructures":48,"../../utils/MessageUtils":50,"../LoggerOptions":34}],36:[function(e,t,o){"use strict";var n=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},r=e("../LoggerOptions"),i=e("./AbstractCategoryLogger"),s=function(e){function t(t,o){return e.call(this,t,o)||this}return n(t,e),t.prototype.doLog=function(e){var t=this.createDefaultLogMessage(e);if(void 0===console)throw new Error("Console is not defined, cannot log msg: "+t);var o=!1;switch(e.getLevel()){case r.LogLevel.Trace:break;case r.LogLevel.Debug:console.debug&&(console.debug(t),o=!0);break;case r.LogLevel.Info:console.info&&(console.info(t),o=!0);break;case r.LogLevel.Warn:console.warn&&(console.warn(t),o=!0);break;case r.LogLevel.Error:case r.LogLevel.Fatal:console.error&&(console.error(t),o=!0);break;default:throw new Error("Unsupported level: "+e.getLevel())}o||console.log(t)},t}(i.AbstractCategoryLogger);o.CategoryConsoleLoggerImpl=s},{"../LoggerOptions":34,"./AbstractCategoryLogger":35}],37:[function(e,t,o){"use strict";var n=function(){function e(e){this._delegate=e}return Object.defineProperty(e.prototype,"delegate",{get:function(){return this._delegate},set:function(e){this._delegate=e},enumerable:!0,configurable:!0}),e.prototype.trace=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];(n=this._delegate).trace.apply(n,[e].concat(t));var n},e.prototype.debug=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];(n=this._delegate).debug.apply(n,[e].concat(t));var n},e.prototype.info=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];(n=this._delegate).info.apply(n,[e].concat(t));var n},e.prototype.warn=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];(n=this._delegate).warn.apply(n,[e].concat(t));var n},e.prototype.error=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];(r=this._delegate).error.apply(r,[e,t].concat(o));var r},e.prototype.fatal=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];(r=this._delegate).fatal.apply(r,[e,t].concat(o));var r},e.prototype.resolved=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];(r=this._delegate).resolved.apply(r,[e,t].concat(o));var r},e.prototype.log=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];(i=this._delegate).log.apply(i,[e,t,o].concat(n));var i},e.prototype.tracec=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];(n=this._delegate).tracec.apply(n,[e].concat(t));var n},e.prototype.debugc=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];(n=this._delegate).debugc.apply(n,[e].concat(t));var n},e.prototype.infoc=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];(n=this._delegate).infoc.apply(n,[e].concat(t));var n},e.prototype.warnc=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];(n=this._delegate).warnc.apply(n,[e].concat(t));var n},e.prototype.errorc=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];(r=this._delegate).errorc.apply(r,[e,t].concat(o));var r},e.prototype.fatalc=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];(r=this._delegate).fatalc.apply(r,[e,t].concat(o));var r},e.prototype.resolvedc=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];(r=this._delegate).resolvedc.apply(r,[e,t].concat(o));var r},e.prototype.logc=function(e,t,o){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];(i=this._delegate).logc.apply(i,[e,t,o].concat(n));var i},e}();o.CategoryDelegateLoggerImpl=n},{}],38:[function(e,t,o){"use strict";var n=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},r=e("../../extension/ExtensionHelper"),i=e("./AbstractCategoryLogger"),s=function(e){function t(t,o){return e.call(this,t,o)||this}return n(t,e),t.prototype.doLog=function(e){"undefined"!=typeof window?r.ExtensionHelper.sendCategoryLogMessage(e):console.log("window is not available, you must be running in a browser for this. Dropped message.")},t}(i.AbstractCategoryLogger);o.CategoryExtensionLoggerImpl=s},{"../../extension/ExtensionHelper":33,"./AbstractCategoryLogger":35}],39:[function(e,t,o){"use strict";var n=e("../LoggerOptions"),r=e("./CategoryService"),i=function(){function e(t,o){if(void 0===o&&(o=null),this._children=[],this._logLevel=n.LogLevel.Error,-1!==t.indexOf("#"))throw new Error("Cannot use # in a name of a Category");this._id=e.nextId(),this._name=t,this._parent=o,null!=this._parent&&this._parent._children.push(this),r.CategoryServiceImpl.getInstance().registerCategory(this)}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},enumerable:!0,configurable:!0}),e.prototype.getCategoryPath=function(){for(var e=this.name,t=this.parent;null!=t;)e=t.name+"#"+e,t=t.parent;return e},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),e.nextId=function(){return e.currentId++},e}();i.currentId=1,o.Category=i},{"../LoggerOptions":34,"./CategoryService":41}],40:[function(e,t,o){"use strict";var n=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},r=e("./AbstractCategoryLogger"),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.messages=[],t}return n(t,e),t.prototype.getMessages=function(){return this.messages},t.prototype.toString=function(){return this.messages.map(function(e){return e}).join("\n")},t.prototype.doLog=function(e){var t=this.createDefaultLogMessage(e);this.messages.push(t)},t}(r.AbstractCategoryLogger);o.CategoryMessageBufferLoggerImpl=i},{"./AbstractCategoryLogger":35}],41:[function(e,t,o){"use strict";var n=e("../../utils/DataStructures"),r=e("../LoggerOptions"),i=e("./CategoryConsoleLoggerImpl"),s=e("./CategoryDelegateLoggerImpl"),a=e("./CategoryExtensionLoggerImpl"),u=e("./CategoryMessageBufferImpl"),l=e("../../extension/ExtensionHelper"),c=function(){function e(e,t,o,n,i){void 0===t&&(t=r.LogLevel.Error),void 0===o&&(o=r.LoggerType.Console),void 0===n&&(n=new r.CategoryLogFormat),void 0===i&&(i=null),this._category=e,this._logLevel=t,this._loggerType=o,this._logFormat=n,this._callBackLogger=i}return Object.defineProperty(e.prototype,"category",{get:function(){return this._category},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loggerType",{get:function(){return this._loggerType},set:function(e){this._loggerType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logFormat",{get:function(){return this._logFormat},set:function(e){this._logFormat=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"callBackLogger",{get:function(){return this._callBackLogger},set:function(e){this._callBackLogger=e},enumerable:!0,configurable:!0}),e}();o.CategoryRuntimeSettings=c;var h=function(){function e(e,t,o,n){if(void 0===e&&(e=r.LogLevel.Error),void 0===t&&(t=r.LoggerType.Console),void 0===o&&(o=new r.CategoryLogFormat),void 0===n&&(n=null),this._logLevel=e,this._loggerType=t,this._logFormat=o,this._callBackLogger=n,this._loggerType===r.LoggerType.Custom&&null===this.callBackLogger)throw new Error("If you specify loggerType to be Custom, you must provide the callBackLogger argument")}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loggerType",{get:function(){return this._loggerType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logFormat",{get:function(){return this._logFormat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"callBackLogger",{get:function(){return this._callBackLogger},enumerable:!0,configurable:!0}),e.prototype.copy=function(){return new e(this.logLevel,this.loggerType,this.logFormat.copy(),this.callBackLogger)},e}();o.CategoryDefaultConfiguration=h;var p=function(){function e(){this._defaultConfig=new h,this._rootCategories=[],this._categoryRuntimeSettings=new n.SimpleMap,this._categoryOriginalRuntimeSettings=new n.SimpleMap,this._rootLoggers=new n.SimpleMap,l.ExtensionHelper.register()}return e.getInstance=function(){return null===e._INSTANCE&&(e._INSTANCE=new e),e._INSTANCE},e.prototype.getLogger=function(e){if(!this.rootCategoryExists(e))throw new Error("Given category "+e.name+" is not registered as a root category. You must use the root category to retrieve a logger.");var t=this._rootLoggers.get(e.name);if(null!=t)return t.y;var o=new s.CategoryDelegateLoggerImpl(this.createRootLogger(e));return this._rootLoggers.put(e.name,new n.TuplePair(e,o)),o},e.prototype.clear=function(){this._rootCategories=[],this._categoryRuntimeSettings.clear(),this._categoryOriginalRuntimeSettings.clear(),this._rootLoggers.clear(),this.setDefaultConfiguration(new h)},e.prototype.getCategorySettings=function(e){return this._categoryRuntimeSettings.get(e.getCategoryPath())},e.prototype.getOriginalCategorySettings=function(e){return this._categoryOriginalRuntimeSettings.get(e.getCategoryPath())},e.prototype.setDefaultConfiguration=function(e,t){var o=this;if(void 0===t&&(t=!1),this._defaultConfig=e,t){var r=new n.SimpleMap,i=new n.SimpleMap;this._categoryRuntimeSettings.keys().forEach(function(e){var t=o._categoryRuntimeSettings.get(e);if(null===t)throw new Error("No setting associated with key="+e);var n=o._defaultConfig.copy(),s=new c(t.category,n.logLevel,n.loggerType,n.logFormat,n.callBackLogger),a=o._defaultConfig.copy(),u=new c(t.category,a.logLevel,a.loggerType,a.logFormat,a.callBackLogger);r.put(e,s),i.put(e,u)}),this._categoryRuntimeSettings.clear(),this._categoryOriginalRuntimeSettings.clear(),this._categoryRuntimeSettings=r,this._categoryOriginalRuntimeSettings=i,this._rootLoggers.values().forEach(function(e){e.y.delegate=o.createRootLogger(e.x)})}},e.prototype.setConfigurationCategory=function(e,t,o,n){var r=this;void 0===o&&(o=!1),void 0===n&&(n=!1);var i=this.getCategorySettings(t);if(null===i)throw new Error("Given category is not registered: "+t.name);if(i.logLevel=e.logLevel,i.loggerType=e.loggerType,i.logFormat=e.logFormat,i.callBackLogger=e.callBackLogger,o&&t.children.forEach(function(t){r.setConfigurationCategory(e,t,o,n)}),n&&this.rootCategoryExists(t)){var s=this._rootLoggers.get(t.name);null!==s&&(s.y.delegate=this.createRootLogger(s.x))}},e.prototype.registerCategory=function(e){if(null==e||void 0===e)throw new Error("Category CANNOT be null");if(null==e.parent){for(var t=0,o=this._rootCategories;t<o.length;t++)if(o[t].name===e.name)throw new Error("Cannot add this rootCategory with name: "+e.name+", another root category is already registered with that name.");this._rootCategories.push(e)}this.initializeRuntimeSettingsForCategory(e)},e.prototype.enableExtensionIntegration=function(){var e=this;this._rootLoggers.values().forEach(function(t){t.y instanceof a.CategoryExtensionLoggerImpl||(console.log("Reconfiguring root logger for root category: "+t.x.name),t.y.delegate=new a.CategoryExtensionLoggerImpl(t.x,e))})},e.prototype.getRootCategories=function(){return this._rootCategories.slice(0)},e.prototype.getCategoryById=function(e){var t=this._categoryRuntimeSettings.values().filter(function(t){return t.category.id===e}).map(function(e){return e.category});return 1===t.length?t[0]:null},e.prototype.initializeRuntimeSettingsForCategory=function(e){var t=this._categoryRuntimeSettings.get(e.getCategoryPath());if(null!==t)throw new Error("Category with path: "+e.getCategoryPath()+" is already registered?");var o=this._defaultConfig.copy();t=new c(e,o.logLevel,o.loggerType,o.logFormat,o.callBackLogger);var n=this._defaultConfig.copy(),r=new c(e,n.logLevel,n.loggerType,n.logFormat,n.callBackLogger);this._categoryRuntimeSettings.put(e.getCategoryPath(),t),this._categoryOriginalRuntimeSettings.put(e.getCategoryPath(),r)},e.prototype.rootCategoryExists=function(e){if(null==e||void 0===e)throw new Error("Root category CANNOT be null");if(null!=e.parent)throw new Error("Parent must be null for a root category");return-1!==this._rootCategories.indexOf(e)},e.prototype.createRootLogger=function(e){switch(this._defaultConfig.loggerType){case r.LoggerType.Console:return new i.CategoryConsoleLoggerImpl(e,this);case r.LoggerType.MessageBuffer:return new u.CategoryMessageBufferLoggerImpl(e,this);case r.LoggerType.Custom:if(null==this._defaultConfig.callBackLogger)throw new Error("Cannot create custom logger, custom callback is null");return this._defaultConfig.callBackLogger(e,this);default:throw new Error("Cannot create a Logger for LoggerType: "+this._defaultConfig.loggerType)}},e}();p._INSTANCE=null,o.CategoryServiceImpl=p;var f=function(){function e(){}return e.getLogger=function(e){return p.getInstance().getLogger(e)},e.clear=function(){return p.getInstance().clear()},e.setDefaultConfiguration=function(e,t){void 0===t&&(t=!1),p.getInstance().setDefaultConfiguration(e,t)},e.setConfigurationCategory=function(e,t,o,n){void 0===o&&(o=!1),void 0===n&&(n=!1),p.getInstance().setConfigurationCategory(e,t,o,n)},e.getRuntimeSettings=function(){return p.getInstance()},e}();o.CategoryServiceFactory=f},{"../../extension/ExtensionHelper":33,"../../utils/DataStructures":48,"../LoggerOptions":34,"./CategoryConsoleLoggerImpl":36,"./CategoryDelegateLoggerImpl":37,"./CategoryExtensionLoggerImpl":38,"./CategoryMessageBufferImpl":40}],42:[function(e,t,o){"use strict";var n=e("../LoggerOptions"),r=e("../../utils/DataStructures"),i=e("../../utils/MessageUtils"),s=function(){function e(e,t,o,n,r,i,s,a){this._errorAsStack=null,this._error=null,this._loggerName=e,this._message=t,this._errorAsStack=o,this._error=n,this._logGroupRule=r,this._date=i,this._level=s,this._ready=a}return Object.defineProperty(e.prototype,"loggerName",{get:function(){return this._loggerName},enumerable:!0,configurable:!0}),
Object.defineProperty(e.prototype,"message",{get:function(){return this._message},set:function(e){this._message=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorAsStack",{get:function(){return this._errorAsStack},set:function(e){this._errorAsStack=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this._error},set:function(e){this._error=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logGroupRule",{get:function(){return this._logGroupRule},set:function(e){this._logGroupRule=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"date",{get:function(){return this._date},set:function(e){this._date=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},set:function(e){this._level=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){return this._ready},set:function(e){this._ready=e},enumerable:!0,configurable:!0}),e}(),a=function(){function e(e,t){this._allMessages=new r.LinkedList,this._open=!0,this._name=e,this._logGroupRuntimeSettings=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),e.prototype.trace=function(e,t){void 0===t&&(t=null),this._log(n.LogLevel.Trace,e,t)},e.prototype.debug=function(e,t){void 0===t&&(t=null),this._log(n.LogLevel.Debug,e,t)},e.prototype.info=function(e,t){void 0===t&&(t=null),this._log(n.LogLevel.Info,e,t)},e.prototype.warn=function(e,t){void 0===t&&(t=null),this._log(n.LogLevel.Warn,e,t)},e.prototype.error=function(e,t){void 0===t&&(t=null),this._log(n.LogLevel.Error,e,t)},e.prototype.fatal=function(e,t){void 0===t&&(t=null),this._log(n.LogLevel.Fatal,e,t)},e.prototype.tracec=function(e,t){this._logc(n.LogLevel.Trace,e,t)},e.prototype.debugc=function(e,t){this._logc(n.LogLevel.Debug,e,t)},e.prototype.infoc=function(e,t){this._logc(n.LogLevel.Info,e,t)},e.prototype.warnc=function(e,t){this._logc(n.LogLevel.Warn,e,t)},e.prototype.errorc=function(e,t){this._logc(n.LogLevel.Error,e,t)},e.prototype.fatalc=function(e,t){this._logc(n.LogLevel.Fatal,e,t)},e.prototype.isTraceEnabled=function(){return this._logGroupRuntimeSettings.level===n.LogLevel.Trace},e.prototype.isDebugEnabled=function(){return this._logGroupRuntimeSettings.level<=n.LogLevel.Debug},e.prototype.isInfoEnabled=function(){return this._logGroupRuntimeSettings.level<=n.LogLevel.Info},e.prototype.isWarnEnabled=function(){return this._logGroupRuntimeSettings.level<=n.LogLevel.Warn},e.prototype.isErrorEnabled=function(){return this._logGroupRuntimeSettings.level<=n.LogLevel.Error},e.prototype.isFatalEnabled=function(){return this._logGroupRuntimeSettings.level<=n.LogLevel.Fatal},e.prototype.getLogLevel=function(){return this._logGroupRuntimeSettings.level},e.prototype.isOpen=function(){return this._open},e.prototype.close=function(){this._open=!1,this._allMessages.clear()},e.prototype.createDefaultLogMessage=function(e){return i.MessageFormatUtils.renderDefaultLog4jMessage(e,!0)},e.prototype._log=function(e,t,o){void 0===o&&(o=null),this._open&&this._logGroupRuntimeSettings.level<=e&&(this._allMessages.addTail(this.createMessage(e,t,new Date,o)),this.processMessages())},e.prototype._logc=function(e,t,o){this._open&&this._logGroupRuntimeSettings.level<=e&&(this._allMessages.addTail(this.createMessage(e,t(),new Date,void 0!==o&&null!==o?o():null)),this.processMessages())},e.prototype.createMessage=function(e,t,o,n){var r=this;if(void 0===n&&(n=null),null!==n){var a=new s(this._name,t,null,n,this._logGroupRuntimeSettings.logGroupRule,o,e,!1);return i.MessageFormatUtils.renderError(n).then(function(e){a.errorAsStack=e,a.ready=!0,r.processMessages()}),a}return new s(this._name,t,null,n,this._logGroupRuntimeSettings.logGroupRule,o,e,!0)},e.prototype.processMessages=function(){var e=this._allMessages;if(e.getSize()>0)do{var t=e.getHead();if(null!=t){if(!t.ready)break;e.removeHead(),null!==t.message&&this.doLog(t)}}while(e.getSize()>0)},e}();o.AbstractLogger=a},{"../../utils/DataStructures":48,"../../utils/MessageUtils":50,"../LoggerOptions":34}],43:[function(e,t,o){"use strict";var n=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},r=e("./AbstractLogger"),i=e("../LoggerOptions"),s=function(e){function t(t,o){return e.call(this,t,o)||this}return n(t,e),t.prototype.doLog=function(e){if(void 0===console)throw new Error("Console is not defined, cannot log msg: "+e.message);var t=!1,o=e.level,n=this.createDefaultLogMessage(e);switch(o){case i.LogLevel.Trace:break;case i.LogLevel.Debug:console.debug&&(console.debug(n),t=!0);break;case i.LogLevel.Info:console.info&&(console.info(n),t=!0);break;case i.LogLevel.Warn:console.warn&&(console.warn(n),t=!0);break;case i.LogLevel.Error:case i.LogLevel.Fatal:console.error&&(console.error(n),t=!0);break;default:throw new Error("Log level not supported: "+o)}t||console.log(n)},t}(r.AbstractLogger);o.ConsoleLoggerImpl=s},{"../LoggerOptions":34,"./AbstractLogger":42}],44:[function(e,t,o){"use strict";var n=e("../../utils/DataStructures"),r=e("../LoggerOptions"),i=e("./LoggerFactoryService"),s=e("./ConsoleLoggerImpl"),a=e("./MessageBufferLoggerImpl"),u=e("./AbstractLogger"),l=function(){function e(e,t){this._loggers=new n.SimpleMap,this._logGroupRuntimeSettingsIndexed=[],this._loggerToLogGroupSettings=new n.SimpleMap,this._name=e,this.configure(t)}return e.prototype.configure=function(e){this._options=e,this.closeLoggers(),this._loggerToLogGroupSettings.clear(),this._logGroupRuntimeSettingsIndexed=[];for(var t=this._options.logGroupRules,o=0;o<t.length;o++)this._logGroupRuntimeSettingsIndexed.push(new i.LogGroupRuntimeSettings(t[o]))},e.prototype.getLogger=function(e){if(!this._options.enabled)throw new Error("LoggerFactory is not enabled, please check your options passed in");var t=this._loggers.get(e);return null!==t?t:(t=this.loadLogger(e),this._loggers.put(e,t),t)},e.prototype.isEnabled=function(){return this._options.enabled},e.prototype.closeLoggers=function(){this._loggers.forEach(function(e){null!=e&&e instanceof u.AbstractLogger&&e.close()}),this._loggers.clear()},e.prototype.getName=function(){return this._name},e.prototype.getLogGroupRuntimeSettingsByIndex=function(e){return e>=0&&e<this._logGroupRuntimeSettingsIndexed.length?this._logGroupRuntimeSettingsIndexed[e]:null},e.prototype.getLogGroupRuntimeSettingsByLoggerName=function(e){return this._loggerToLogGroupSettings.get(e)},e.prototype.getLogGroupRuntimeSettings=function(){return this._logGroupRuntimeSettingsIndexed.slice(0)},e.prototype.loadLogger=function(e){for(var t=this._options.logGroupRules,o=0;o<t.length;o++){var n=t[o];if(n.regExp.test(e)){var i=this._logGroupRuntimeSettingsIndexed[o],u=void 0;switch(n.loggerType){case r.LoggerType.Console:u=new s.ConsoleLoggerImpl(e,i);break;case r.LoggerType.MessageBuffer:u=new a.MessageBufferLoggerImpl(e,i);break;case r.LoggerType.Custom:if(null==n.callBackLogger)throw new Error("Cannot create a custom logger, custom callback is null");u=n.callBackLogger(e,i);break;default:throw new Error("Cannot create a Logger for LoggerType: "+n.loggerType)}return this._loggerToLogGroupSettings.put(e,i),u}}throw new Error("Failed to find a match to create a Logger for: "+e)},e}();o.LoggerFactoryImpl=l},{"../../utils/DataStructures":48,"../LoggerOptions":34,"./AbstractLogger":42,"./ConsoleLoggerImpl":43,"./LoggerFactoryService":45,"./MessageBufferLoggerImpl":46}],45:[function(e,t,o){"use strict";var n=e("../../utils/DataStructures"),r=e("../LoggerOptions"),i=e("./LoggerFactoryImpl"),s=e("../../extension/ExtensionHelper"),a=function(){function e(e,t,o,n,i){void 0===o&&(o=new r.LogFormat),void 0===n&&(n=r.LoggerType.Console),void 0===i&&(i=null),this._regExp=e,this._level=t,this._logFormat=o,this._loggerType=n,this._callBackLogger=i}return Object.defineProperty(e.prototype,"regExp",{get:function(){return this._regExp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loggerType",{get:function(){return this._loggerType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logFormat",{get:function(){return this._logFormat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"callBackLogger",{get:function(){return this._callBackLogger},enumerable:!0,configurable:!0}),e}();o.LogGroupRule=a;var u=function(){function e(){this._logGroupRules=[],this._enabled=!0}return e.prototype.addLogGroupRule=function(e){return this._logGroupRules.push(e),this},e.prototype.setEnabled=function(e){return this._enabled=e,this},Object.defineProperty(e.prototype,"logGroupRules",{get:function(){return this._logGroupRules},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},enumerable:!0,configurable:!0}),e}();o.LoggerFactoryOptions=u;var l=function(){function e(e){this._logGroupRule=e,this._level=e.level,this._loggerType=e.loggerType,this._logFormat=new r.LogFormat(new r.DateFormat(e.logFormat.dateFormat.formatEnum,e.logFormat.dateFormat.dateSeparator),e.logFormat.showTimeStamp,e.logFormat.showLoggerName),this._callBackLogger=e.callBackLogger}return Object.defineProperty(e.prototype,"logGroupRule",{get:function(){return this._logGroupRule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},set:function(e){this._level=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loggerType",{get:function(){return this._loggerType},set:function(e){this._loggerType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logFormat",{get:function(){return this._logFormat},set:function(e){this._logFormat=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"callBackLogger",{get:function(){return this._callBackLogger},set:function(e){this._callBackLogger=e},enumerable:!0,configurable:!0}),e}();o.LogGroupRuntimeSettings=l;var c=function(){function e(){this._nameCounter=1,this._mapFactories=new n.SimpleMap,s.ExtensionHelper.register()}return e.getInstance=function(){return null===e._INSTANCE&&(e._INSTANCE=new e),e._INSTANCE},e.prototype.createLoggerFactory=function(e){void 0===e&&(e=null);var t="LoggerFactory"+this._nameCounter++;return this.createNamedLoggerFactory(t,e)},e.prototype.createNamedLoggerFactory=function(t,o){if(void 0===o&&(o=null),this._mapFactories.exists(t))throw new Error("LoggerFactory with name "+t+" already exists.");var n;return n=null!==o?new i.LoggerFactoryImpl(t,o):new i.LoggerFactoryImpl(t,e.createDefaultOptions()),this._mapFactories.put(t,n),n},e.prototype.closeLoggers=function(){this._mapFactories.values().forEach(function(e){e.closeLoggers()}),this._mapFactories.clear(),this._nameCounter=1},e.prototype.getRuntimeSettingsForLoggerFactories=function(){var e=[];return this._mapFactories.forEach(function(t){null!=t&&e.push(t)}),e},e.prototype.getLogGroupSettings=function(e,t){var o=this._mapFactories.get(e);return null===o?null:o.getLogGroupRuntimeSettingsByIndex(t)},e.prototype.getLoggerFactoryRuntimeSettingsByName=function(e){return this._mapFactories.get(e)},e.createDefaultOptions=function(){return(new u).addLogGroupRule(new a(new RegExp(".+"),r.LogLevel.Info))},e}();c._INSTANCE=null;var h=function(){function e(){}return e.createLoggerFactory=function(t){return void 0===t&&(t=null),e.INSTANCE_SERVICE.createLoggerFactory(t)},e.createNamedLoggerFactory=function(t,o){return void 0===o&&(o=null),e.INSTANCE_SERVICE.createNamedLoggerFactory(t,o)},e.closeLoggers=function(){return e.INSTANCE_SERVICE.closeLoggers()},e.getRuntimeSettings=function(){return e.INSTANCE_SERVICE},e}();h.INSTANCE_SERVICE=c.getInstance(),o.LFService=h},{"../../extension/ExtensionHelper":33,"../../utils/DataStructures":48,"../LoggerOptions":34,"./LoggerFactoryImpl":44}],46:[function(e,t,o){"use strict";var n=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},r=e("./AbstractLogger"),i=function(e){function t(t,o){var n=e.call(this,t,o)||this;return n.messages=[],n}return n(t,e),t.prototype.close=function(){this.messages=[],e.prototype.close.call(this)},t.prototype.getMessages=function(){return this.messages},t.prototype.toString=function(){return this.messages.map(function(e){return e}).join("\n")},t.prototype.doLog=function(e){this.messages.push(this.createDefaultLogMessage(e))},t}(r.AbstractLogger);o.MessageBufferLoggerImpl=i},{"./AbstractLogger":42}],47:[function(e,t,o){"use strict";function n(){console.log("help()\n   ** Shows this help\n   \n getLogControl(): LoggerControl\n   ** Returns LoggerControl Object, use to dynamically change loglevels for log4j logging.\n   ** Call .help() on LoggerControl object for available options.\n   \n getCategoryControl(): CategoryServiceControl\n   ** Returns CategoryServiceControl Object, use to dynamically change loglevels for category logging.\n   ** Call .help() on CategoryServiceControl object for available options.   \n")}function r(){return new s.LoggerControlImpl}function i(){return new a.CategoryServiceControlImpl}var s=e("./control/LogGroupControl"),a=e("./control/CategoryServiceControl"),u=e("./extension/ExtensionHelper");o.ExtensionHelper=u.ExtensionHelper;var l=e("./log/category/AbstractCategoryLogger");o.AbstractCategoryLogger=l.AbstractCategoryLogger;var c=e("./log/category/CategoryConsoleLoggerImpl");o.CategoryConsoleLoggerImpl=c.CategoryConsoleLoggerImpl;var h=e("./log/category/CategoryDelegateLoggerImpl");o.CategoryDelegateLoggerImpl=h.CategoryDelegateLoggerImpl;var p=e("./log/category/CategoryLogger");o.Category=p.Category;var f=e("./log/category/CategoryMessageBufferImpl");o.CategoryMessageBufferLoggerImpl=f.CategoryMessageBufferLoggerImpl;var g=e("./log/category/CategoryService");o.CategoryDefaultConfiguration=g.CategoryDefaultConfiguration,o.CategoryRuntimeSettings=g.CategoryRuntimeSettings,o.CategoryServiceFactory=g.CategoryServiceFactory;var d=e("./log/standard/LoggerFactoryService");o.LoggerFactoryOptions=d.LoggerFactoryOptions,o.LFService=d.LFService,o.LogGroupRule=d.LogGroupRule;var y=e("./log/standard/AbstractLogger");o.AbstractLogger=y.AbstractLogger;var v=e("./log/standard/ConsoleLoggerImpl");o.ConsoleLoggerImpl=v.ConsoleLoggerImpl;var m=e("./log/standard/MessageBufferLoggerImpl");o.MessageBufferLoggerImpl=m.MessageBufferLoggerImpl;var _=e("./log/LoggerOptions");o.CategoryLogFormat=_.CategoryLogFormat,o.DateFormat=_.DateFormat,o.DateFormatEnum=_.DateFormatEnum,o.LogFormat=_.LogFormat,o.LoggerType=_.LoggerType,o.LogLevel=_.LogLevel;var b=e("./utils/DataStructures");o.SimpleMap=b.SimpleMap,o.LinkedList=b.LinkedList,function(e){for(var t in e)o.hasOwnProperty(t)||(o[t]=e[t])}(e("./utils/JSONHelper"));var I=e("./utils/MessageUtils");o.MessageFormatUtils=I.MessageFormatUtils,o.help=n,o.getLogControl=r,o.getCategoryControl=i},{"./control/CategoryServiceControl":31,"./control/LogGroupControl":32,"./extension/ExtensionHelper":33,"./log/LoggerOptions":34,"./log/category/AbstractCategoryLogger":35,"./log/category/CategoryConsoleLoggerImpl":36,"./log/category/CategoryDelegateLoggerImpl":37,"./log/category/CategoryLogger":39,"./log/category/CategoryMessageBufferImpl":40,"./log/category/CategoryService":41,"./log/standard/AbstractLogger":42,"./log/standard/ConsoleLoggerImpl":43,"./log/standard/LoggerFactoryService":45,"./log/standard/MessageBufferLoggerImpl":46,"./utils/DataStructures":48,"./utils/JSONHelper":49,"./utils/MessageUtils":50}],48:[function(e,t,o){"use strict";var n=function(){function e(e){this._previous=null,this._next=null,this._value=e}return Object.defineProperty(e.prototype,"previous",{get:function(){return this._previous},set:function(e){this._previous=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"next",{get:function(){return this._next},set:function(e){this._next=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),e}(),r=function(){function e(){this.head=null,this.size=0}return e.prototype.addHead=function(e){if(!this.createHeadIfNeeded(e)){if(null==this.head)throw new Error("This should never happen, list implementation broken");var t=this.head.next,o=new n(e);null!=t&&(t.previous=o,o.next=t),this.head=o}this.size++},e.prototype.addTail=function(e){if(!this.createHeadIfNeeded(e)){var t=this.getTailNode();if(null==t)throw new Error("List implementation broken");var o=new n(e);t.next=o,o.previous=t}this.size++},e.prototype.clear=function(){this.head=null,this.size=0},e.prototype.getHead=function(){return null!=this.head?this.head.value:null},e.prototype.removeHead=function(){if(null!=this.head){var e=this.head,t=e.value;return this.head=e.next,this.size--,t}return null},e.prototype.getTail=function(){var e=this.getTailNode();return null!=e?e.value:null},e.prototype.removeTail=function(){var e=this.getTailNode();if(null!=e){if(e===this.head)this.head=null;else{var t=e.previous;if(null==t)throw new Error("List implementation is broken");t.next=null}return this.size--,e.value}return null},e.prototype.getSize=function(){return this.size},e.prototype.filter=function(e){var t=function(e,o,n){e(o.value)&&n.push(o.value);var r=o.next;null!=r&&t(e,r,n)},o=[],n=this.head;return null!=n&&t(e,n,o),o},e.prototype.createHeadIfNeeded=function(e){return null==this.head&&(this.head=new n(e),!0)},e.prototype.getTailNode=function(){if(null==this.head)return null;for(var e=this.head;null!=e.next;)e=e.next;return e},e}();o.LinkedList=r;var i=function(){function e(){this.array={}}return e.prototype.put=function(e,t){if(void 0===t)throw new Error("Undefined value is not allowed, null is.");this.array[e]=t},e.prototype.get=function(e){var t=this.array[e];return void 0!==t?t:null},e.prototype.exists=function(e){return void 0!==this.array[e]},e.prototype.remove=function(e){var t=this.array[e];return void 0!==t&&delete this.array[e],t},e.prototype.keys=function(){var e=[];for(var t in this.array)this.array.hasOwnProperty(t)&&e.push(t);return e},e.prototype.values=function(){var e=[];for(var t in this.array)this.array.hasOwnProperty(t)&&e.push(this.get(t));return e},e.prototype.size=function(){return this.keys().length},e.prototype.isEmpty=function(){return 0===this.size()},e.prototype.clear=function(){this.array={}},e.prototype.forEach=function(e){for(var t in this.array)if(this.array.hasOwnProperty(t)){var o=this.array[t];e(o,t,this)}},e}();o.SimpleMap=i;var s=function(){function e(e,t){this._x=e,this._y=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e},enumerable:!0,configurable:!0}),e}();o.TuplePair=s;var a=function(){function e(){this.data=[]}return e.prototype.append=function(e){if(void 0===e||null==e)throw new Error("String must be set, cannot append null or undefined");return this.data.push(e),this},e.prototype.appendLine=function(e){return this.data.push(e+"\n"),this},e.prototype.isEmpty=function(){return 0===this.data.length},e.prototype.clear=function(){this.data=[]},e.prototype.toString=function(e){return void 0===e&&(e=""),this.data.join(e)},e}();o.StringBuilder=a},{}],49:[function(e,t,o){"use strict";var n=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},r=e("../log/LoggerOptions"),i=e("./DataStructures"),s=function(){function e(e){this._value=e}return e.prototype.getValue=function(){return this._value},e.prototype.toString=function(){var e=this.getValue();return null!=e?e.toString():"null"},e}(),a=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t}(s),u=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t}(s),l=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t.prototype.toString=function(){var e=this.getValue();return null!=e?JSON.stringify(e.toString()):"null"},t}(s),c=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t}(s),h=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t.prototype.toString=function(){var e=this.getValue();return null!=e?e.toString():"null"},t}(s),p=function(e){function t(){return e.call(this,null)||this}return n(t,e),t.prototype.toString=function(){return"null"},t}(s),f=function(){function e(){}return e.toJSONType=function(e){if(null===e)return new p;if("string"==typeof e)return new l(e);if("number"==typeof e)return new u(e);if("boolean"==typeof e)return new a(e);if(e instanceof g)return new c(e);throw new Error("Type not supported for value: "+e)},e}(),g=function(){function e(){this.values=new i.SimpleMap}return e.prototype.addBoolean=function(t,o){return this.checkName(t),e.checkValue(o),this.values.put(t,new a(o)),this},e.prototype.addNumber=function(t,o){return this.checkName(t),e.checkValue(o),this.values.put(t,new u(o)),this},e.prototype.addString=function(t,o){return this.checkName(t),e.checkValue(o),this.values.put(t,new l(o)),this},e.prototype.addNull=function(e){return this.checkName(e),this.values.put(e,new p),this},e.prototype.addArray=function(t,o){if(this.checkName(t),e.checkValue(o),null==o)throw new Error("Cannot add array as null");return this.values.put(t,new h(o)),this},e.prototype.addObject=function(t,o){if(this.checkName(t),e.checkValue(o),null==o)throw new Error("Cannot add object as null");return this.values.put(t,new c(o)),this},e.prototype.toString=function(e){var t=this;void 0===e&&(e=!1);var o=!1,n=new i.StringBuilder;return n.append("{"),this.values.keys().forEach(function(e){var r=t.values.get(e);null!=r&&(o&&n.append(","),n.append('"').append(e).append('":').append(r.toString()),o=!0)}),n.append("}"),n.toString()},e.prototype.checkName=function(e){if(null==e||void 0===e)throw new Error("Name is null or undefined");if(this.values.exists(e))throw new Error("Name "+e+" is already present for this object")},e.checkValue=function(e){if(void 0===e)throw new Error("Value is undefined")},e}();o.JSONObject=g;var d=function(){function e(){this.objects=[]}return e.prototype.add=function(e){if(void 0===e)throw new Error("Object is not allowed to be undefined");return this.objects.push(f.toJSONType(e)),this},e.prototype.toString=function(e){void 0===e&&(e=!1);var t=new i.StringBuilder;return t.append("["),this.objects.forEach(function(e,o){o>0&&t.append(","),t.append(e.toString())}),t.append("]"),t.toString()},e}();o.JSONArray=d;var y=function(){function e(){}return e.categoryToJSON=function(t,o){var n=new d;e._categoryToJSON(t,n,o);var r=new g;return r.addArray("categories",n),r},e._categoryToJSON=function(t,o,n){var i=new g;i.addNumber("id",t.id),i.addString("name",t.name),i.addString("logLevel",r.LogLevel[t.logLevel].toString()),null!=t.parent?i.addNumber("parent",t.parent.id):i.addNull("parent"),o.add(i),n&&t.children.forEach(function(t){e._categoryToJSON(t,o,n)})},e}();o.JSONHelper=y},{"../log/LoggerOptions":34,"./DataStructures":48}],50:[function(e,t,o){"use strict";var n=e("stacktrace-js"),r=e("../log/LoggerOptions"),i=function(){function e(){}return e.renderDate=function(e,t){var o=function(e,t,o){var n=t-e.length;if(n>0){for(var r="",i=0;i<n;i++)r+=o;return r+=e}return e},n=function(e){return o(e.getFullYear().toString(),4,"0")},i=function(e){return o((e.getMonth()+1).toString(),2,"0")},s=function(e){return o(e.getDate().toString(),2,"0")},a=function(e){return o(e.getHours().toString(),2,"0")},u=function(e){return o(e.getMinutes().toString(),2,"0")},l=function(e){return o(e.getSeconds().toString(),2,"0")},c=function(e){return o(e.getMilliseconds().toString(),3,"0")},h=t.dateSeparator,p="";switch(t.formatEnum){case r.DateFormatEnum.Default:p=n(e)+h+i(e)+h+s(e)+" "+a(e)+":"+u(e)+":"+l(e)+","+c(e);break;case r.DateFormatEnum.YearMonthDayTime:p=n(e)+h+i(e)+h+s(e)+" "+a(e)+":"+u(e)+":"+l(e);break;case r.DateFormatEnum.YearDayMonthWithFullTime:p=n(e)+h+s(e)+h+i(e)+" "+a(e)+":"+u(e)+":"+l(e)+","+c(e);break;case r.DateFormatEnum.YearDayMonthTime:p=n(e)+h+s(e)+h+i(e)+" "+a(e)+":"+u(e)+":"+l(e);break;default:throw new Error("Unsupported date format enum: "+t.formatEnum)}return p},e.renderDefaultMessage=function(t,o){var n="",i=t.getLogFormat();return i.showTimeStamp&&(n+=e.renderDate(t.getDate(),i.dateFormat)+" "),n+=r.LogLevel[t.getLevel()].toUpperCase(),t.isResolvedErrorMessage()&&(n+=" (resolved)"),n+=" ",i.showCategoryName&&(n+="[",t.getCategories().forEach(function(e,t){t>0&&(n+=", "),n+=e.name}),n+="]"),n+=" "+t.getMessage(),o&&null!==t.getErrorAsStack()&&(n+="\n"+t.getErrorAsStack()),n},e.renderDefaultLog4jMessage=function(t,o){var n=t.logGroupRule.logFormat,i="";return n.showTimeStamp&&(i+=e.renderDate(t.date,n.dateFormat)+" "),i+=r.LogLevel[t.level].toUpperCase()+" ",n.showLoggerName&&(i+="["+t.loggerName+"]"),i+=" "+t.message,o&&null!==t.errorAsStack&&(i+="\n"+t.errorAsStack),i},e.renderError=function(e){var t=e.name+": "+e.message+"\n@";return new Promise(function(o){n.fromError(e,{offline:!0}).then(function(e){var n=e.map(function(e){return e.toString()}).join("\n  ");t+="\n"+n,o(t)})})},e}();o.MessageFormatUtils=i},{"../log/LoggerOptions":34,"stacktrace-js":14}],51:[function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("../logging/ConfigLog4j"),i=e("./Player"),s=(r.factory.getLogger("model.PlayerAI"),function(e){function t(t,o,n,r,i,s,a,u){var l=e.call(this,t,o,n,r,i,s,u)||this;return l.ruleEnforcer=null,l.isAI=!0,l.ruleEnforcer=a,l.signal.add(l.aiRollDice,l,0,"aiRollDice"),l.signal.add(l.playAIPlayerMovement,l,0,"aiPlayerMovement"),l}return n(t,e),t.prototype.playAIPlayerMovement=function(e,t,o){var n=this;if("aiPlayerMovement"===e&&this.playerId===t){var r=o.getConcatenatedPossibleMoves(),i=r.length,s=0;i>0&&(s=Math.floor(Math.random()*i+1)-1);var a=r[s],u=this.getPieceByUniqueId(a.pieceId);setTimeout(function(){n.ruleEnforcer.generateAIPieceMovement(u,a)},1e3)}},t.prototype.aiRollDice=function(e,t,o){var n=this;"aiRollDice"===e&&this.playerId===o&&setTimeout(function(){n.roll(t,6,5)},1e3)},t}(i.Player));o.AIPlayer=s},{"../logging/ConfigLog4j":69,"./Player":64}],52:[function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("../logging/ConfigLog4j"),i=e("./Board"),s=(r.factory.getLogger("model.ActiveBoard"),function(e){function t(t){return e.call(this,t)||this}return n(t,e),t.prototype.addPieceToActiveBoard=function(e){this.board.setValue(e.uniqueId,e.index)},t.prototype.removePieceFromActiveBoard=function(e){this.board.remove(e.uniqueId)},t.prototype.movement=function(e,t){"startmovement"===e&&t.isActive()&&(this.board.setValue(t.uniqueId,t.index),this.signal.dispatch("rom",t)),"backToHome"===e&&this.board.remove(t.uniqueId),"onwayout"===e&&this.board.remove(t.uniqueId)},t.prototype.containsInActiveBoard=function(e){return this.board.containsKey(e.uniqueId)},t}(i.Board));o.ActiveBoard=s},{"../logging/ConfigLog4j":69,"./Board":53}],53:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=e("typescript-collections"),r=e("../logging/ConfigLog4j"),i=(r.factory.getLogger("model.Board"),function(){function e(e){this.signal=e,this.board=new n.Dictionary,this.signal.add(this.movement,this,0,"startmovement")}return e}());o.Board=i},{"../logging/ConfigLog4j":69,"typescript-collections":29}],54:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Die"),r=e("../logging/ConfigLog4j"),i=(r.factory.getLogger("model.Dice"),function(){function e(e,t,o,r,i){this.previousDoubleSix=!1,this.dieOne=new n.Die(e,330,390,t,r,o),this.dieTwo=new n.Die(e,390,330,t,i,o),this.signal=o}return e.prototype.roll=function(e,t,o){this.dieOne.roll(e,t),this.dieTwo.roll(e,o)},e.prototype.getHigherDieValue=function(){return this.dieOne.getValue()>this.dieTwo.getValue()?this.dieOne.uniqueId:this.dieTwo.uniqueId},e.prototype.setDicePlayerId=function(e){this.dieOne.setPlayerId(e),this.dieTwo.setPlayerId(e)},e.prototype.getDieUniqueIdByValue=function(e){return this.dieOne.getValue()===e?this.dieOne.uniqueId:this.dieTwo.getValue()===e?this.dieTwo.uniqueId:null},e.prototype.getDieValueArrayByUniqueId=function(e){for(var t=[],o=e.split("#"),n=0,r=o;n<r.length;n++){var i=r[n];if(i===this.dieOne.uniqueId){t.push(this.dieOne.getValue());break}}for(var s=0,a=o;s<a.length;s++){var i=a[s];if(i===this.dieTwo.uniqueId){t.push(this.dieTwo.getValue());break}}return t},e.prototype.getSelectedDiceUniqueIds=function(){var e=[];return this.dieOne.isSelected()&&e.push(this.dieOne.uniqueId),this.dieTwo.isSelected()&&e.push(this.dieTwo.uniqueId),e},e.prototype.consumeDieValueSix=function(e){for(var t=e.split("#"),o=0,n=t;o<n.length;o++){var r=n[o];if(r===this.dieOne.uniqueId&&this.dieOne.equalsValueSix()){this.dieOne.consume();break}if(r===this.dieTwo.uniqueId&&this.dieTwo.equalsValueSix()){this.dieTwo.consume();break}}},e.prototype.consumeDieValueById=function(e){for(var t=e.split("#"),o=0,n=t;o<n.length;o++){var r=n[o];r===this.dieOne.uniqueId&&this.dieOne.consume(),r===this.dieTwo.uniqueId&&this.dieTwo.consume()}},e.prototype.consumeDice=function(){this.dieOne.consume(),this.dieTwo.consume()},e.prototype.isDieOneConsumed=function(){return this.dieOne.isConsumed()},e.prototype.isDieTwoConsumed=function(){return this.dieTwo.isConsumed()},e.prototype.bothDiceConsumed=function(){return this.dieOne.isConsumed()&&this.dieTwo.isConsumed()},e.prototype.rolledAtLeastOneSix=function(){return 6===this.dieOne.getValue()||6===this.dieTwo.getValue()},e.prototype.rolledDoubleSix=function(){return 6===this.dieOne.getValue()&&6===this.dieTwo.getValue()},e.prototype.bothDiceHasLegitValues=function(){return this.dieOne.getValue()>0&&this.dieTwo.getValue()>0},e}());o.Dice=i},{"../logging/ConfigLog4j":69,"./Die":55}],55:[function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("../logging/ConfigLog4j"),i=r.factory.getLogger("model.Die"),s=function(e){function t(t,o,n,r,i,s){var a=e.call(this,t,o,n,r)||this;a.pixels=[],a.diceArr=[5,1,6,2,0,4],a.extFrame=null,a.removeLater=!0,a.uniqueId=i,a.signal=s,a.playerId=null,a.group=a.game.add.group(),a.group.add(a),a.frame=1,a.anchor.setTo(.5,.5),a.inputEnabled=!0;for(var u=0;u<15;u++)a.pixels[u]=a.game.rnd.pick([0,1,2,4,5,6]);return a.animation=a.animations.add("roll",a.pixels),a.animation.onComplete.add(a.rollComplete,a),a.events.onInputDown.add(a.selectActiveDie,a),a}return n(t,e),t.prototype.selectActiveDie=function(){.5===this.alpha?this.alpha=1:this.alpha=.5},t.prototype.unSelectActiveDie=function(){this.alpha=1},t.prototype.isSelected=function(){
return!this.isConsumed()&&.5===this.alpha},t.prototype.rollComplete=function(){var e=Math.floor(6*Math.random());this.frame=this.diceArr[e],null!==this.extFrame&&(this.frame=this.extFrame,this.extFrame=null),this.signal.dispatch("endOfDieRoll")},t.prototype.roll=function(e,t){this.playerId===e?(this.resetDice(),this.animation.play(20)):i.debug("Dice PlayerId "+this.playerId+" does not match playerId: "+e),this.removeLater&&void 0!==t&&(this.extFrame=this.getFrame(t),this.removeLater=!1)},t.prototype.consume=function(){this.frame=3,this.unSelectActiveDie()},t.prototype.resetDice=function(){this.alpha=1},t.prototype.isConsumed=function(){return 3===this.frame},t.prototype.isSpent=function(){return 0===this.getValue()},t.prototype.setPlayerId=function(e){this.playerId=e},t.prototype.getPlayerId=function(){return this.playerId},t.prototype.equalsValueSix=function(){return 6===this.getValue()},t.prototype.getFrame=function(e){switch(e){case 1:return 1;case 2:return 2;case 3:return 5;case 4:return 6;case 5:return 4;case 6:return 0;default:return 8}},t.prototype.getValue=function(){switch(this.frame){case 0:return 6;case 1:return 1;case 2:return 2;case 4:return 5;case 5:return 3;case 6:return 4;default:return 0}},t}(Phaser.Sprite);o.Die=s},{"../logging/ConfigLog4j":69}],56:[function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("../logging/ConfigLog4j"),i=e("./Board"),s=r.factory.getLogger("model.ActiveBoard"),a=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t.prototype.addPieceToActiveBoard=function(e){this.board.setValue(e.uniqueId,e.index)},t.prototype.removePieceFromActiveBoard=function(e){this.board.remove(e.uniqueId)},t.prototype.movement=function(e,t){"exit"===e&&(this.board.setValue(t.uniqueId,t.index),s.debug("From Listener: "+e+" I am adding <"+t.uniqueId+", "+t.index+"> to exited board "+this.board.size()))},t.prototype.containsInActiveBoard=function(e){return this.board.containsKey(e.uniqueId)},t}(i.Board);o.ExitedBoard=a},{"../logging/ConfigLog4j":69,"./Board":53}],57:[function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("../logging/ConfigLog4j"),i=e("./Board"),s=r.factory.getLogger("model.HomeBoard"),a=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t.prototype.addPieceToHomeBoard=function(e){this.board.setValue(e.uniqueId,e.index)},t.prototype.removePieceFromHomeBoard=function(e){this.board.remove(e.uniqueId)},t.prototype.movement=function(e,t){"rom"===e&&this.board.containsKey(t.uniqueId)&&this.board.remove(t.uniqueId),"backToHome"===e&&(this.board.setValue(t.uniqueId,t.index),s.debug("From Listener: "+e+" I am adding <"+t.uniqueId+" "+t.index+"> to homeboard: New Size "+this.board.size()))},t.prototype.containsInHomeBoard=function(e){return this.board.containsKey(e.uniqueId)},t}(i.Board);o.HomeBoard=a},{"../logging/ConfigLog4j":69,"./Board":53}],58:[function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("../logging/ConfigLog4j"),i=e("./Board"),s=(r.factory.getLogger("model.OnWayOutBoard"),function(e){function t(t){return e.call(this,t)||this}return n(t,e),t.prototype.addPieceToOnWayOutBoard=function(e){this.board.setValue(e.uniqueId,e.index)},t.prototype.removePieceFromOnWayOutBoard=function(e){this.board.remove(e.uniqueId)},t.prototype.movement=function(e,t){"exit"===e&&this.board.remove(t.uniqueId),"onwayout"===e&&this.addPieceToOnWayOutBoard(t)},t.prototype.containsInActiveBoard=function(e){return this.board.containsKey(e.uniqueId)},t}(i.Board));o.OnWayOutBoard=s},{"../logging/ConfigLog4j":69,"./Board":53}],59:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=e("../enums/MoveStatus"),r=function(){function e(){this.x=new Array,this.y=new Array,this.moveStatus=n.MoveStatus.ShouldContinue,this.moveRemainder=0,this.newIndex=-1}return e.prototype.setPath=function(e,t){this.x=e,this.y=t},e.prototype.isEmpty=function(){return this.x.length<1||this.y.length<1},e}();o.Path=r},{"../enums/MoveStatus":67}],60:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=e("../enums/ColorType"),r=e("../enums/MoveStatus"),i=e("../logging/ConfigLog4j"),s=(i.factory.getLogger("model.Paths.ActivePath"),i.factory.getLogger("model.Paths.OnWayOutPaths")),a=e("./PiecePosition"),u=function(){function e(){this.x=[0,48,96,144,192,240,288,288,288,288,288,288,336,384,384,384,384,384,384,432,480,528,576,624,672,672,672,624,576,528,480,432,384,384,384,384,384,384,336,288,288,288,288,288,288,240,192,144,96,48,0,0,0],this.y=[288,288,288,288,288,288,237,189.6,142.2,94.8,47.4,0,0,0,48,95,142.5,190,237.5,288,288,288,288,288,288,336,384,384,384,384,384,384,432,480,528,576,624,672,672,672,624,576,528,480,432,384,384,384,384,384,384,336,285]}return e.prototype.getPath=function(e,t,o){e.isAtHome()&&(o.x.push(e.startPosition.x),o.y.push(e.startPosition.y),e.setActive(),o.newIndex=e.startIndex);var n=e.entryIndex,i=e.index+1;e.isAtEntryPoint()&&(i=e.index);for(var s=i;s<t+1;s++)if(s<52){if(s===n){o.x.push(this.x[s]),o.y.push(this.y[s]);var a=t%n;o.moveRemainder=a,o.newIndex=n,o.moveStatus=r.MoveStatus.ShouldBeExiting;break}o.x.push(this.x[s]),o.y.push(this.y[s]),o.newIndex=s}else if(s>51){for(var a=t%51,u=0;u<a;u++)o.x.push(this.x[u]),o.y.push(this.y[u]);o.newIndex=a-1;break}return o},e.prototype.getPiecePostionByIndex=function(e){if(e>51){var t=e%51;return new a.PiecePosition(this.x[t],this.y[t])}return new a.PiecePosition(this.x[e],this.y[e])},e}();o.ActivePath=u;var l=function(){function e(){this.red_x=[48,96,144,192,240,288],this.red_y=[336,336,336,336,336,336],this.blue_x=[336,336,336,336,336,336],this.blue_y=[48,96,144,192,240,288],this.yellow_x=[624,576,528,480,432,384],this.yellow_y=[336,336,336,336,336,336],this.green_x=[336,336,336,336,336,336],this.green_y=[624,572,528,480,432,384]}return e.prototype.getPath=function(e,t,o,n){var r;r=this.getPiecePath(e);var i=r[0],a=r[1];if(e.isActive())if(o>6)s.debug("to "+o+" is greater than six! Something went wrong!!!");else{for(var u=t;u<o;u++)n.x.push(i[u]),n.y.push(a[u]);n.newIndex=o-1,e.index=n.newIndex,5===e.index?e.setExited():e.setOnWayOut()}else if(e.isOnWayOut())if(o>5)s.debug("to "+o+" is greater than five! Something went wrong!!!");else{for(var u=t;u<o+1;u++)n.x.push(i[u]),n.y.push(a[u]);n.newIndex=o,5===o&&e.setExited()}return n},e.prototype.getPiecePostionByIndex=function(e,t){var o;o=this.getPiecePath(e);var n=o[0],r=o[1];return t>6?void s.debug("Error!!! Index cannot be greater than six"):new a.PiecePosition(n[t],r[t])},e.prototype.getPiecePath=function(e){var t;switch(e.color){case n.ColorType.Red:t=[this.red_x,this.red_y];break;case n.ColorType.Blue:t=[this.blue_x,this.blue_y];break;case n.ColorType.Yellow:t=[this.yellow_x,this.yellow_y];break;case n.ColorType.Green:t=[this.green_x,this.green_y]}return t},e}();o.OnWayOutPaths=l},{"../enums/ColorType":66,"../enums/MoveStatus":67,"../logging/ConfigLog4j":69,"./PiecePosition":63}],61:[function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("../enums/ColorType"),i=e("../enums/States"),s=e("../movement/Movement"),a=e("../entities/PiecePosition"),u=e("../logging/ConfigLog4j"),l=e("../entities/Path"),c=(u.factory.getLogger("model.Piece"),function(e){function t(t,o,n,r,u,l,c,h,p){var f=e.call(this,t,o,n,r)||this;return f.color=u,f.playerId=l,f.uniqueId=c,f.startPosition=h,f.homePosition=new a.PiecePosition(o,n),f.game.physics.enable(f,Phaser.Physics.ARCADE),f.frame=0,f.index=-1,f.entryIndex=f.getEntryIndex(),f.startIndex=f.getStartIndex(u),f.state=i.States.AtHome,f.group=f.game.add.group(),f.group.add(f),f.signal=p,f.scale.x=1.1,f.scale.y=1.1,f.anchor.x=-.07,f.anchor.y=-.07,f.inputEnabled=!0,f.movement=new s.PieceMovement(p),f.speedConstant=72e3,f.collidingPiece=null,f.events.onInputDown.add(f.setActivePiece,f),f}return n(t,e),t.prototype.constructPath=function(e){var t=new l.Path;return this.isOnWayOut()&&(t=this.movement.constructOnWayOutPath(this,this.index,e)),(this.isActive()||this.isAtHome())&&(t=this.movement.constructActivePath(this,e)),t},t.prototype.movePiece=function(e){this.signal.dispatch("startmovement",this),this.game.world.bringToTop(this.group);var t=this.getSpeed(e.x.length);this.movePieceTo(e,t)},t.prototype.onCompleteMovement=function(){null!==this.collidingPiece&&(this.collidingPiece.moveToHome(),this.collidingPiece=null),this.isExited()&&(this.visible=!1),this.signal.dispatch("completeMovement",this)},t.prototype.moveToHome=function(){this.setAtHome(),this.signal.dispatch("backToHome",this),this.index=-1,this.game.world.bringToTop(this.group),this.game.add.tween(this).to({x:this.homePosition.x,y:this.homePosition.y},1e3,Phaser.Easing.Linear.None,!0)},t.prototype.getSpeed=function(e){return Math.floor(this.speedConstant/e)},t.prototype.isAtHome=function(){return this.state===i.States.AtHome},t.prototype.isActive=function(){return this.state===i.States.Active},t.prototype.isOnWayOut=function(){return this.state===i.States.onWayOut},t.prototype.isExited=function(){return this.state===i.States.Exited},t.prototype.setAtHome=function(){this.state=i.States.AtHome},t.prototype.setActive=function(){this.state=i.States.Active},t.prototype.setExited=function(){this.state=i.States.Exited},t.prototype.setOnWayOut=function(){this.state=i.States.onWayOut},t.prototype.isAtEntryPoint=function(){return this.index===this.entryIndex},t.prototype.setActivePiece=function(){this.signal.dispatch("select",this.uniqueId,this.playerId)},t.prototype.unsetActivePiece=function(){this.signal.dispatch("unselect",this.uniqueId,this.playerId),this.frame=0},t.prototype.select=function(){this.frame=1},t.prototype.unselect=function(){this.frame=0},t.prototype.ifYouAre=function(e){return e===this.color},t.prototype.getEntryIndex=function(){switch(this.color){case r.ColorType.Red:return 51;case r.ColorType.Blue:return 12;case r.ColorType.Yellow:return 25;case r.ColorType.Green:return 38;default:return-1}},t.prototype.getColor=function(){switch(this.color){case r.ColorType.Red:return"RED";case r.ColorType.Blue:return"BLUE";case r.ColorType.Yellow:return"YELLOW";case r.ColorType.Green:return"GREEN";default:return""}},t.prototype.getState=function(){switch(this.state){case i.States.Active:return"ACTIVE";case i.States.AtHome:return"AT HOME";case i.States.Exited:return"EXITED";case i.States.onWayOut:return"ON WAY OUT";default:return""}},t.prototype.setParameters=function(e,t,o,n){this.x=e,this.y=t,this.state=n,this.index=o},t.prototype.movePieceTo=function(e,t){this.game.add.tween(this).to(e,1e3,Phaser.Easing.Linear.None,!0).interpolation(function(e,t){return Phaser.Math.linearInterpolation(e,t)}).onComplete.add(this.onCompleteMovement,this)},t.prototype.getStartIndex=function(e){switch(e){case r.ColorType.Red:return 1;case r.ColorType.Blue:return 14;case r.ColorType.Yellow:return 27;case r.ColorType.Green:return 40;default:return 0}},t}(Phaser.Sprite));o.Piece=c},{"../entities/Path":59,"../entities/PiecePosition":63,"../enums/ColorType":66,"../enums/States":68,"../logging/ConfigLog4j":69,"../movement/Movement":71}],62:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=e("../entities/Piece"),r=e("../enums/ColorType"),i=e("../entities/PiecePosition"),s=e("angular2-uuid"),a=function(){function e(e){this.game=e}return e.prototype.createNewPieces=function(e,t,o){var r=this.getImageKey(e);if("red_piece"===r){var a=new i.PiecePosition(49,287);return[new n.Piece(this.game,118,72,r,e,t,s.UUID.UUID(),a,o),new n.Piece(this.game,72,118,r,e,t,s.UUID.UUID(),a,o),new n.Piece(this.game,168,118,r,e,t,s.UUID.UUID(),a,o),new n.Piece(this.game,120,168,r,e,t,s.UUID.UUID(),a,o)]}if("blue_piece"===r){var a=new i.PiecePosition(384,48);return[new n.Piece(this.game,552,72,r,e,t,s.UUID.UUID(),a,o),new n.Piece(this.game,503,118,r,e,t,s.UUID.UUID(),a,o),new n.Piece(this.game,600,118,r,e,t,s.UUID.UUID(),a,o),new n.Piece(this.game,552,168,r,e,t,s.UUID.UUID(),a,o)]}if("yellow_piece"===r){var a=new i.PiecePosition(624,385);return[new n.Piece(this.game,552,503,r,e,t,s.UUID.UUID(),a,o),new n.Piece(this.game,503,552,r,e,t,s.UUID.UUID(),a,o),new n.Piece(this.game,600,552,r,e,t,s.UUID.UUID(),a,o),new n.Piece(this.game,552,600,r,e,t,s.UUID.UUID(),a,o)]}if("green_piece"===r){var a=new i.PiecePosition(287,622);return[new n.Piece(this.game,118,503,r,e,t,s.UUID.UUID(),a,o),new n.Piece(this.game,72,552,r,e,t,s.UUID.UUID(),a,o),new n.Piece(this.game,168,552,r,e,t,s.UUID.UUID(),a,o),new n.Piece(this.game,118,600,r,e,t,s.UUID.UUID(),a,o)]}return[]},e.prototype.createExistingPiece=function(){},e.prototype.getImageKey=function(e){switch(e){case r.ColorType.Red:return"red_piece";case r.ColorType.Blue:return"blue_piece";case r.ColorType.Green:return"green_piece";case r.ColorType.Yellow:return"yellow_piece";default:return"undefined"}},e}();o.PieceFactory=a},{"../entities/Piece":61,"../entities/PiecePosition":63,"../enums/ColorType":66,"angular2-uuid":1}],63:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e,t){this.x=e,this.y=t}return e}();o.PiecePosition=n},{}],64:[function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("../entities/PieceFactory"),i=e("../logging/ConfigLog4j"),s=(i.factory.getLogger("model.Player"),function(e){function t(t,o,n,r,i,s,a){var u=e.call(this,t)||this;u.pieces=[],u.previousDoubleSix=!1,u.isAI=!1,u.name=o,u.playerId=n,u.turn=r,u.pieces=new Array,u.signal=s,u.signal.add(u.selectCurrentPiece,u,0,"select"),u.currentSelectedPiece=null,void 0!==a&&(u.previousDoubleSix=a);for(var l=0;l<i.length;l++)for(var c=u.createNewPieces(i[l],n,u.signal),h=0,p=c;h<p.length;h++){var f=p[h];u.pieces.push(f)}return u}return n(t,e),t.prototype.roll=function(e,t,o){e.roll(this.playerId,t,o)},t.prototype.getActivePieces=function(e){for(var t=[],o=0,n=this.pieces;o<n.length;o++){var r=n[o];void 0!==e.board.getValue(r.uniqueId)&&r.isActive()&&t.push(r)}return t},t.prototype.getFirstOccuringActivePiece=function(){for(var e=null,t=0,o=this.pieces;t<o.length;t++){var n=o[t];if(n.isActive()){e=n;break}}return e},t.prototype.getHomePieces=function(e){for(var t=[],o=0,n=this.pieces;o<n.length;o++){var r=n[o];void 0!==e.board.getValue(r.uniqueId)&&r.isAtHome()&&t.push(r)}return t},t.prototype.getOnWayOutPieces=function(e){for(var t=[],o=0,n=this.pieces;o<n.length;o++){var r=n[o];void 0!==e.board.getValue(r.uniqueId)&&r.isOnWayOut()&&t.push(r)}return t},t.prototype.getPlayerOnWayOutPieces=function(){for(var e=[],t=0,o=this.pieces;t<o.length;t++){var n=o[t];n.isOnWayOut()&&e.push(n)}return e},t.prototype.getPlayerActivePieces=function(){for(var e=[],t=0,o=this.pieces;t<o.length;t++){var n=o[t];n.isActive()&&e.push(n)}return e},t.prototype.selectAllPiece=function(){for(var e=0,t=this.pieces;e<t.length;e++){t[e].alpha=1}this.turn=!0},t.prototype.unselectAllPiece=function(){for(var e=0,t=this.pieces;e<t.length;e++){t[e].alpha=.5}this.turn=!1},t.prototype.allPiecesAreAtHome=function(){for(var e=!0,t=0,o=this.pieces;t<o.length;t++){if(!o[t].isAtHome()){e=!1;break}}return e},t.prototype.allPiecesAreOnWayOut=function(){for(var e=!1,t=0,o=this.pieces;t<o.length;t++){if(!o[t].isOnWayOut()){e=!0;break}}return e},t.prototype.selectCurrentPiece=function(e,t,o){if(this.turn&&this.playerId===o&&"select"===e)for(var n=0,r=this.pieces;n<r.length;n++){var i=r[n];i.uniqueId===t?(i.select(),this.currentSelectedPiece=i):i.unselect()}},t.prototype.pieceBelongsToMe=function(e){for(var t=!1,o=0,n=this.pieces;o<n.length;o++){if(n[o].uniqueId===e){t=!0;break}}return t},t.prototype.getPieceByUniqueId=function(e){for(var t=null,o=0,n=this.pieces;o<n.length;o++){var r=n[o];if(r.uniqueId===e){t=r;break}}return t},t.prototype.hasActivePieces=function(){for(var e=!1,t=0,o=this.pieces;t<o.length;t++){if(o[t].isActive()){e=!0;break}}return e},t.prototype.hasOnWayOutPieces=function(){for(var e=!1,t=0,o=this.pieces;t<o.length;t++){if(o[t].isOnWayOut()){e=!0;break}}return e},t.prototype.hasHomePieces=function(){for(var e=!1,t=0,o=this.pieces;t<o.length;t++){if(o[t].isAtHome()){e=!0;break}}return e},t.prototype.hasExactlyOneActivePiece=function(){for(var e=0,t=0,o=this.pieces;t<o.length;t++){if(o[t].isActive()&&++e>1)break}return 1===e},t}(r.PieceFactory));o.Player=s},{"../entities/PieceFactory":62,"../logging/ConfigLog4j":69}],65:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});!function(e){e[e.PLAY=0]="PLAY",e[e.ROLL=1]="ROLL",e[e.SKIP=2]="SKIP",e[e.DO_NOTHING=3]="DO_NOTHING",e[e.EXIT=4]="EXIT"}(o.Actions||(o.Actions={}))},{}],66:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});!function(e){e[e.Red=0]="Red",e[e.Blue=1]="Blue",e[e.Green=2]="Green",e[e.Yellow=3]="Yellow"}(o.ColorType||(o.ColorType={}))},{}],67:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});!function(e){e[e.ShouldContinue=0]="ShouldContinue",e[e.IsRoundRobin=1]="IsRoundRobin",e[e.ShouldBeExiting=2]="ShouldBeExiting"}(o.MoveStatus||(o.MoveStatus={}))},{}],68:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});!function(e){e[e.AtHome=0]="AtHome",e[e.Active=1]="Active",e[e.onWayOut=2]="onWayOut",e[e.Exited=3]="Exited"}(o.States||(o.States={}))},{}],69:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=e("typescript-logging"),r=(new n.LoggerFactoryOptions).addLogGroupRule(new n.LogGroupRule(new RegExp("model.+"),n.LogLevel.Debug)).addLogGroupRule(new n.LogGroupRule(new RegExp(".+"),n.LogLevel.Info));o.factory=n.LFService.createNamedLoggerFactory("LoggerFactory",r)},{"typescript-logging":47}],70:[function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("./states/Preloader"),i=e("./states/Game"),s=function(e){function t(){var t=e.call(this,900,720,Phaser.AUTO,"gameContainer")||this;return t.state.add("Preloader",r.Preloader,!1),t.state.add("Game",i.Game,!1),t.state.start("Preloader"),t}return n(t,e),t}(Phaser.Game);o.LudoGame=s,window.onload=function(){new s}},{"./states/Game":82,"./states/Preloader":83}],71:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=e("../entities/Paths"),r=e("../entities/Path"),i=e("../logging/ConfigLog4j"),s=e("../enums/MoveStatus"),a=(i.factory.getLogger("model.Movement"),function(){function e(e){this.activePath=new n.ActivePath,this.onWayOutPaths=new n.OnWayOutPaths,this.signal=e}return e.prototype.constructActivePath=function(e,t){var o=e.index,n=new r.Path,i=o+t;return n=this.activePath.getPath(e,i,n),n.moveStatus===s.MoveStatus.ShouldBeExiting&&n.moveRemainder>0&&(n=this.constructOnWayOutPath(e,0,n.moveRemainder,n),this.signal.dispatch("onwayout",e)),n},e.prototype.constructOnWayOutPath=function(e,t,o,n){if(void 0===n){n=new r.Path;var i=e.index+o;n=this.onWayOutPaths.getPath(e,t,i,n)}else n=this.onWayOutPaths.getPath(e,t,o,n);return n},e}());o.PieceMovement=a},{"../entities/Path":59,"../entities/Paths":60,"../enums/MoveStatus":67,"../logging/ConfigLog4j":69}],72:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=e("../enums/Actions"),r=e("./Move"),i=e("../entities/ActiveBoard"),s=e("../entities/HomeBoard"),a=e("../logging/ConfigLog4j"),u=a.factory.getLogger("model.AbstractRules"),l=function(){function e(e,t,o){this.dice=e,this.schedule=t,this.board=o,this.rulesPool=new Array,this.activeRulePool=new Array;for(var n=0;n<10;++n)this.rulesPool.push(new r.Move)}return e.prototype.getBoard=function(){return this.board},e.prototype.rolledAtLeastOneSix=function(){return this.dice.rolledAtLeastOneSix()},e.prototype.rolledDoubleSix=function(){return this.dice.rolledDoubleSix()},e.prototype.getDieByValue=function(e){return this.dice.getDieUniqueIdByValue(e)},e.prototype.getNewRule=function(){var e=null;return this.rulesPool.length>0?e=this.rulesPool.pop():(e=new r.Move,this.activeRulePool.push(e)),e},e.prototype.showFinalResults=function(){this.board instanceof i.ActiveBoard?u.debug("Active rule: "+this.activeRulePool.length+" RulePool: "+this.rulesPool.length):this.board instanceof s.HomeBoard&&u.debug("Home rule: "+this.activeRulePool.length+" RulePool: "+this.rulesPool.length)},e.prototype.addSpentRulesBackToPool=function(e){for(var t=0,o=e;t<o.length;t++){var n=o[t];this.addToRulePool(n)}},e.prototype.willCrossEntryPoint=function(e){var t=[],o=e.index,n=o+this.dice.dieOne.getValue(),r=o+this.dice.dieTwo.getValue(),i=o+this.dice.dieOne.getValue()+this.dice.dieTwo.getValue();return!this.dice.isDieOneConsumed()&&e.getEntryIndex()>=o&&e.getEntryIndex()<n&&t.push(this.dice.dieOne.uniqueId),!this.dice.isDieTwoConsumed()&&e.getEntryIndex()>=o&&e.getEntryIndex()<r&&t.push(this.dice.dieTwo.uniqueId),!this.dice.isDieOneConsumed()&&!this.dice.isDieTwoConsumed()&&e.getEntryIndex()>=o&&e.getEntryIndex()<i&&t.push(this.dice.dieOne.uniqueId+"#"+this.dice.dieTwo.uniqueId),t},e.prototype.willCrossExitPoint=function(e){var t=[],o=this.dice.dieOne.getValue()+this.dice.dieTwo.getValue(),n=o-(e.entryIndex-e.index);return!this.dice.isDieOneConsumed()&&!this.dice.isDieTwoConsumed()&&n<7&&t.push(this.dice.dieOne.uniqueId+"#"+this.dice.dieTwo.uniqueId),this.dice.isDieOneConsumed()||t.push(this.dice.dieOne.uniqueId),this.dice.isDieTwoConsumed()||t.push(this.dice.dieTwo.uniqueId),t},e.prototype.getHigherDieValue=function(){return this.dice.getHigherDieValue()},e.prototype.getUniqueIdCollision=function(e,t){for(var o=this.board.board.keys(),n="NOTFOUND",r=0,i=o;r<i.length;r++){var s=i[r];if(this.board.board.getValue(s)===t&&s!==e){n=s.toString();break}}return n},e.prototype.generatePieceMovement=function(e,t,o){var r=this.getNewRule();if(2===e.length){var i=e[0]+"#"+e[1];r.action=n.Actions.PLAY,r.diceId=i,r.state=o,r.pieceId=t.uniqueId}else if(1===e.length){var i=e[0];r.action=n.Actions.PLAY,r.diceId=i,r.state=o,r.pieceId=t.uniqueId}return r},e.prototype.addToRulePool=function(e){for(var t=0,o=this.activeRulePool.length;t<o;t++)this.activeRulePool[t]===e&&this.activeRulePool.splice(t,1);e.resetRule(),this.rulesPool.push(e)},e}();o.AbstractRules=l},{"../entities/ActiveBoard":52,"../entities/HomeBoard":57,"../enums/Actions":65,"../logging/ConfigLog4j":69,"./Move":77}],73:[function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("../enums/Actions"),i=e("../logging/ConfigLog4j"),s=e("./AbstractRules"),a=e("../enums/States"),u=(i.factory.getLogger("model.ActiveRules"),function(e){function t(t,o,n){var r=e.call(this,t,o,n)||this;return r.state=a.States.Active,r}return n(t,e),t.prototype.generateMoves=function(e){for(var t=[],o=e.getActivePieces(this.board),n=0,i=o;n<i.length;n++){var s=i[n];if(this.willCrossEntryPoint(s).length>0){var a=this.willCrossExitPoint(s);if(a.length>0)for(var u=0,l=a;u<l.length;u++){var c=l[u],h=this.getNewRule();h.action=r.Actions.PLAY,h.diceId=c,h.pieceId=s.uniqueId,h.state=this.state,t.push(h)}}else{if(!this.dice.dieOne.isConsumed()){var h=this.getNewRule();h.action=r.Actions.PLAY,h.diceId=this.dice.dieOne.uniqueId,h.pieceId=s.uniqueId,h.state=this.state,t.push(h)}if(!this.dice.dieTwo.isConsumed()){var h=this.getNewRule();h.action=r.Actions.PLAY,h.diceId=this.dice.dieTwo.uniqueId,h.pieceId=s.uniqueId,h.state=this.state,t.push(h)}if(!this.dice.dieOne.isConsumed()&&!this.dice.dieTwo.isConsumed()){var h=this.getNewRule();h.action=r.Actions.PLAY,h.diceId=this.dice.dieOne.uniqueId+"#"+this.dice.dieTwo.uniqueId,h.pieceId=s.uniqueId,h.state=this.state,t.push(h)}}}return t},t.prototype.generateActivePieceMovement=function(e,t){return this.generatePieceMovement(e,t,this.state)},t}(s.AbstractRules));o.ActiveRules=u},{"../enums/Actions":65,"../enums/States":68,"../logging/ConfigLog4j":69,"./AbstractRules":72}],74:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=e("../enums/States"),r=function(){function e(){}return e.prototype.setAllPossibleMoves=function(e,t,o){this.activeMoves=e,this.homeMoves=t,this.onWayOutMoves=o},e.prototype.getPieceMoves=function(e){switch(e){case n.States.Active:return this.activeMoves;case n.States.AtHome:return this.homeMoves;case n.States.onWayOut:return this.onWayOutMoves;default:return null}},e.prototype.resetMoves=function(){this.activeMoves=[],this.homeMoves=[],this.onWayOutMoves=[]},e.prototype.isEmpty=function(){return 0===this.activeMoves.length&&0===this.homeMoves.length&&0===this.onWayOutMoves.length},e.prototype.activeMoveContainsDieId=function(e){for(var t=!1,o=0,n=this.activeMoves;o<n.length;o++){if(n[o].diceId===e){t=!0;break}}return t},e.prototype.getConcatenatedPossibleMoves=function(){var e=[];return e=e.concat(this.activeMoves),e=e.concat(this.homeMoves),e=e.concat(this.onWayOutMoves)},e}();o.AllPossibleMoves=r},{"../enums/States":68}],75:[function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("../logging/ConfigLog4j"),i=e("./AbstractRules"),s=e("../enums/States"),a=(r.factory.getLogger("model.HomeRules"),function(e){function t(t,o,n){var r=e.call(this,t,o,n)||this;return r.state=s.States.AtHome,r}return n(t,e),t}(i.AbstractRules));o.ExitedRules=a},{"../enums/States":68,"../logging/ConfigLog4j":69,"./AbstractRules":72}],76:[function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("../enums/Actions"),i=e("../logging/ConfigLog4j"),s=e("./AbstractRules"),a=e("../enums/States"),u=i.factory.getLogger("model.HomeRules"),l=function(e){function t(t,o,n){var r=e.call(this,t,o,n)||this;return r.state=a.States.AtHome,r}return n(t,e),t.prototype.generateMoves=function(e){var t=[];if(this.rolledDoubleSix()){var o=this.dice.dieOne.uniqueId,n=this.dice.dieTwo.uniqueId;if(null===o||null===n)return void u.debug("No matching uniqueIds for the values supplied!!!");for(var i=e.getHomePieces(this.board),s=0,a=i;s<a.length;s++){var l=a[s];if(!this.dice.dieOne.isConsumed()){var c=this.getNewRule();c.action=r.Actions.PLAY,c.diceId=o,c.pieceId=l.uniqueId,c.state=this.state,t.push(c)}if(!this.dice.dieTwo.isConsumed()){var c=this.getNewRule();c.action=r.Actions.PLAY,c.diceId=n,c.pieceId=l.uniqueId,c.state=this.state,t.push(c)}if(!this.dice.dieOne.isConsumed()&&!this.dice.dieTwo.isConsumed()){var c=this.getNewRule();c.action=r.Actions.PLAY,c.diceId=this.dice.dieOne.uniqueId+"#"+this.dice.dieTwo.uniqueId,c.pieceId=l.uniqueId,c.state=this.state,t.push(c)}}}else if(this.rolledAtLeastOneSix()){var h=this.dice.getDieUniqueIdByValue(6);if(null===h)return void u.debug("No matching uniqueId for the value supplied!!!");for(var i=e.getHomePieces(this.board),p=0,f=i;p<f.length;p++){var l=f[p];if(!this.dice.dieOne.isConsumed()&&!this.dice.dieTwo.isConsumed()){var g=this.getNewRule();g.action=r.Actions.PLAY,g.playBothDice=!0,g.diceId=this.dice.dieOne.uniqueId+"#"+this.dice.dieTwo.uniqueId,g.pieceId=l.uniqueId,g.state=this.state,t.push(g)}var c=this.getNewRule();c.action=r.Actions.PLAY,c.diceId=h,c.pieceId=l.uniqueId,c.state=this.state,t.push(c)}}return t},t.prototype.generateHomePieceMovement=function(e,t){return this.generatePieceMovement(e,t,this.state)},t}(s.AbstractRules);o.HomeRules=l},{"../enums/Actions":65,"../enums/States":68,"../logging/ConfigLog4j":69,"./AbstractRules":72}],77:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=e("../enums/Actions"),r=function(){function e(){this.pieceId=" ",this.action=n.Actions.DO_NOTHING,this.pieceId=" ",this.playBothDice=!1,this.state=null}return e.prototype.resetRule=function(){this.pieceId="",this.action=n.Actions.DO_NOTHING,this.pieceId="",this.playBothDice=!1,this.state=null},e.prototype.compare=function(e){var t=!1;return e.action===this.action&&e.diceId===this.diceId&&e.pieceId===this.pieceId&&(t=!0),t},e}();o.Move=r},{"../enums/Actions":65}],78:[function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("../enums/Actions"),i=e("../logging/ConfigLog4j"),s=e("../enums/States"),a=e("./AbstractRules"),u=i.factory.getLogger("model.OnWayOutRules"),l=function(e){function t(t,o,n){var r=e.call(this,t,o,n)||this;return r.state=s.States.onWayOut,r}return n(t,e),t.prototype.generateMoves=function(e){var t=[],o=this.dice.dieOne.uniqueId,n=this.dice.dieTwo.uniqueId;if(null===o||null===n)return void u.debug("No matching uniqueIds for the values supplied!!!");for(var i=e.getOnWayOutPieces(this.board),s=0,a=i;s<a.length;s++){var l=a[s];if(!this.dice.dieOne.isConsumed()&&this.dice.dieOne.getValue()+l.index<=5){var c=this.getNewRule();c.action=r.Actions.PLAY,c.diceId=o,c.pieceId=l.uniqueId,c.state=this.state,t.push(c)}if(!this.dice.dieTwo.isConsumed()&&this.dice.dieTwo.getValue()+l.index<=5){var c=this.getNewRule();c.action=r.Actions.PLAY,c.diceId=n,c.pieceId=l.uniqueId,c.state=this.state,t.push(c)}
if(!this.dice.dieOne.isConsumed()&&!this.dice.dieTwo.isConsumed()&&this.dice.dieOne.getValue()+this.dice.dieTwo.getValue()+l.index<=5){var c=this.getNewRule();c.action=r.Actions.PLAY,c.diceId=o+"#"+n,c.pieceId=l.uniqueId,c.state=this.state,t.push(c)}}return t},t.prototype.generateOnWayOutPieceMovement=function(e,t){return this.generatePieceMovement(e,t,this.state)},t}(a.AbstractRules);o.OnWayOutRules=l},{"../enums/Actions":65,"../enums/States":68,"../logging/ConfigLog4j":69,"./AbstractRules":72}],79:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=e("../rules/Rules"),r=e("../logging/ConfigLog4j"),i=r.factory.getLogger("model.RuleEnforcer"),s=function(){function e(e,t,o,r,i,s,a,u){this.rollCounter=0,this.signal=e,this.scheduler=t,this.dice=o,this.currentPossibleMovements=u,this.rule=new n.Rules(this.signal,t,o,r,i,s,a),this.signal.add(this.endOfDiceRoll,this,0,"endOfDieRoll"),this.signal.add(this.onCompletePieceMovement,this,0,"completeMovement")}return e.prototype.endOfDiceRoll=function(e){if("endOfDieRoll"===e&&2===++this.rollCounter){this.rollCounter=0,this.currentPossibleMovements.resetMoves(),this.generateAllPossibleMoves();var t=this.scheduler.getCurrentPlayer();this.dice.rolledDoubleSix()&&(t.previousDoubleSix=!0),t.isAI&&this.signal.dispatch("aiPlayerMovement",t.playerId,this.currentPossibleMovements),this.rule.checkBoardConsistencies()}},e.prototype.generatePieceMovement=function(e,t){for(var o=this.rule.generatePieceMovement(e,t),n=!1,r=this.currentPossibleMovements.getPieceMoves(t.state),s=this.scheduler.getCurrentPlayer(),a=0,u=r;a<u.length;a++){var l=u[a];if(l.compare(o)){n=!0,l=this.filterConsumeDieValueSixMovement(l,t);var c=this.addDiceValues(this.dice.getDieValueArrayByUniqueId(l.diceId));this.dice.consumeDieValueById(l.diceId);var h=t.constructPath(c);if(h.isEmpty())break;if(t.index=h.newIndex,t.isActive()){var p=this.checkCollision(t.uniqueId,t.index);if("NOTFOUND"!==p&&!s.pieceBelongsToMe(p)){var f=this.scheduler.getPieceByUniqueId(p);null!==f&&(t.collidingPiece=f,t.setExited())}}t.movePiece(h);break}}return n?(this.rule.addSpentMovesBackToPool(this.currentPossibleMovements.activeMoves),this.rule.addSpentMovesBackToPool(this.currentPossibleMovements.homeMoves),this.rule.addSpentMovesBackToPool(this.currentPossibleMovements.onWayOutMoves),this.currentPossibleMovements.resetMoves(),this.generateAllPossibleMoves()):i.debug("Move not found!!!: "+this.rule.decodeMove(o)),o},e.prototype.generateAIPieceMovement=function(e,t){t=this.filterConsumeDieValueSixMovement(t,e);var o=this.scheduler.getCurrentPlayer(),n=this.addDiceValues(this.dice.getDieValueArrayByUniqueId(t.diceId));this.dice.consumeDieValueById(t.diceId);var r=e.constructPath(n);if(!r.isEmpty()){if(e.index=r.newIndex,e.isActive()){var i=this.checkCollision(e.uniqueId,e.index);if("NOTFOUND"!==i&&!o.pieceBelongsToMe(i)){var s=this.scheduler.getPieceByUniqueId(i);null!==s&&(e.collidingPiece=s,e.setExited())}}e.movePiece(r)}return this.rule.addSpentMovesBackToPool(this.currentPossibleMovements.activeMoves),this.rule.addSpentMovesBackToPool(this.currentPossibleMovements.homeMoves),this.rule.addSpentMovesBackToPool(this.currentPossibleMovements.onWayOutMoves),this.currentPossibleMovements.resetMoves(),this.generateAllPossibleMoves(),t},e.prototype.readAllMoves=function(){for(var e=0,t=this.currentPossibleMovements.activeMoves;e<t.length;e++){var o=t[e];i.debug(this.rule.decodeMove(o))}for(var n=0,r=this.currentPossibleMovements.homeMoves;n<r.length;n++){var o=r[n];i.debug(this.rule.decodeMove(o))}for(var s=0,a=this.currentPossibleMovements.onWayOutMoves;s<a.length;s++){var o=a[s];i.debug(this.rule.decodeMove(o))}i.debug("------------------------------------------------------------------------- ")},e.prototype.addDiceValues=function(e){for(var t=0,o=0,n=e;o<n.length;o++){t+=n[o]}return t},e.prototype.filterConsumeDieValueSixMovement=function(e,t){return t.isAtHome()&&(this.dice.consumeDieValueSix(e.diceId),t.index=t.startIndex),e},e.prototype.generateAllPossibleMoves=function(){var e=this.scheduler.getCurrentPlayer();this.currentPossibleMovements.resetMoves(),this.currentPossibleMovements=this.rule.generateAllPossibleMoves(e),this.analyzeAllPossibleMove(e)},e.prototype.analyzeAllPossibleMove=function(e){var t=this;this.currentPossibleMovements.isEmpty()?setTimeout(function(){t.handleEmptyPossibleMovements()},1e3):e.allPiecesAreAtHome()?this.currentPossibleMovements=this.filterOnAllPiecesAreAtHome(this.currentPossibleMovements,e):e.hasExactlyOneActivePiece()?this.currentPossibleMovements=this.filterOnHasExactlyOneActivePiece(this.currentPossibleMovements,e):!e.hasActivePieces()&&e.hasHomePieces()&&this.dice.rolledAtLeastOneSix()&&e.hasOnWayOutPieces()&&(this.currentPossibleMovements=this.filterOnNoActiveButHomeAndOnWayOutPieces(this.currentPossibleMovements,e))},e.prototype.filterOnHasExactlyOneActivePiece=function(e,t){if(t.hasOnWayOutPieces()){for(var o=t.getPlayerOnWayOutPieces(),n=[],r=0,s=o;r<s.length;r++){var a=s[r];n=n.concat(this.getDieMovementsOnPiece(a.uniqueId,e.onWayOutMoves))}if(1===n.length&&!this.dice.rolledAtLeastOneSix()&&t.hasHomePieces()){for(var u=0;u<e.activeMoves.length;u++)if(n[0].diceId===e.activeMoves[u].diceId){var l=e.activeMoves[u];i.debug("1 Successfully Removing illegal move: "+this.rule.decodeMove(l)),e.activeMoves.splice(u,1);break}}else if(n.length>1&&this.dice.bothDiceHasLegitValues()&&!this.dice.rolledAtLeastOneSix()&&t.hasHomePieces()){if(this.diceIdsAreDistinct(n))for(var c=n[0].diceId,u=0;u<e.activeMoves.length;u++)if(c===e.activeMoves[u].diceId){var l=e.activeMoves[u];i.debug("2 Successfully Removed illegal move: "+this.rule.decodeMove(l)),e.activeMoves.splice(u,1);break}}else if(0===n.length&&this.dice.bothDiceHasLegitValues()&&!this.dice.rolledAtLeastOneSix()&&t.hasHomePieces())for(var u=0;u<e.activeMoves.length;u++){if(this.dice.dieOne.uniqueId===e.activeMoves[u].diceId){var l=e.activeMoves[u];e.activeMoves.splice(u,1),i.debug("3 Successfully Removed illegal move: "+this.rule.decodeMove(l))}if(this.dice.dieTwo.uniqueId===e.activeMoves[u].diceId){var l=e.activeMoves[u];e.activeMoves.splice(u,1),i.debug("4 Successfully Removed illegal move: "+this.rule.decodeMove(l))}}}else e.activeMoves=this.removeMoveWithDieValueSix(e.activeMoves);return e},e.prototype.filterOnAllPiecesAreAtHome=function(e,t){return t.hasActivePieces()||(e.homeMoves=this.removeMoveWithBothDiveValues(e.homeMoves)),e},e.prototype.filterOnNoActiveButHomeAndOnWayOutPieces=function(e,t){for(var o=t.getPlayerOnWayOutPieces(),n=[],r=0,i=o;r<i.length;r++){var s=i[r];n=n.concat(this.getDieMovementsOnPiece(s.uniqueId,e.onWayOutMoves))}return 0===n.length&&(e.homeMoves=this.removeMoveWithBothDiveValues(e.homeMoves)),e},e.prototype.diceIdsAreDistinct=function(e){for(var t=e[0],o=!0,n=0,r=e;n<r.length;n++){if(r[n].diceId!==t.diceId){o=!1;break}}return o},e.prototype.getDieMovementsOnPiece=function(e,t){for(var o=[],n=0,r=t;n<r.length;n++){var i=r[n];i.pieceId===e&&o.push(i)}return o},e.prototype.checkCollision=function(e,t){return this.rule.getUniqueIdCollision(e,t)},e.prototype.removeMoveWithBothDiveValues=function(e){for(var t=0;t<e.length;t++){if(e[t].diceId.split("#").length<2){var o=e[t];e.splice(t,1),i.debug("5 Successfully Removed illegal move: "+this.rule.decodeMove(o))}}return e},e.prototype.removeMoveWithDieValueSix=function(e){var t=this.dice.getDieUniqueIdByValue(6);if(null!==t)for(var o=0;o<e.length;o++)if(e[o].diceId===t){var n=e[o];e.splice(o,1),i.debug("6 Successfully Removed illegal move: "+this.rule.decodeMove(n))}return e},e.prototype.onCompletePieceMovement=function(e,t){if("completeMovement"===e&&!this.currentPossibleMovements.isEmpty()){var o=this.scheduler.getCurrentPlayer();o.isAI&&this.signal.dispatch("aiPlayerMovement",o.playerId,this.currentPossibleMovements)}},e.prototype.handleEmptyPossibleMovements=function(){var e=this.scheduler.getNextPlayer();e.isAI&&(this.dice.setDicePlayerId(e.playerId),this.signal.dispatch("aiRollDice",this.dice,e.playerId))},e}();o.RuleEnforcer=s},{"../logging/ConfigLog4j":69,"../rules/Rules":80}],80:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=e("../logging/ConfigLog4j"),r=e("../enums/Actions"),i=e("./HomeRules"),s=e("./ActiveRules"),a=e("./OnWayOutRules"),u=e("./ExitedRules"),l=e("../enums/States"),c=e("./AllPossibleMoves"),h=n.factory.getLogger("model.Rules"),p=function(){function e(e,t,o,n,r,l,h){this.rollCounter=0,this.activeMove=new s.ActiveRules(o,t,n),this.homeMove=new i.HomeRules(o,t,r),this.onWayOutMove=new a.OnWayOutRules(o,t,l),this.exitedMove=new u.ExitedRules(o,t,h),this.schedule=t,this.signal=e,this.dice=o,this.allPossibleMoves=new c.AllPossibleMoves}return e.prototype.getOnWayOutBoard=function(){return this.onWayOutMove.getBoard()},e.prototype.getActiveBoard=function(){return this.activeMove.getBoard()},e.prototype.getHomeBoard=function(){return this.homeMove.getBoard()},e.prototype.generateAllPossibleMoves=function(e){return this.allPossibleMoves.activeMoves=this.activeMove.generateMoves(e),this.allPossibleMoves.homeMoves=this.homeMove.generateMoves(e),this.allPossibleMoves.onWayOutMoves=this.onWayOutMove.generateMoves(e),this.allPossibleMoves},e.prototype.generatePieceMovement=function(e,t){switch(t.state){case l.States.Active:return this.activeMove.generateActivePieceMovement(e,t);case l.States.AtHome:return this.homeMove.generateHomePieceMovement(e,t);case l.States.onWayOut:return this.onWayOutMove.generateOnWayOutPieceMovement(e,t);default:return null}},e.prototype.addSpentMovesBackToPool=function(e){for(var t=[],o=[],n=[],r=0,i=e;r<i.length;r++){var s=i[r];s.state===l.States.Active?t.push(s):s.state===l.States.AtHome?o.push(s):s.state===l.States.onWayOut&&n.push(s)}t.length>0&&this.activeMove.addSpentRulesBackToPool(t),o.length>0&&this.homeMove.addSpentRulesBackToPool(o),n.length>0&&this.onWayOutMove.addSpentRulesBackToPool(e)},e.prototype.getUniqueIdCollision=function(e,t){return this.activeMove.getUniqueIdCollision(e,t)},e.prototype.decodeMove=function(e){switch(e.state){case l.States.Active:return this.decodeActiveMove(e);case l.States.AtHome:return this.decodeHomeMove(e);case l.States.onWayOut:return this.decodeOnWayOutMove(e);default:return"Unexpected"}},e.prototype.checkBoardConsistencies=function(){var e=this.activeMove.getBoard().board.size(),t=this.homeMove.getBoard().board.size(),o=this.onWayOutMove.getBoard().board.size(),n=this.exitedMove.getBoard().board.size();16!==e+t+o+n&&h.debug("Total Pieces mismatch!!! active: "+e+" home: "+t+" onwayOut: "+o+" exited: "+n)},e.prototype.decodeActiveMove=function(e){return e.action===r.Actions.DO_NOTHING?"DO NOTHING":e.action===r.Actions.EXIT?"EXIT "+e.pieceId:e.action===r.Actions.PLAY?"ACTIVE PLAY "+this.dice.getDieValueArrayByUniqueId(e.diceId).join()+" ON "+e.pieceId:e.action===r.Actions.ROLL?"ROLL":e.action===r.Actions.SKIP?"ACTIVE SKIP":"DO NOTHING"},e.prototype.decodeHomeMove=function(e){return e.action===r.Actions.DO_NOTHING?"DO NOTHING":e.action===r.Actions.EXIT?"EXIT "+e.pieceId:e.action===r.Actions.PLAY?"HOME PLAY "+this.dice.getDieValueArrayByUniqueId(e.diceId).join()+" ON "+e.pieceId:e.action===r.Actions.ROLL?"ROLL":e.action===r.Actions.SKIP?"HOME SKIP":"DO NOTHING"},e.prototype.decodeOnWayOutMove=function(e){return e.action===r.Actions.DO_NOTHING?"DO NOTHING":e.action===r.Actions.EXIT?"EXIT "+e.pieceId:e.action===r.Actions.PLAY?"ONWAYOUT PLAY "+this.dice.getDieValueArrayByUniqueId(e.diceId).join()+" ON "+e.pieceId:e.action===r.Actions.ROLL?"ROLL":e.action===r.Actions.SKIP?"ONWAYOUT SKIP":"DO NOTHING"},e}();o.Rules=p},{"../enums/Actions":65,"../enums/States":68,"../logging/ConfigLog4j":69,"./ActiveRules":73,"./AllPossibleMoves":74,"./ExitedRules":75,"./HomeRules":76,"./OnWayOutRules":78}],81:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=e("typescript-collections"),r=e("../logging/ConfigLog4j"),i=(r.factory.getLogger("model.Scheduler"),function(){function e(e){this.schedule=new n.Queue,this.allPieces=new n.Dictionary,this.dice=e}return e.prototype.getNextPlayer=function(){var e=this.schedule.peek();return!1===e.previousDoubleSix?(this.dice.consumeDice(),e=this.schedule.dequeue(),e.unselectAllPiece(),e.turn=!1,this.schedule.enqueue(e),e=this.schedule.peek(),e.selectAllPiece(),e.turn=!0):e.previousDoubleSix=!1,e},e.prototype.enqueue=function(e){this.schedule.isEmpty()?(e.selectAllPiece(),this.schedule.enqueue(e)):(e.unselectAllPiece(),this.schedule.enqueue(e));for(var t=0,o=e.pieces;t<o.length;t++){var n=o[t];this.allPieces.setValue(n.uniqueId,n)}},e.prototype.getPieceByUniqueId=function(e){return this.allPieces.getValue(e)},e.prototype.getCurrentPlayer=function(){return this.schedule.peek()},e.prototype.getPieceOwner=function(e){var t=null;return this.schedule.forEach(function(o){o.pieceBelongsToMe(e)&&(t=o)}),t},e}());o.Scheduler=i},{"../logging/ConfigLog4j":69,"typescript-collections":29}],82:[function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("angular2-uuid"),i=e("../entities/AIPlayer"),s=e("../enums/ColorType"),a=e("../entities/ActiveBoard"),u=e("../entities/HomeBoard"),l=e("../entities/OnWayOutBoard"),c=e("../entities/ExitedBoard"),h=e("../rules/AllPossibleMoves"),p=e("../entities/Dice"),f=e("../logging/ConfigLog4j"),g=e("../rules/Scheduler"),d=e("../rules/RuleEnforcer"),y=e("../entities/Paths"),v=e("../enums/States"),m=f.factory.getLogger("model.Game"),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.create=function(){this.add.sprite(0,0,"board");var e=[s.ColorType.Red,s.ColorType.Blue],t=[s.ColorType.Green,s.ColorType.Yellow];this.signal=new Phaser.Signal;var o=new a.ActiveBoard(this.signal),n=new u.HomeBoard(this.signal),f=new l.OnWayOutBoard(this.signal),y=new c.ExitedBoard(this.signal),m=new h.AllPossibleMoves,_=this.make.button(763,540,"play",this.playDice,this,2,1,0),b=this.add.group();b.add(_);var I=this.make.button(770,440,"diceBtn",this.rollDice,this,2,1,0);I.alpha=.5,I.scale.x=.2,I.scale.y=.2,b.add(I),this.game.stage.disableVisibilityChange=!0;var w=r.UUID.UUID(),L=r.UUID.UUID();this.dice=new p.Dice(this.game,"die",this.signal,w,L),this.scheduler=new g.Scheduler(this.dice),this.enforcer=new d.RuleEnforcer(this.signal,this.scheduler,this.dice,o,n,f,y,m),this.playerOne=new i.AIPlayer(this.game,"PlayerOne",r.UUID.UUID(),!0,e,this.signal,this.enforcer),this.playerTwo=new i.AIPlayer(this.game,"PlayerTwo",r.UUID.UUID(),!1,t,this.signal,this.enforcer),this.scheduler.enqueue(this.playerOne),this.scheduler.enqueue(this.playerTwo),this.dice.setDicePlayerId(this.scheduler.getCurrentPlayer().playerId);for(var O=0,S=this.playerOne.pieces;O<S.length;O++){var E=S[O];n.addPieceToHomeBoard(E)}for(var C=0,P=this.playerTwo.pieces;C<P.length;C++){var E=P[C];n.addPieceToHomeBoard(E)}var A=this.playerOne.pieces[3];n.removePieceFromHomeBoard(A),this.setOnWayOutPieceParameters(A,1,v.States.onWayOut,f);var x=this.playerTwo.pieces[4];n.removePieceFromHomeBoard(x),this.setActivePieceParameters(x,28,v.States.Active,o);var T=this.playerTwo.pieces[1];n.removePieceFromHomeBoard(T),this.setOnWayOutPieceParameters(T,3,v.States.onWayOut,f);var N=this.playerTwo.pieces[7];n.removePieceFromHomeBoard(N),this.setActivePieceParameters(N,43,v.States.Active,o),this.scheduler.getCurrentPlayer().isAI&&this.signal.dispatch("aiRollDice",this.dice,this.scheduler.getCurrentPlayer().playerId)},t.prototype.rollDice=function(){this.dice.setDicePlayerId(this.enforcer.scheduler.getCurrentPlayer().playerId),this.enforcer.scheduler.getCurrentPlayer().roll(this.dice,5,5)},t.prototype.playDice=function(){var e=this.dice.getSelectedDiceUniqueIds(),t=this.scheduler.getCurrentPlayer();null!==t.currentSelectedPiece&&(this.dice.dieOne.isSelected()||this.dice.dieTwo.isSelected())?this.enforcer.generatePieceMovement(e,t.currentSelectedPiece):m.debug("No die selected or no piece selected")},t.prototype.update=function(){},t.prototype.setActivePieceParameters=function(e,t,o,n){var r=new y.ActivePath,i=r.getPiecePostionByIndex(t);e.setParameters(i.x,i.y,t,o),n.board.setValue(e.uniqueId,t)},t.prototype.setOnWayOutPieceParameters=function(e,t,o,n){var r=new y.OnWayOutPaths,i=r.getPiecePostionByIndex(e,t);e.setParameters(i.x,i.y,t,o),n.board.setValue(e.uniqueId,t)},t}(Phaser.State);o.Game=_},{"../entities/AIPlayer":51,"../entities/ActiveBoard":52,"../entities/Dice":54,"../entities/ExitedBoard":56,"../entities/HomeBoard":57,"../entities/OnWayOutBoard":58,"../entities/Paths":60,"../enums/ColorType":66,"../enums/States":68,"../logging/ConfigLog4j":69,"../rules/AllPossibleMoves":74,"../rules/RuleEnforcer":79,"../rules/Scheduler":81,"angular2-uuid":1}],83:[function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.preload=function(){this.load.spritesheet("red_piece","images/red.png",42,42,2),this.load.spritesheet("blue_piece","images/blue.png",42,42,2),this.load.spritesheet("green_piece","images/green.png",42,42,2),this.load.spritesheet("yellow_piece","images/yellow.png",42,42,2),this.load.spritesheet("die","images/dice.png",64,64),this.load.image("diceBtn","images/dicebtn.png"),this.load.image("play","images/playbutton.png"),this.load.image("board","images/board.jpg")},t.prototype.create=function(){this.startGame()},t.prototype.startGame=function(){this.game.state.start("Game",!0,!1)},t}(Phaser.State);o.Preloader=r},{}]},{},[70])(70)});
//# sourceMappingURL=ludo.min.js.map
