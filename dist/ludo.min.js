!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.ludo=t()}}(function(){var t;return function t(e,r,n){function o(s,a){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[s]={exports:{}};e[s][0].call(c.exports,function(t){var r=e[s][1][t];return o(r||t)},c,c.exports,t,e,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e,r){"use strict";var n=function(){function t(){}return t.UUID=function(){if("undefined"!=typeof window&&void 0!==window.crypto&&void 0!==window.crypto.getRandomValues){var t=new Uint16Array(8);return window.crypto.getRandomValues(t),this.pad4(t[0])+this.pad4(t[1])+"-"+this.pad4(t[2])+"-"+this.pad4(t[3])+"-"+this.pad4(t[4])+"-"+this.pad4(t[5])+this.pad4(t[6])+this.pad4(t[7])}return this.random4()+this.random4()+"-"+this.random4()+"-"+this.random4()+"-"+this.random4()+"-"+this.random4()+this.random4()+this.random4()},t.pad4=function(t){for(var e=t.toString(16);e.length<4;)e="0"+e;return e},t.random4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},t}();r.UUID=n},{}],2:[function(e,r,n){!function(o,i){"use strict";"function"==typeof t&&t.amd?t("error-stack-parser",["stackframe"],i):"object"==typeof n?r.exports=i(e("stackframe")):o.ErrorStackParser=i(o.StackFrame)}(this,function(t){"use strict";function e(t,e,r){if("function"==typeof Array.prototype.map)return t.map(e,r);for(var n=new Array(t.length),o=0;o<t.length;o++)n[o]=e.call(r,t[o]);return n}function r(t,e,r){if("function"==typeof Array.prototype.filter)return t.filter(e,r);for(var n=[],o=0;o<t.length;o++)e.call(r,t[o])&&n.push(t[o]);return n}function n(t,e){if("function"==typeof Array.prototype.indexOf)return t.indexOf(e);for(var r=0;r<t.length;r++)if(t[r]===e)return r;return-1}return{parse:function(t){if(void 0!==t.stacktrace||void 0!==t["opera#sourceloc"])return this.parseOpera(t);if(t.stack&&t.stack.match(/^\s*at .*(\S+\:\d+|\(native\))/m))return this.parseV8OrIE(t);if(t.stack)return this.parseFFOrSafari(t);throw new Error("Cannot parse given Error object")},extractLocation:function(t){if(-1===t.indexOf(":"))return[t];var e=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/,r=e.exec(t.replace(/[\(\)]/g,""));return[r[1],r[2]||void 0,r[3]||void 0]},parseV8OrIE:function(o){return e(r(o.stack.split("\n"),function(t){return!!t.match(/^\s*at .*(\S+\:\d+|\(native\))/m)},this),function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var r=e.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),o=this.extractLocation(r.pop()),i=r.join(" ")||void 0,s=n(["eval","<anonymous>"],o[0])>-1?void 0:o[0];return new t(i,void 0,s,o[1],o[2],e)},this)},parseFFOrSafari:function(n){return e(r(n.stack.split("\n"),function(t){return!t.match(/^(eval@)?(\[native code\])?$/)},this),function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return new t(e);var r=e.split("@"),n=this.extractLocation(r.pop()),o=r.join("@")||void 0;return new t(o,void 0,n[0],n[1],n[2],e)},this)},parseOpera:function(t){return!t.stacktrace||t.message.indexOf("\n")>-1&&t.message.split("\n").length>t.stacktrace.split("\n").length?this.parseOpera9(t):t.stack?this.parseOpera11(t):this.parseOpera10(t)},parseOpera9:function(e){for(var r=/Line (\d+).*script (?:in )?(\S+)/i,n=e.message.split("\n"),o=[],i=2,s=n.length;i<s;i+=2){var a=r.exec(n[i]);a&&o.push(new t(void 0,void 0,a[2],a[1],void 0,n[i]))}return o},parseOpera10:function(e){for(var r=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=e.stacktrace.split("\n"),o=[],i=0,s=n.length;i<s;i+=2){var a=r.exec(n[i]);a&&o.push(new t(a[3]||void 0,void 0,a[2],a[1],void 0,n[i]))}return o},parseOpera11:function(n){return e(r(n.stack.split("\n"),function(t){return!!t.match(/(^|@)\S+\:\d+/)&&!t.match(/^Error created at/)},this),function(e){var r,n=e.split("@"),o=this.extractLocation(n.pop()),i=n.shift()||"",s=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;i.match(/\(([^\)]*)\)/)&&(r=i.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var a=void 0===r||"[arguments not available]"===r?void 0:r.split(",");return new t(s,a,o[0],o[1],o[2],e)},this)}}})},{stackframe:5}],3:[function(e,r,n){!function(e,o){"use strict";"function"==typeof t&&t.amd?t("stackframe",[],o):"object"==typeof n?r.exports=o():e.StackFrame=o()}(this,function(){"use strict";function t(t){return!isNaN(parseFloat(t))&&isFinite(t)}function e(t){return t[0].toUpperCase()+t.substring(1)}function r(t){return function(){return this[t]}}function n(t){if(t instanceof Object)for(var r=o.concat(i.concat(s.concat(a))),n=0;n<r.length;n++)t.hasOwnProperty(r[n])&&void 0!==t[r[n]]&&this["set"+e(r[n])](t[r[n]])}var o=["isConstructor","isEval","isNative","isToplevel"],i=["columnNumber","lineNumber"],s=["fileName","functionName","source"],a=["args"];n.prototype={getArgs:function(){return this.args},setArgs:function(t){if("[object Array]"!==Object.prototype.toString.call(t))throw new TypeError("Args must be an Array");this.args=t},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(t){if(t instanceof n)this.evalOrigin=t;else{if(!(t instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new n(t)}},toString:function(){return(this.getFunctionName()||"{anonymous}")+"("+(this.getArgs()||[]).join(",")+")"+(this.getFileName()?"@"+this.getFileName():"")+(t(this.getLineNumber())?":"+this.getLineNumber():"")+(t(this.getColumnNumber())?":"+this.getColumnNumber():"")}};for(var u=0;u<o.length;u++)n.prototype["get"+e(o[u])]=r(o[u]),n.prototype["set"+e(o[u])]=function(t){return function(e){this[t]=Boolean(e)}}(o[u]);for(var l=0;l<i.length;l++)n.prototype["get"+e(i[l])]=r(i[l]),n.prototype["set"+e(i[l])]=function(e){return function(r){if(!t(r))throw new TypeError(e+" must be a Number");this[e]=Number(r)}}(i[l]);for(var c=0;c<s.length;c++)n.prototype["get"+e(s[c])]=r(s[c]),n.prototype["set"+e(s[c])]=function(t){return function(e){this[t]=String(e)}}(s[c]);return n})},{}],4:[function(e,r,n){!function(o,i){"use strict";"function"==typeof t&&t.amd?t("stack-generator",["stackframe"],i):"object"==typeof n?r.exports=i(e("stackframe")):o.StackGenerator=i(o.StackFrame)}(this,function(t){return{backtrace:function(e){var r=[],n=10;"object"==typeof e&&"number"==typeof e.maxStackSize&&(n=e.maxStackSize);for(var o=arguments.callee;o&&r.length<n;){for(var i=new Array(o.arguments.length),s=0;s<i.length;++s)i[s]=o.arguments[s];/function(?:\s+([\w$]+))+\s*\(/.test(o.toString())?r.push(new t({functionName:RegExp.$1||void 0,args:i})):r.push(new t({args:i}));try{o=o.caller}catch(t){break}}return r}}})},{stackframe:3}],5:[function(e,r,n){!function(e,o){"use strict";"function"==typeof t&&t.amd?t("stackframe",[],o):"object"==typeof n?r.exports=o():e.StackFrame=o()}(this,function(){"use strict";function t(t){return!isNaN(parseFloat(t))&&isFinite(t)}function e(t,e,r,n,o,i){void 0!==t&&this.setFunctionName(t),void 0!==e&&this.setArgs(e),void 0!==r&&this.setFileName(r),void 0!==n&&this.setLineNumber(n),void 0!==o&&this.setColumnNumber(o),void 0!==i&&this.setSource(i)}return e.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(t){this.functionName=String(t)},getArgs:function(){return this.args},setArgs:function(t){if("[object Array]"!==Object.prototype.toString.call(t))throw new TypeError("Args must be an Array");this.args=t},getFileName:function(){return this.fileName},setFileName:function(t){this.fileName=String(t)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(e){if(!t(e))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(e)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(e){if(!t(e))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(e)},getSource:function(){return this.source},setSource:function(t){this.source=String(t)},toString:function(){return(this.getFunctionName()||"{anonymous}")+"("+(this.getArgs()||[]).join(",")+")"+(this.getFileName()?"@"+this.getFileName():"")+(t(this.getLineNumber())?":"+this.getLineNumber():"")+(t(this.getColumnNumber())?":"+this.getColumnNumber():"")}},e})},{}],6:[function(t,e,r){function n(){this._array=[],this._set=Object.create(null)}var o=t("./util"),i=Object.prototype.hasOwnProperty;n.fromArray=function(t,e){for(var r=new n,o=0,i=t.length;o<i;o++)r.add(t[o],e);return r},n.prototype.size=function(){return Object.getOwnPropertyNames(this._set).length},n.prototype.add=function(t,e){var r=o.toSetString(t),n=i.call(this._set,r),s=this._array.length;n&&!e||this._array.push(t),n||(this._set[r]=s)},n.prototype.has=function(t){var e=o.toSetString(t);return i.call(this._set,e)},n.prototype.indexOf=function(t){var e=o.toSetString(t);if(i.call(this._set,e))return this._set[e];throw new Error('"'+t+'" is not in the set.')},n.prototype.at=function(t){if(t>=0&&t<this._array.length)return this._array[t];throw new Error("No element indexed by "+t)},n.prototype.toArray=function(){return this._array.slice()},r.ArraySet=n},{"./util":12}],7:[function(t,e,r){function n(t){return t<0?1+(-t<<1):0+(t<<1)}function o(t){var e=1==(1&t),r=t>>1;return e?-r:r}var i=t("./base64");r.encode=function(t){var e,r="",o=n(t);do{e=31&o,o>>>=5,o>0&&(e|=32),r+=i.encode(e)}while(o>0);return r},r.decode=function(t,e,r){var n,s,a=t.length,u=0,l=0;do{if(e>=a)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(s=i.decode(t.charCodeAt(e++))))throw new Error("Invalid base64 digit: "+t.charAt(e-1));n=!!(32&s),s&=31,u+=s<<l,l+=5}while(n);r.value=o(u),r.rest=e}},{"./base64":8}],8:[function(t,e,r){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");r.encode=function(t){if(0<=t&&t<n.length)return n[t];throw new TypeError("Must be between 0 and 63: "+t)},r.decode=function(t){return 65<=t&&t<=90?t-65:97<=t&&t<=122?t-97+26:48<=t&&t<=57?t-48+52:43==t?62:47==t?63:-1}},{}],9:[function(t,e,r){function n(t,e,o,i,s,a){var u=Math.floor((e-t)/2)+t,l=s(o,i[u],!0);return 0===l?u:l>0?e-u>1?n(u,e,o,i,s,a):a==r.LEAST_UPPER_BOUND?e<i.length?e:-1:u:u-t>1?n(t,u,o,i,s,a):a==r.LEAST_UPPER_BOUND?u:t<0?-1:t}r.GREATEST_LOWER_BOUND=1,r.LEAST_UPPER_BOUND=2,r.search=function(t,e,o,i){if(0===e.length)return-1;var s=n(-1,e.length,t,e,o,i||r.GREATEST_LOWER_BOUND);if(s<0)return-1;for(;s-1>=0&&0===o(e[s],e[s-1],!0);)--s;return s}},{}],10:[function(t,e,r){function n(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function o(t,e){return Math.round(t+Math.random()*(e-t))}function i(t,e,r,s){if(r<s){var a=o(r,s),u=r-1;n(t,a,s);for(var l=t[s],c=r;c<s;c++)e(t[c],l)<=0&&(u+=1,n(t,u,c));n(t,u+1,c);var p=u+1;i(t,e,r,p-1),i(t,e,p+1,s)}}r.quickSort=function(t,e){i(t,e,0,t.length-1)}},{}],11:[function(t,e,r){function n(t){var e=t;return"string"==typeof t&&(e=JSON.parse(t.replace(/^\)\]\}'/,""))),null!=e.sections?new s(e):new o(e)}function o(t){var e=t;"string"==typeof t&&(e=JSON.parse(t.replace(/^\)\]\}'/,"")));var r=a.getArg(e,"version"),n=a.getArg(e,"sources"),o=a.getArg(e,"names",[]),i=a.getArg(e,"sourceRoot",null),s=a.getArg(e,"sourcesContent",null),u=a.getArg(e,"mappings"),c=a.getArg(e,"file",null);if(r!=this._version)throw new Error("Unsupported version: "+r);n=n.map(String).map(a.normalize).map(function(t){return i&&a.isAbsolute(i)&&a.isAbsolute(t)?a.relative(i,t):t}),this._names=l.fromArray(o.map(String),!0),this._sources=l.fromArray(n,!0),this.sourceRoot=i,this.sourcesContent=s,this._mappings=u,this.file=c}function i(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function s(t){var e=t;"string"==typeof t&&(e=JSON.parse(t.replace(/^\)\]\}'/,"")));var r=a.getArg(e,"version"),o=a.getArg(e,"sections");if(r!=this._version)throw new Error("Unsupported version: "+r);this._sources=new l,this._names=new l;var i={line:-1,column:0};this._sections=o.map(function(t){if(t.url)throw new Error("Support for url field in sections not implemented.");var e=a.getArg(t,"offset"),r=a.getArg(e,"line"),o=a.getArg(e,"column");if(r<i.line||r===i.line&&o<i.column)throw new Error("Section offsets must be ordered and non-overlapping.");return i=e,{generatedOffset:{generatedLine:r+1,generatedColumn:o+1},consumer:new n(a.getArg(t,"map"))}})}var a=t("./util"),u=t("./binary-search"),l=t("./array-set").ArraySet,c=t("./base64-vlq"),p=t("./quick-sort").quickSort;n.fromSourceMap=function(t){return o.fromSourceMap(t)},n.prototype._version=3,n.prototype.__generatedMappings=null,Object.defineProperty(n.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),n.prototype.__originalMappings=null,Object.defineProperty(n.prototype,"_originalMappings",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),n.prototype._charIsMappingSeparator=function(t,e){var r=t.charAt(e);return";"===r||","===r},n.prototype._parseMappings=function(t,e){throw new Error("Subclasses must implement _parseMappings")},n.GENERATED_ORDER=1,n.ORIGINAL_ORDER=2,n.GREATEST_LOWER_BOUND=1,n.LEAST_UPPER_BOUND=2,n.prototype.eachMapping=function(t,e,r){var o,i=e||null,s=r||n.GENERATED_ORDER;switch(s){case n.GENERATED_ORDER:o=this._generatedMappings;break;case n.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var u=this.sourceRoot;o.map(function(t){var e=null===t.source?null:this._sources.at(t.source);return null!=e&&null!=u&&(e=a.join(u,e)),{source:e,generatedLine:t.generatedLine,generatedColumn:t.generatedColumn,originalLine:t.originalLine,originalColumn:t.originalColumn,name:null===t.name?null:this._names.at(t.name)}},this).forEach(t,i)},n.prototype.allGeneratedPositionsFor=function(t){var e=a.getArg(t,"line"),r={source:a.getArg(t,"source"),originalLine:e,originalColumn:a.getArg(t,"column",0)};if(null!=this.sourceRoot&&(r.source=a.relative(this.sourceRoot,r.source)),!this._sources.has(r.source))return[];r.source=this._sources.indexOf(r.source);var n=[],o=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",a.compareByOriginalPositions,u.LEAST_UPPER_BOUND);if(o>=0){var i=this._originalMappings[o];if(void 0===t.column)for(var s=i.originalLine;i&&i.originalLine===s;)n.push({line:a.getArg(i,"generatedLine",null),column:a.getArg(i,"generatedColumn",null),lastColumn:a.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[++o];else for(var l=i.originalColumn;i&&i.originalLine===e&&i.originalColumn==l;)n.push({line:a.getArg(i,"generatedLine",null),column:a.getArg(i,"generatedColumn",null),lastColumn:a.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[++o]}return n},r.SourceMapConsumer=n,o.prototype=Object.create(n.prototype),o.prototype.consumer=n,o.fromSourceMap=function(t){var e=Object.create(o.prototype),r=e._names=l.fromArray(t._names.toArray(),!0),n=e._sources=l.fromArray(t._sources.toArray(),!0);e.sourceRoot=t._sourceRoot,e.sourcesContent=t._generateSourcesContent(e._sources.toArray(),e.sourceRoot),e.file=t._file;for(var s=t._mappings.toArray().slice(),u=e.__generatedMappings=[],c=e.__originalMappings=[],f=0,g=s.length;f<g;f++){var h=s[f],d=new i;d.generatedLine=h.generatedLine,d.generatedColumn=h.generatedColumn,h.source&&(d.source=n.indexOf(h.source),d.originalLine=h.originalLine,d.originalColumn=h.originalColumn,h.name&&(d.name=r.indexOf(h.name)),c.push(d)),u.push(d)}return p(e.__originalMappings,a.compareByOriginalPositions),e},o.prototype._version=3,Object.defineProperty(o.prototype,"sources",{get:function(){return this._sources.toArray().map(function(t){return null!=this.sourceRoot?a.join(this.sourceRoot,t):t},this)}}),o.prototype._parseMappings=function(t,e){for(var r,n,o,s,u,l=1,f=0,g=0,h=0,d=0,y=0,m=t.length,v=0,_={},L={},w=[],E=[];v<m;)if(";"===t.charAt(v))l++,v++,f=0;else if(","===t.charAt(v))v++;else{for(r=new i,r.generatedLine=l,s=v;s<m&&!this._charIsMappingSeparator(t,s);s++);if(n=t.slice(v,s),o=_[n])v+=n.length;else{for(o=[];v<s;)c.decode(t,v,L),u=L.value,v=L.rest,o.push(u);if(2===o.length)throw new Error("Found a source, but no line and column");if(3===o.length)throw new Error("Found a source and line, but no column");_[n]=o}r.generatedColumn=f+o[0],f=r.generatedColumn,o.length>1&&(r.source=d+o[1],d+=o[1],r.originalLine=g+o[2],g=r.originalLine,r.originalLine+=1,r.originalColumn=h+o[3],h=r.originalColumn,o.length>4&&(r.name=y+o[4],y+=o[4])),E.push(r),"number"==typeof r.originalLine&&w.push(r)}p(E,a.compareByGeneratedPositionsDeflated),this.__generatedMappings=E,p(w,a.compareByOriginalPositions),this.__originalMappings=w},o.prototype._findMapping=function(t,e,r,n,o,i){if(t[r]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+t[r]);if(t[n]<0)throw new TypeError("Column must be greater than or equal to 0, got "+t[n]);return u.search(t,e,o,i)},o.prototype.computeColumnSpans=function(){for(var t=0;t<this._generatedMappings.length;++t){var e=this._generatedMappings[t];if(t+1<this._generatedMappings.length){var r=this._generatedMappings[t+1];if(e.generatedLine===r.generatedLine){e.lastGeneratedColumn=r.generatedColumn-1;continue}}e.lastGeneratedColumn=1/0}},o.prototype.originalPositionFor=function(t){var e={generatedLine:a.getArg(t,"line"),generatedColumn:a.getArg(t,"column")},r=this._findMapping(e,this._generatedMappings,"generatedLine","generatedColumn",a.compareByGeneratedPositionsDeflated,a.getArg(t,"bias",n.GREATEST_LOWER_BOUND));if(r>=0){var o=this._generatedMappings[r];if(o.generatedLine===e.generatedLine){var i=a.getArg(o,"source",null);null!==i&&(i=this._sources.at(i),null!=this.sourceRoot&&(i=a.join(this.sourceRoot,i)));var s=a.getArg(o,"name",null);return null!==s&&(s=this._names.at(s)),{source:i,line:a.getArg(o,"originalLine",null),column:a.getArg(o,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}},o.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(t){return null==t}))},o.prototype.sourceContentFor=function(t,e){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(t=a.relative(this.sourceRoot,t)),this._sources.has(t))return this.sourcesContent[this._sources.indexOf(t)];var r;if(null!=this.sourceRoot&&(r=a.urlParse(this.sourceRoot))){var n=t.replace(/^file:\/\//,"");if("file"==r.scheme&&this._sources.has(n))return this.sourcesContent[this._sources.indexOf(n)];if((!r.path||"/"==r.path)&&this._sources.has("/"+t))return this.sourcesContent[this._sources.indexOf("/"+t)]}if(e)return null;throw new Error('"'+t+'" is not in the SourceMap.')},o.prototype.generatedPositionFor=function(t){var e=a.getArg(t,"source");if(null!=this.sourceRoot&&(e=a.relative(this.sourceRoot,e)),!this._sources.has(e))return{line:null,column:null,lastColumn:null};e=this._sources.indexOf(e);var r={source:e,originalLine:a.getArg(t,"line"),originalColumn:a.getArg(t,"column")},o=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",a.compareByOriginalPositions,a.getArg(t,"bias",n.GREATEST_LOWER_BOUND));if(o>=0){var i=this._originalMappings[o];if(i.source===r.source)return{line:a.getArg(i,"generatedLine",null),column:a.getArg(i,"generatedColumn",null),lastColumn:a.getArg(i,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},r.BasicSourceMapConsumer=o,s.prototype=Object.create(n.prototype),s.prototype.constructor=n,s.prototype._version=3,Object.defineProperty(s.prototype,"sources",{get:function(){for(var t=[],e=0;e<this._sections.length;e++)for(var r=0;r<this._sections[e].consumer.sources.length;r++)t.push(this._sections[e].consumer.sources[r]);return t}}),s.prototype.originalPositionFor=function(t){var e={generatedLine:a.getArg(t,"line"),generatedColumn:a.getArg(t,"column")},r=u.search(e,this._sections,function(t,e){var r=t.generatedLine-e.generatedOffset.generatedLine;return r||t.generatedColumn-e.generatedOffset.generatedColumn}),n=this._sections[r];return n?n.consumer.originalPositionFor({line:e.generatedLine-(n.generatedOffset.generatedLine-1),column:e.generatedColumn-(n.generatedOffset.generatedLine===e.generatedLine?n.generatedOffset.generatedColumn-1:0),bias:t.bias}):{source:null,line:null,column:null,name:null}},s.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(t){return t.consumer.hasContentsOfAllSources()})},s.prototype.sourceContentFor=function(t,e){for(var r=0;r<this._sections.length;r++){var n=this._sections[r],o=n.consumer.sourceContentFor(t,!0);if(o)return o}if(e)return null;throw new Error('"'+t+'" is not in the SourceMap.')},s.prototype.generatedPositionFor=function(t){for(var e=0;e<this._sections.length;e++){var r=this._sections[e];if(-1!==r.consumer.sources.indexOf(a.getArg(t,"source"))){var n=r.consumer.generatedPositionFor(t);if(n){return{line:n.line+(r.generatedOffset.generatedLine-1),column:n.column+(r.generatedOffset.generatedLine===n.line?r.generatedOffset.generatedColumn-1:0)}}}}return{line:null,column:null}},s.prototype._parseMappings=function(t,e){this.__generatedMappings=[],this.__originalMappings=[];for(var r=0;r<this._sections.length;r++)for(var n=this._sections[r],o=n.consumer._generatedMappings,i=0;i<o.length;i++){var s=o[i],u=n.consumer._sources.at(s.source);null!==n.consumer.sourceRoot&&(u=a.join(n.consumer.sourceRoot,u)),this._sources.add(u),u=this._sources.indexOf(u);var l=n.consumer._names.at(s.name);this._names.add(l),l=this._names.indexOf(l);var c={source:u,generatedLine:s.generatedLine+(n.generatedOffset.generatedLine-1),generatedColumn:s.generatedColumn+(n.generatedOffset.generatedLine===s.generatedLine?n.generatedOffset.generatedColumn-1:0),originalLine:s.originalLine,originalColumn:s.originalColumn,name:l};this.__generatedMappings.push(c),"number"==typeof c.originalLine&&this.__originalMappings.push(c)}p(this.__generatedMappings,a.compareByGeneratedPositionsDeflated),p(this.__originalMappings,a.compareByOriginalPositions)},r.IndexedSourceMapConsumer=s},{"./array-set":6,"./base64-vlq":7,"./binary-search":9,"./quick-sort":10,"./util":12}],12:[function(t,e,r){function n(t,e,r){if(e in t)return t[e];if(3===arguments.length)return r;throw new Error('"'+e+'" is a required argument.')}function o(t){var e=t.match(m);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}function i(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}function s(t){var e=t,n=o(t);if(n){if(!n.path)return t;e=n.path}for(var s,a=r.isAbsolute(e),u=e.split(/\/+/),l=0,c=u.length-1;c>=0;c--)s=u[c],"."===s?u.splice(c,1):".."===s?l++:l>0&&(""===s?(u.splice(c+1,l),l=0):(u.splice(c,2),l--));return e=u.join("/"),""===e&&(e=a?"/":"."),n?(n.path=e,i(n)):e}function a(t,e){""===t&&(t="."),""===e&&(e=".");var r=o(e),n=o(t);if(n&&(t=n.path||"/"),r&&!r.scheme)return n&&(r.scheme=n.scheme),i(r);if(r||e.match(v))return e;if(n&&!n.host&&!n.path)return n.host=e,i(n);var a="/"===e.charAt(0)?e:s(t.replace(/\/+$/,"")+"/"+e);return n?(n.path=a,i(n)):a}function u(t,e){""===t&&(t="."),t=t.replace(/\/$/,"");for(var r=0;0!==e.indexOf(t+"/");){var n=t.lastIndexOf("/");if(n<0)return e;if(t=t.slice(0,n),t.match(/^([^\/]+:\/)?\/*$/))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}function l(t){return t}function c(t){return f(t)?"$"+t:t}function p(t){return f(t)?t.slice(1):t}function f(t){if(!t)return!1;var e=t.length;if(e<9)return!1;if(95!==t.charCodeAt(e-1)||95!==t.charCodeAt(e-2)||111!==t.charCodeAt(e-3)||116!==t.charCodeAt(e-4)||111!==t.charCodeAt(e-5)||114!==t.charCodeAt(e-6)||112!==t.charCodeAt(e-7)||95!==t.charCodeAt(e-8)||95!==t.charCodeAt(e-9))return!1;for(var r=e-10;r>=0;r--)if(36!==t.charCodeAt(r))return!1;return!0}function g(t,e,r){var n=t.source-e.source;return 0!==n?n:0!==(n=t.originalLine-e.originalLine)?n:0!==(n=t.originalColumn-e.originalColumn)||r?n:0!==(n=t.generatedColumn-e.generatedColumn)?n:(n=t.generatedLine-e.generatedLine,0!==n?n:t.name-e.name)}function h(t,e,r){var n=t.generatedLine-e.generatedLine;return 0!==n?n:0!==(n=t.generatedColumn-e.generatedColumn)||r?n:0!==(n=t.source-e.source)?n:0!==(n=t.originalLine-e.originalLine)?n:(n=t.originalColumn-e.originalColumn,0!==n?n:t.name-e.name)}function d(t,e){return t===e?0:t>e?1:-1}function y(t,e){var r=t.generatedLine-e.generatedLine;return 0!==r?r:0!==(r=t.generatedColumn-e.generatedColumn)?r:0!==(r=d(t.source,e.source))?r:0!==(r=t.originalLine-e.originalLine)?r:(r=t.originalColumn-e.originalColumn,0!==r?r:d(t.name,e.name))}r.getArg=n;var m=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,v=/^data:.+\,.+$/;r.urlParse=o,r.urlGenerate=i,r.normalize=s,r.join=a,r.isAbsolute=function(t){return"/"===t.charAt(0)||!!t.match(m)},r.relative=u;var _=function(){return!("__proto__"in Object.create(null))}();r.toSetString=_?l:c,r.fromSetString=_?l:p,r.compareByOriginalPositions=g,r.compareByGeneratedPositionsDeflated=h,r.compareByGeneratedPositionsInflated=y},{}],13:[function(e,r,n){!function(o,i){"use strict";"function"==typeof t&&t.amd?t("stacktrace-gps",["source-map","stackframe"],i):"object"==typeof n?r.exports=i(e("source-map/lib/source-map-consumer"),e("stackframe")):o.StackTraceGPS=i(o.SourceMap||o.sourceMap,o.StackFrame)}(this,function(t,e){"use strict";function r(t){return new Promise(function(e,r){var n=new XMLHttpRequest;n.open("get",t),n.onerror=r,n.onreadystatechange=function(){4===n.readyState&&(n.status>=200&&n.status<300?e(n.responseText):r(new Error("HTTP status: "+n.status+" retrieving "+t)))},n.send()})}function n(t){if("undefined"!=typeof window&&window.atob)return window.atob(t);throw new Error("You must supply a polyfill for window.atob in this environment")}function o(t){if("undefined"!=typeof JSON&&JSON.parse)return JSON.parse(t);throw new Error("You must supply a polyfill for JSON.parse in this environment")}function i(t,e){for(var r,n=/function\s+([^(]*?)\s*\(([^)]*)\)/,o=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,i=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,s=t.split("\n"),a="",u=Math.min(e,20),l=0;l<u;++l){var c=s[e-l-1],p=c.indexOf("//");if(p>=0&&(c=c.substr(0,p)),c){if(a=c+a,(r=o.exec(a))&&r[1])return r[1];if((r=n.exec(a))&&r[1])return r[1];if((r=i.exec(a))&&r[1])return r[1]}}}function s(){if("function"!=typeof Object.defineProperty||"function"!=typeof Object.create)throw new Error("Unable to consume source maps in older browsers")}function a(t){if("object"!=typeof t)throw new TypeError("Given StackFrame is not an object");if("string"!=typeof t.fileName)throw new TypeError("Given file name is not a String");if("number"!=typeof t.lineNumber||t.lineNumber%1!=0||t.lineNumber<1)throw new TypeError("Given line number must be a positive integer");if("number"!=typeof t.columnNumber||t.columnNumber%1!=0||t.columnNumber<0)throw new TypeError("Given column number must be a non-negative integer");return!0}function u(t){var e=/\/\/[#@] ?sourceMappingURL=([^\s'"]+)\s*$/.exec(t);if(e&&e[1])return e[1];throw new Error("sourceMappingURL not found")}function l(r,n,o){return new Promise(function(i,s){var a=new t.SourceMapConsumer(n),u=a.originalPositionFor({line:r.lineNumber,column:r.columnNumber});if(u.source){var l=a.sourceContentFor(u.source);l&&(o[u.source]=l),i(new e(u.name||r.functionName,r.args,u.source,u.line,u.column))}else s(new Error("Could not get original source for given stackframe and source map"))})}return function t(c){if(!(this instanceof t))return new t(c);c=c||{},this.sourceCache=c.sourceCache||{},this.ajax=c.ajax||r,this._atob=c.atob||n,this._get=function(t){return new Promise(function(e,r){var n="data:"===t.substr(0,5);if(this.sourceCache[t])e(this.sourceCache[t]);else if(c.offline&&!n)r(new Error("Cannot make network requests in offline mode"));else if(n){var o=t.match(/^data:application\/json;([\w=:"-]+;)*base64,/);if(o){var i=o[0].length,s=t.substr(i),a=this._atob(s);this.sourceCache[t]=a,e(a)}else r(new Error("The encoding of the inline sourcemap is not supported"))}else{var u=this.ajax(t,{method:"get"});this.sourceCache[t]=u,u.then(e,r)}}.bind(this))},this.pinpoint=function(t){return new Promise(function(e,r){this.getMappedLocation(t).then(function(t){function r(){e(t)}this.findFunctionName(t).then(e,r).catch(r)}.bind(this),r)}.bind(this))},this.findFunctionName=function(t){return new Promise(function(r,n){a(t),this._get(t.fileName).then(function(n){var o=t.lineNumber,s=t.columnNumber,a=i(n,o);r(a?new e(a,t.args,t.fileName,o,s):t)},n).catch(n)}.bind(this))},this.getMappedLocation=function(t){return new Promise(function(e,r){s(),a(t);var n=this.sourceCache,i=t.fileName;this._get(i).then(function(s){var a=u(s),c="data:"===a.substr(0,5),p=i.substring(0,i.lastIndexOf("/")+1);"/"===a[0]||c||/^https?:\/\/|^\/\//i.test(a)||(a=p+a),this._get(a).then(function(r){"string"==typeof r&&(r=o(r.replace(/^\)\]\}'/,""))),void 0===r.sourceRoot&&(r.sourceRoot=p),l(t,r,n).then(e).catch(function(){e(t)})},r).catch(r)}.bind(this),r).catch(r)}.bind(this))}}})},{"source-map/lib/source-map-consumer":11,stackframe:5}],14:[function(e,r,n){!function(o,i){"use strict";"function"==typeof t&&t.amd?t("stacktrace",["error-stack-parser","stack-generator","stacktrace-gps"],i):"object"==typeof n?r.exports=i(e("error-stack-parser"),e("stack-generator"),e("stacktrace-gps")):o.StackTrace=i(o.ErrorStackParser,o.StackGenerator,o.StackTraceGPS)}(this,function(t,e,r){function n(t,e){var r={};return[t,e].forEach(function(t){for(var e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);return r}),r}function o(t){return t.stack||t["opera#sourceloc"]}function i(t,e){return"function"==typeof e?t.filter(e):t}var s={filter:function(t){return-1===(t.functionName||"").indexOf("StackTrace$$")&&-1===(t.functionName||"").indexOf("ErrorStackParser$$")&&-1===(t.functionName||"").indexOf("StackTraceGPS$$")&&-1===(t.functionName||"").indexOf("StackGenerator$$")},sourceCache:{}},a=function(){try{throw new Error}catch(t){return t}};return{get:function(t){var e=a();return o(e)?this.fromError(e,t):this.generateArtificially(t)},getSync:function(r){r=n(s,r);var u=a();return i(o(u)?t.parse(u):e.backtrace(r),r.filter)},fromError:function(e,o){o=n(s,o);var a=new r(o);return new Promise(function(r){var n=i(t.parse(e),o.filter);r(Promise.all(n.map(function(t){return new Promise(function(e){function r(){e(t)}a.pinpoint(t).then(e,r).catch(r)})})))}.bind(this))},generateArtificially:function(t){t=n(s,t);var r=e.backtrace(t);return"function"==typeof t.filter&&(r=r.filter(t.filter)),Promise.resolve(r)},instrument:function(t,e,r,n){if("function"!=typeof t)throw new Error("Cannot instrument non-function object");if("function"==typeof t.__stacktraceOriginalFn)return t;var i=function(){try{return this.get().then(e,r).catch(r),t.apply(n||this,arguments)}catch(t){throw o(t)&&this.fromError(t).then(e,r).catch(r),t}}.bind(this);return i.__stacktraceOriginalFn=t,i},deinstrument:function(t){if("function"!=typeof t)throw new Error("Cannot de-instrument non-function object");return"function"==typeof t.__stacktraceOriginalFn?t.__stacktraceOriginalFn:t},report:function(t,e,r){return new Promise(function(n,o){var i=new XMLHttpRequest;i.onerror=o,i.onreadystatechange=function(){4===i.readyState&&(i.status>=200&&i.status<400?n(i.responseText):o(new Error("POST to "+e+" failed with status: "+i.status)))},i.open("post",e),i.setRequestHeader("Content-Type","application/json");var s={stack:t};void 0!==r&&(s.message=r),i.send(JSON.stringify(s))})
}}})},{"error-stack-parser":2,"stack-generator":4,"stacktrace-gps":13}],15:[function(t,e,r){"use strict";var n=t("./util"),o=t("./Queue"),i=function(){function t(t){this.root=null,this.compare=t||n.defaultCompare,this.nElements=0}return t.prototype.add=function(t){return!n.isUndefined(t)&&(null!==this.insertNode(this.createNode(t))&&(this.nElements++,!0))},t.prototype.clear=function(){this.root=null,this.nElements=0},t.prototype.isEmpty=function(){return 0===this.nElements},t.prototype.size=function(){return this.nElements},t.prototype.contains=function(t){return!n.isUndefined(t)&&null!==this.searchNode(this.root,t)},t.prototype.remove=function(t){var e=this.searchNode(this.root,t);return null!==e&&(this.removeNode(e),this.nElements--,!0)},t.prototype.inorderTraversal=function(t){this.inorderTraversalAux(this.root,t,{stop:!1})},t.prototype.preorderTraversal=function(t){this.preorderTraversalAux(this.root,t,{stop:!1})},t.prototype.postorderTraversal=function(t){this.postorderTraversalAux(this.root,t,{stop:!1})},t.prototype.levelTraversal=function(t){this.levelTraversalAux(this.root,t)},t.prototype.minimum=function(){if(!this.isEmpty())return this.minimumAux(this.root).element},t.prototype.maximum=function(){if(!this.isEmpty())return this.maximumAux(this.root).element},t.prototype.forEach=function(t){this.inorderTraversal(t)},t.prototype.toArray=function(){var t=[];return this.inorderTraversal(function(e){return t.push(e),!0}),t},t.prototype.height=function(){return this.heightAux(this.root)},t.prototype.searchNode=function(t,e){for(var r=null;null!==t&&0!==r;)r=this.compare(e,t.element),r<0?t=t.leftCh:r>0&&(t=t.rightCh);return t},t.prototype.transplant=function(t,e){null===t.parent?this.root=e:t===t.parent.leftCh?t.parent.leftCh=e:t.parent.rightCh=e,null!==e&&(e.parent=t.parent)},t.prototype.removeNode=function(t){if(null===t.leftCh)this.transplant(t,t.rightCh);else if(null===t.rightCh)this.transplant(t,t.leftCh);else{var e=this.minimumAux(t.rightCh);e.parent!==t&&(this.transplant(e,e.rightCh),e.rightCh=t.rightCh,e.rightCh.parent=e),this.transplant(t,e),e.leftCh=t.leftCh,e.leftCh.parent=e}},t.prototype.inorderTraversalAux=function(t,e,r){null===t||r.stop||(this.inorderTraversalAux(t.leftCh,e,r),r.stop||(r.stop=!1===e(t.element),r.stop||this.inorderTraversalAux(t.rightCh,e,r)))},t.prototype.levelTraversalAux=function(t,e){var r=new o.default;for(null!==t&&r.enqueue(t);!r.isEmpty();){if(t=r.dequeue(),!1===e(t.element))return;null!==t.leftCh&&r.enqueue(t.leftCh),null!==t.rightCh&&r.enqueue(t.rightCh)}},t.prototype.preorderTraversalAux=function(t,e,r){null===t||r.stop||(r.stop=!1===e(t.element),r.stop||(this.preorderTraversalAux(t.leftCh,e,r),r.stop||this.preorderTraversalAux(t.rightCh,e,r)))},t.prototype.postorderTraversalAux=function(t,e,r){null===t||r.stop||(this.postorderTraversalAux(t.leftCh,e,r),r.stop||(this.postorderTraversalAux(t.rightCh,e,r),r.stop||(r.stop=!1===e(t.element))))},t.prototype.minimumAux=function(t){for(;null!==t.leftCh;)t=t.leftCh;return t},t.prototype.maximumAux=function(t){for(;null!==t.rightCh;)t=t.rightCh;return t},t.prototype.heightAux=function(t){return null===t?-1:Math.max(this.heightAux(t.leftCh),this.heightAux(t.rightCh))+1},t.prototype.insertNode=function(t){for(var e=null,r=this.root,n=null;null!==r;){if(0===(n=this.compare(t.element,r.element)))return null;n<0?(e=r,r=r.leftCh):(e=r,r=r.rightCh)}return t.parent=e,null===e?this.root=t:this.compare(t.element,e.element)<0?e.leftCh=t:e.rightCh=t,t},t.prototype.createNode=function(t){return{element:t,leftCh:null,rightCh:null,parent:null}},t}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=i},{"./Queue":25,"./util":30}],16:[function(t,e,r){"use strict";var n=t("./util"),o=t("./Dictionary"),i=t("./Set"),s=function(){function t(t){this.toStrF=t||n.defaultToString,this.dictionary=new o.default(this.toStrF),this.nElements=0}return t.prototype.add=function(t,e){if(void 0===e&&(e=1),n.isUndefined(t)||e<=0)return!1;if(this.contains(t))this.dictionary.getValue(t).copies+=e;else{var r={value:t,copies:e};this.dictionary.setValue(t,r)}return this.nElements+=e,!0},t.prototype.count=function(t){return this.contains(t)?this.dictionary.getValue(t).copies:0},t.prototype.contains=function(t){return this.dictionary.containsKey(t)},t.prototype.remove=function(t,e){if(void 0===e&&(e=1),n.isUndefined(t)||e<=0)return!1;if(this.contains(t)){var r=this.dictionary.getValue(t);return e>r.copies?this.nElements-=r.copies:this.nElements-=e,r.copies-=e,r.copies<=0&&this.dictionary.remove(t),!0}return!1},t.prototype.toArray=function(){for(var t=[],e=this.dictionary.values(),r=0,n=e;r<n.length;r++)for(var o=n[r],i=o.value,s=o.copies,a=0;a<s;a++)t.push(i);return t},t.prototype.toSet=function(){for(var t=new i.default(this.toStrF),e=this.dictionary.values(),r=0,n=e;r<n.length;r++){var o=n[r],s=o.value;t.add(s)}return t},t.prototype.forEach=function(t){this.dictionary.forEach(function(e,r){for(var n=r.value,o=r.copies,i=0;i<o;i++)if(!1===t(n))return!1;return!0})},t.prototype.size=function(){return this.nElements},t.prototype.isEmpty=function(){return 0===this.nElements},t.prototype.clear=function(){this.nElements=0,this.dictionary.clear()},t}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=s},{"./Dictionary":17,"./Set":26,"./util":30}],17:[function(t,e,r){"use strict";var n=t("./util"),o=function(){function t(t){this.table={},this.nElements=0,this.toStr=t||n.defaultToString}return t.prototype.getValue=function(t){var e=this.table["$"+this.toStr(t)];if(!n.isUndefined(e))return e.value},t.prototype.setValue=function(t,e){if(!n.isUndefined(t)&&!n.isUndefined(e)){var r,o="$"+this.toStr(t),i=this.table[o];return n.isUndefined(i)?(this.nElements++,r=void 0):r=i.value,this.table[o]={key:t,value:e},r}},t.prototype.remove=function(t){var e="$"+this.toStr(t),r=this.table[e];if(!n.isUndefined(r))return delete this.table[e],this.nElements--,r.value},t.prototype.keys=function(){var t=[];for(var e in this.table)if(n.has(this.table,e)){var r=this.table[e];t.push(r.key)}return t},t.prototype.values=function(){var t=[];for(var e in this.table)if(n.has(this.table,e)){var r=this.table[e];t.push(r.value)}return t},t.prototype.forEach=function(t){for(var e in this.table)if(n.has(this.table,e)){var r=this.table[e],o=t(r.key,r.value);if(!1===o)return}},t.prototype.containsKey=function(t){return!n.isUndefined(this.getValue(t))},t.prototype.clear=function(){this.table={},this.nElements=0},t.prototype.size=function(){return this.nElements},t.prototype.isEmpty=function(){return this.nElements<=0},t.prototype.toString=function(){var t="{";return this.forEach(function(e,r){t+="\n\t"+e+" : "+r}),t+"\n}"},t}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{"./util":30}],18:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=t("./Dictionary"),i=t("./util"),s=function(t){function e(e,r){t.call(this,r),this.defaultFactoryFunction=e}return n(e,t),e.prototype.setDefault=function(e,r){var n=t.prototype.getValue.call(this,e);return i.isUndefined(n)?(this.setValue(e,r),r):n},e.prototype.getValue=function(t){return this.setDefault(t,this.defaultFactoryFunction())},e}(o.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=s},{"./Dictionary":17,"./util":30}],19:[function(t,e,r){"use strict";var n=t("./util"),o=t("./arrays"),i=function(){function t(t){this.data=[],this.compare=t||n.defaultCompare}return t.prototype.leftChildIndex=function(t){return 2*t+1},t.prototype.rightChildIndex=function(t){return 2*t+2},t.prototype.parentIndex=function(t){return Math.floor((t-1)/2)},t.prototype.minIndex=function(t,e){return e>=this.data.length?t>=this.data.length?-1:t:this.compare(this.data[t],this.data[e])<=0?t:e},t.prototype.siftUp=function(t){for(var e=this.parentIndex(t);t>0&&this.compare(this.data[e],this.data[t])>0;)o.swap(this.data,e,t),t=e,e=this.parentIndex(t)},t.prototype.siftDown=function(t){for(var e=this.minIndex(this.leftChildIndex(t),this.rightChildIndex(t));e>=0&&this.compare(this.data[t],this.data[e])>0;)o.swap(this.data,e,t),t=e,e=this.minIndex(this.leftChildIndex(t),this.rightChildIndex(t))},t.prototype.peek=function(){return this.data.length>0?this.data[0]:void 0},t.prototype.add=function(t){if(!n.isUndefined(t))return this.data.push(t),this.siftUp(this.data.length-1),!0},t.prototype.removeRoot=function(){if(this.data.length>0){var t=this.data[0];return this.data[0]=this.data[this.data.length-1],this.data.splice(this.data.length-1,1),this.data.length>0&&this.siftDown(0),t}},t.prototype.contains=function(t){var e=n.compareToEquals(this.compare);return o.contains(this.data,t,e)},t.prototype.size=function(){return this.data.length},t.prototype.isEmpty=function(){return this.data.length<=0},t.prototype.clear=function(){this.data.length=0},t.prototype.forEach=function(t){o.forEach(this.data,t)},t}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=i},{"./arrays":28,"./util":30}],20:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=t("./Dictionary"),i=t("./util"),s=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},t}(),a=function(t){function e(e){t.call(this,e),this.head=new s(null,null),this.tail=new s(null,null),this.head.next=this.tail,this.tail.prev=this.head}return n(e,t),e.prototype.appendToTail=function(t){var e=this.tail.prev;e.next=t,t.prev=e,t.next=this.tail,this.tail.prev=t},e.prototype.getLinkedDictionaryPair=function(t){if(!i.isUndefined(t)){var e="$"+this.toStr(t);return this.table[e]}},e.prototype.getValue=function(t){var e=this.getLinkedDictionaryPair(t);if(!i.isUndefined(e))return e.value},e.prototype.remove=function(e){var r=this.getLinkedDictionaryPair(e);if(!i.isUndefined(r))return t.prototype.remove.call(this,e),r.unlink(),r.value},e.prototype.clear=function(){t.prototype.clear.call(this),this.head.next=this.tail,this.tail.prev=this.head},e.prototype.replace=function(t,e){var r="$"+this.toStr(e.key);e.next=t.next,e.prev=t.prev,this.remove(t.key),e.prev.next=e,e.next.prev=e,this.table[r]=e,++this.nElements},e.prototype.setValue=function(t,e){if(!i.isUndefined(t)&&!i.isUndefined(e)){var r=this.getLinkedDictionaryPair(t),n=new s(t,e),o="$"+this.toStr(t);return i.isUndefined(r)?(this.appendToTail(n),this.table[o]=n,void++this.nElements):(this.replace(r,n),r.value)}},e.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(e)}),t},e.prototype.values=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),t},e.prototype.forEach=function(t){for(var e=this.head.next;null!=e.next;){if(!1===t(e.key,e.value))return;e=e.next}},e}(o.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=a},{"./Dictionary":17,"./util":30}],21:[function(t,e,r){"use strict";var n=t("./util"),o=t("./arrays"),i=function(){function t(){this.firstNode=null,this.lastNode=null,this.nElements=0}return t.prototype.add=function(t,e){if(n.isUndefined(e)&&(e=this.nElements),e<0||e>this.nElements||n.isUndefined(t))return!1;var r=this.createNode(t);if(0===this.nElements)this.firstNode=r,this.lastNode=r;else if(e===this.nElements)this.lastNode.next=r,this.lastNode=r;else if(0===e)r.next=this.firstNode,this.firstNode=r;else{var o=this.nodeAtIndex(e-1);r.next=o.next,o.next=r}return this.nElements++,!0},t.prototype.first=function(){if(null!==this.firstNode)return this.firstNode.element},t.prototype.last=function(){if(null!==this.lastNode)return this.lastNode.element},t.prototype.elementAtIndex=function(t){var e=this.nodeAtIndex(t);if(null!==e)return e.element},t.prototype.indexOf=function(t,e){var r=e||n.defaultEquals;if(n.isUndefined(t))return-1;for(var o=this.firstNode,i=0;null!==o;){if(r(o.element,t))return i;i++,o=o.next}return-1},t.prototype.contains=function(t,e){return this.indexOf(t,e)>=0},t.prototype.remove=function(t,e){var r=e||n.defaultEquals;if(this.nElements<1||n.isUndefined(t))return!1;for(var o=null,i=this.firstNode;null!==i;){if(r(i.element,t))return i===this.firstNode?(this.firstNode=this.firstNode.next,i===this.lastNode&&(this.lastNode=null)):i===this.lastNode?(this.lastNode=o,o.next=i.next,i.next=null):(o.next=i.next,i.next=null),this.nElements--,!0;o=i,i=i.next}return!1},t.prototype.clear=function(){this.firstNode=null,this.lastNode=null,this.nElements=0},t.prototype.equals=function(e,r){var o=r||n.defaultEquals;return e instanceof t&&(this.size()===e.size()&&this.equalsAux(this.firstNode,e.firstNode,o))},t.prototype.equalsAux=function(t,e,r){for(;null!==t;){if(!r(t.element,e.element))return!1;t=t.next,e=e.next}return!0},t.prototype.removeElementAtIndex=function(t){if(!(t<0||t>=this.nElements)){var e;if(1===this.nElements)e=this.firstNode.element,this.firstNode=null,this.lastNode=null;else{var r=this.nodeAtIndex(t-1);null===r?(e=this.firstNode.element,this.firstNode=this.firstNode.next):r.next===this.lastNode&&(e=this.lastNode.element,this.lastNode=r),null!==r&&(e=r.next.element,r.next=r.next.next)}return this.nElements--,e}},t.prototype.forEach=function(t){for(var e=this.firstNode;null!==e&&!1!==t(e.element);)e=e.next},t.prototype.reverse=function(){for(var t=null,e=this.firstNode,r=null;null!==e;)r=e.next,e.next=t,t=e,e=r;r=this.firstNode,this.firstNode=this.lastNode,this.lastNode=r},t.prototype.toArray=function(){for(var t=[],e=this.firstNode;null!==e;)t.push(e.element),e=e.next;return t},t.prototype.size=function(){return this.nElements},t.prototype.isEmpty=function(){return this.nElements<=0},t.prototype.toString=function(){return o.toString(this.toArray())},t.prototype.nodeAtIndex=function(t){if(t<0||t>=this.nElements)return null;if(t===this.nElements-1)return this.lastNode;for(var e=this.firstNode,r=0;r<t;r++)e=e.next;return e},t.prototype.createNode=function(t){return{element:t,next:null}},t}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=i},{"./arrays":28,"./util":30}],22:[function(t,e,r){"use strict";var n=t("./util"),o=t("./Dictionary"),i=t("./arrays"),s=function(){function t(t,e,r){void 0===r&&(r=!1),this.dict=new o.default(t),this.equalsF=e||n.defaultEquals,this.allowDuplicate=r}return t.prototype.getValue=function(t){var e=this.dict.getValue(t);return n.isUndefined(e)?[]:i.copy(e)},t.prototype.setValue=function(t,e){if(n.isUndefined(t)||n.isUndefined(e))return!1;if(!this.containsKey(t))return this.dict.setValue(t,[e]),!0;var r=this.dict.getValue(t);return!(!this.allowDuplicate&&i.contains(r,e,this.equalsF))&&(r.push(e),!0)},t.prototype.remove=function(t,e){if(n.isUndefined(e)){var r=this.dict.remove(t);return!n.isUndefined(r)}var o=this.dict.getValue(t);return!!i.remove(o,e,this.equalsF)&&(0===o.length&&this.dict.remove(t),!0)},t.prototype.keys=function(){return this.dict.keys()},t.prototype.values=function(){for(var t=this.dict.values(),e=[],r=0,n=t;r<n.length;r++)for(var o=n[r],i=0,s=o;i<s.length;i++){var a=s[i];e.push(a)}return e},t.prototype.containsKey=function(t){return this.dict.containsKey(t)},t.prototype.clear=function(){this.dict.clear()},t.prototype.size=function(){return this.dict.size()},t.prototype.isEmpty=function(){return this.dict.isEmpty()},t}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=s},{"./Dictionary":17,"./arrays":28,"./util":30}],23:[function(t,e,r){"use strict";var n;!function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER",t[t.INSIDE_AT_END=2]="INSIDE_AT_END",t[t.INSIDE_AT_START=3]="INSIDE_AT_START"}(n||(n={}));var o=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.rootIds=t,this.nodes=e,this.initRootIds(),this.initNodes()}return t.prototype.initRootIds=function(){for(var t=0,e=this.rootIds;t<e.length;t++){var r=e[t];this.createEmptyNodeIfNotExist(r)}},t.prototype.initNodes=function(){for(var t in this.nodes)if(this.nodes.hasOwnProperty(t))for(var e=0,r=this.nodes[t];e<r.length;e++){var n=r[e];this.createEmptyNodeIfNotExist(n)}},t.prototype.createEmptyNodeIfNotExist=function(t){this.nodes[t]||(this.nodes[t]=[])},t.prototype.getRootIds=function(){return this.rootIds.slice()},t.prototype.getNodes=function(){var t={};for(var e in this.nodes)this.nodes.hasOwnProperty(e)&&(t[e]=this.nodes[e].slice());return t},t.prototype.getObject=function(){return{rootIds:this.getRootIds(),nodes:this.getNodes()}},t.prototype.toObject=function(){return this.getObject()},t.prototype.flatten=function(){function t(e,r,n,o){if(void 0===o&&(o=0),e&&r&&n&&r[e]){o++;for(var i=r[e],s=0;s<i.length;s++){var a=i[s];n.push({id:a,level:o,hasParent:!0}),t(a,r,n,o)}o--}}for(var e=this,r=[],n=0;n<this.rootIds.length;n++){var o=this.rootIds[n];r.push({id:o,level:0,hasParent:!1,childrenCount:void 0}),t(o,this.nodes,r,0)}for(var i=0,s=r;i<s.length;i++){var a=s[i];a.childrenCount=function(t){if(e.nodes[t]){return e.nodes[t].length}return 0}(a.id)}return r},t.prototype.moveIdBeforeId=function(t,e){return this.moveId(t,e,n.BEFORE)},t.prototype.moveIdAfterId=function(t,e){return this.moveId(t,e,n.AFTER)},t.prototype.moveIdIntoId=function(t,e,r){return void 0===r&&(r=!0),r?this.moveId(t,e,n.INSIDE_AT_START):this.moveId(t,e,n.INSIDE_AT_END)},t.prototype.swapRootIdWithRootId=function(t,e){var r=this.findRootId(t),n=this.findRootId(e);this.swapRootPositionWithRootPosition(r,n)},t.prototype.swapRootPositionWithRootPosition=function(t,e){var r=this.rootIds[e];this.rootIds[e]=this.rootIds[t],this.rootIds[t]=r},t.prototype.deleteId=function(t){this.rootDeleteId(t),this.nodeAndSubNodesDelete(t),this.nodeRefrencesDelete(t)},t.prototype.insertIdBeforeId=function(t,e){var r=this.findRootId(t);r>-1&&this.insertIdIntoRoot(e,r);for(var n in this.nodes)if(this.nodes.hasOwnProperty(n)){var o=this.findNodeId(n,t);o>-1&&this.insertIdIntoNode(n,e,o)}},t.prototype.insertIdAfterId=function(t,e){var r=this.findRootId(t);r>-1&&this.insertIdIntoRoot(e,r+1);for(var n in this.nodes)if(this.nodes.hasOwnProperty(n)){var o=this.findNodeId(n,t);o>-1&&this.insertIdIntoNode(n,e,o+1)}},t.prototype.insertIdIntoId=function(t,e){this.nodeInsertAtEnd(t,e),this.nodes[e]=[]},t.prototype.insertIdIntoRoot=function(t,e){if(void 0===e)this.rootInsertAtEnd(t);else if(e<0){var r=this.rootIds.length;this.rootIds.splice(e+r+1,0,t)}else this.rootIds.splice(e,0,t);this.nodes[t]=this.nodes[t]||[]},t.prototype.insertIdIntoNode=function(t,e,r){if(this.nodes[t]=this.nodes[t]||[],this.nodes[e]=this.nodes[e]||[],void 0===r)this.nodeInsertAtEnd(t,e);else if(r<0){var n=this.nodes[t].length;this.nodes[t].splice(r+n+1,0,e)}else this.nodes[t].splice(r,0,e)},t.prototype.moveId=function(t,e,r){var o=t,i=this.findRootId(o);this.nodes[e];for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){this.findNodeId(s,e);break}var a=e,u=this.findRootId(a);this.nodes[e];for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){this.findNodeId(s,e);break}if(i>-1)if(u>-1)switch(this.rootDelete(i),u>i&&u--,r){case n.BEFORE:this.insertIdIntoRoot(o,u);break;case n.AFTER:this.insertIdIntoRoot(o,u+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(a,o);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(a,o)}else{this.rootDelete(i);for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var l=this.findNodeId(s,a);if(l>-1){switch(r){case n.BEFORE:this.insertIdIntoNode(s,o,l);break;case n.AFTER:this.insertIdIntoNode(s,o,l+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(a,o);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(a,o)}break}}}else if(u>-1){for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var l=this.findNodeId(s,o);if(l>-1){this.nodeDeleteAtIndex(s,l);break}}switch(r){case n.BEFORE:this.insertIdIntoRoot(o,u);break;case n.AFTER:this.insertIdIntoRoot(o,u+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(a,o);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(a,o)}}else{for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var l=this.findNodeId(s,o);if(l>-1){this.nodeDeleteAtIndex(s,l);break}}for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var l=this.findNodeId(s,a);if(l>-1){switch(r){case n.BEFORE:this.insertIdIntoNode(s,o,l);break;case n.AFTER:this.insertIdIntoNode(s,o,l+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(a,o);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(a,o)}break}}}},t.prototype.swapArrayElements=function(t,e,r){var n=t[e];return t[e]=t[r],t[r]=n,t},t.prototype.rootDeleteId=function(t){var e=this.findRootId(t);e>-1&&this.rootDelete(e)},t.prototype.nodeAndSubNodesDelete=function(t){for(var e=[],r=0;r<this.nodes[t].length;r++){var n=this.nodes[t][r];this.nodeAndSubNodesDelete(n),e.push(t)}this.nodeDelete(t);for(var r=0;r<e.length;r++)this.nodeDelete(e[r])},t.prototype.nodeRefrencesDelete=function(t){for(var e in this.nodes)if(this.nodes.hasOwnProperty(e))for(var r=0;r<this.nodes[e].length;r++){var n=this.nodes[e][r];n===t&&this.nodeDeleteAtIndex(e,r)}},t.prototype.nodeDelete=function(t){delete this.nodes[t]},t.prototype.findRootId=function(t){return this.rootIds.indexOf(t)},t.prototype.findNodeId=function(t,e){return this.nodes[t].indexOf(e)},t.prototype.findNode=function(t){return this.nodes[t]},t.prototype.nodeInsertAtStart=function(t,e){this.nodes[t].unshift(e)},t.prototype.nodeInsertAtEnd=function(t,e){this.nodes[t].push(e)},t.prototype.rootDelete=function(t){this.rootIds.splice(t,1)},t.prototype.nodeDeleteAtIndex=function(t,e){this.nodes[t].splice(e,1)},t.prototype.rootInsertAtStart=function(t){this.rootIds.unshift(t)},t.prototype.rootInsertAtEnd=function(t){this.rootIds.push(t)},t}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{}],24:[function(t,e,r){"use strict";var n=t("./util"),o=t("./Heap"),i=function(){function t(t){this.heap=new o.default(n.reverseCompareFunction(t))}return t.prototype.enqueue=function(t){return this.heap.add(t)},t.prototype.add=function(t){return this.heap.add(t)},t.prototype.dequeue=function(){if(0!==this.heap.size()){var t=this.heap.peek();return this.heap.removeRoot(),t}},t.prototype.peek=function(){return this.heap.peek()},t.prototype.contains=function(t){return this.heap.contains(t)},t.prototype.isEmpty=function(){return this.heap.isEmpty()},t.prototype.size=function(){return this.heap.size()},t.prototype.clear=function(){this.heap.clear()},t.prototype.forEach=function(t){this.heap.forEach(t)},t}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=i},{"./Heap":19,"./util":30}],25:[function(t,e,r){"use strict";var n=t("./LinkedList"),o=function(){function t(){this.list=new n.default}return t.prototype.enqueue=function(t){return this.list.add(t)},t.prototype.add=function(t){return this.list.add(t)},t.prototype.dequeue=function(){if(0!==this.list.size()){var t=this.list.first();return this.list.removeElementAtIndex(0),t}},t.prototype.peek=function(){if(0!==this.list.size())return this.list.first()},t.prototype.size=function(){return this.list.size()},t.prototype.contains=function(t,e){return this.list.contains(t,e)},t.prototype.isEmpty=function(){return this.list.size()<=0},t.prototype.clear=function(){this.list.clear()},t.prototype.forEach=function(t){this.list.forEach(t)},t}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{"./LinkedList":21}],26:[function(t,e,r){"use strict";var n=t("./util"),o=t("./arrays"),i=t("./Dictionary"),s=function(){function t(t){this.dictionary=new i.default(t)}return t.prototype.contains=function(t){return this.dictionary.containsKey(t)},t.prototype.add=function(t){return!this.contains(t)&&!n.isUndefined(t)&&(this.dictionary.setValue(t,t),!0)},t.prototype.intersection=function(t){var e=this;this.forEach(function(r){return t.contains(r)||e.remove(r),!0})},t.prototype.union=function(t){var e=this;t.forEach(function(t){return e.add(t),!0})},t.prototype.difference=function(t){var e=this;t.forEach(function(t){return e.remove(t),!0})},t.prototype.isSubsetOf=function(t){if(this.size()>t.size())return!1;var e=!0;return this.forEach(function(r){return!!t.contains(r)||(e=!1,!1)}),e},t.prototype.remove=function(t){return!!this.contains(t)&&(this.dictionary.remove(t),!0)},t.prototype.forEach=function(t){this.dictionary.forEach(function(e,r){return t(r)})},t.prototype.toArray=function(){return this.dictionary.values()},t.prototype.isEmpty=function(){return this.dictionary.isEmpty()},t.prototype.size=function(){return this.dictionary.size()},t.prototype.clear=function(){this.dictionary.clear()},t.prototype.toString=function(){return o.toString(this.toArray())},t}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=s},{"./Dictionary":17,"./arrays":28,"./util":30}],27:[function(t,e,r){"use strict";var n=t("./LinkedList"),o=function(){function t(){this.list=new n.default}return t.prototype.push=function(t){return this.list.add(t,0)},t.prototype.add=function(t){return this.list.add(t,0)},t.prototype.pop=function(){return this.list.removeElementAtIndex(0)},t.prototype.peek=function(){return this.list.first()},t.prototype.size=function(){return this.list.size()},t.prototype.contains=function(t,e){return this.list.contains(t,e)},t.prototype.isEmpty=function(){return this.list.isEmpty()},t.prototype.clear=function(){this.list.clear()},t.prototype.forEach=function(t){this.list.forEach(t)},t}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{"./LinkedList":21}],28:[function(t,e,r){"use strict";function n(t,e,r){for(var n=r||g.defaultEquals,o=t.length,i=0;i<o;i++)if(n(t[i],e))return i;return-1}function o(t,e,r){for(var n=r||g.defaultEquals,o=t.length,i=o-1;i>=0;i--)if(n(t[i],e))return i;return-1}function i(t,e,r){return n(t,e,r)>=0}function s(t,e,r){var o=n(t,e,r);return!(o<0)&&(t.splice(o,1),!0)}function a(t,e,r){for(var n=r||g.defaultEquals,o=t.length,i=0,s=0;s<o;s++)n(t[s],e)&&i++;return i}function u(t,e,r){var n=r||g.defaultEquals;if(t.length!==e.length)return!1;for(var o=t.length,i=0;i<o;i++)if(!n(t[i],e[i]))return!1;return!0}function l(t){return t.concat()}function c(t,e,r){if(e<0||e>=t.length||r<0||r>=t.length)return!1;var n=t[e];return t[e]=t[r],t[r]=n,!0}function p(t){return"["+t.toString()+"]"}function f(t,e){for(var r=0,n=t;r<n.length;r++){if(!1===e(n[r]))return}}var g=t("./util");r.indexOf=n,r.lastIndexOf=o,r.contains=i,r.remove=s,r.frequency=a,r.equals=u,r.copy=l,r.swap=c,r.toString=p,r.forEach=f},{"./util":30}],29:[function(e,r,n){(function(o){!function(e){if("object"==typeof n&&void 0!==r)r.exports=e();else if("function"==typeof t&&t.amd)t([],e);else{var i;i="undefined"!=typeof window?window:void 0!==o?o:"undefined"!=typeof self?self:this,i.listComponent=e()}}(function(){return(e=function t(r,n,o){function i(a,u){if(!n[a]){if(!r[a]){var l="function"==typeof e&&e;if(!u&&l)return l(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var p=n[a]={exports:{}};r[a][0].call(p.exports,function(t){var e=r[a][1][t];return i(e||t)},p,p.exports,t,r,n,o)}return n[a].exports}for(var s="function"==typeof e&&e,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(t,e,r){"use strict";var n=t("./util"),o=t("./Queue"),i=function(){function t(t){this.root=null,this.compare=t||n.defaultCompare,this.nElements=0}return t.prototype.add=function(t){return!n.isUndefined(t)&&(null!==this.insertNode(this.createNode(t))&&(this.nElements++,!0))},t.prototype.clear=function(){this.root=null,this.nElements=0},t.prototype.isEmpty=function(){return 0===this.nElements},t.prototype.size=function(){return this.nElements},t.prototype.contains=function(t){return!n.isUndefined(t)&&null!==this.searchNode(this.root,t)},t.prototype.remove=function(t){var e=this.searchNode(this.root,t);return null!==e&&(this.removeNode(e),this.nElements--,!0)},t.prototype.inorderTraversal=function(t){this.inorderTraversalAux(this.root,t,{stop:!1})},t.prototype.preorderTraversal=function(t){this.preorderTraversalAux(this.root,t,{stop:!1})},t.prototype.postorderTraversal=function(t){this.postorderTraversalAux(this.root,t,{stop:!1})},t.prototype.levelTraversal=function(t){this.levelTraversalAux(this.root,t)},t.prototype.minimum=function(){if(!this.isEmpty())return this.minimumAux(this.root).element},t.prototype.maximum=function(){if(!this.isEmpty())return this.maximumAux(this.root).element},t.prototype.forEach=function(t){this.inorderTraversal(t)},t.prototype.toArray=function(){var t=[];return this.inorderTraversal(function(e){return t.push(e),!0}),t},t.prototype.height=function(){return this.heightAux(this.root)},t.prototype.searchNode=function(t,e){for(var r=null;null!==t&&0!==r;)r=this.compare(e,t.element),r<0?t=t.leftCh:r>0&&(t=t.rightCh);return t},t.prototype.transplant=function(t,e){null===t.parent?this.root=e:t===t.parent.leftCh?t.parent.leftCh=e:t.parent.rightCh=e,null!==e&&(e.parent=t.parent)},t.prototype.removeNode=function(t){if(null===t.leftCh)this.transplant(t,t.rightCh);else if(null===t.rightCh)this.transplant(t,t.leftCh);else{var e=this.minimumAux(t.rightCh);e.parent!==t&&(this.transplant(e,e.rightCh),e.rightCh=t.rightCh,e.rightCh.parent=e),this.transplant(t,e),e.leftCh=t.leftCh,e.leftCh.parent=e}},t.prototype.inorderTraversalAux=function(t,e,r){null===t||r.stop||(this.inorderTraversalAux(t.leftCh,e,r),r.stop||(r.stop=!1===e(t.element),r.stop||this.inorderTraversalAux(t.rightCh,e,r)))},t.prototype.levelTraversalAux=function(t,e){var r=new o.default;for(null!==t&&r.enqueue(t);!r.isEmpty();){if(t=r.dequeue(),!1===e(t.element))return;null!==t.leftCh&&r.enqueue(t.leftCh),null!==t.rightCh&&r.enqueue(t.rightCh)}},t.prototype.preorderTraversalAux=function(t,e,r){null===t||r.stop||(r.stop=!1===e(t.element),r.stop||(this.preorderTraversalAux(t.leftCh,e,r),r.stop||this.preorderTraversalAux(t.rightCh,e,r)))},t.prototype.postorderTraversalAux=function(t,e,r){null===t||r.stop||(this.postorderTraversalAux(t.leftCh,e,r),r.stop||(this.postorderTraversalAux(t.rightCh,e,r),r.stop||(r.stop=!1===e(t.element))))},t.prototype.minimumAux=function(t){for(;null!==t.leftCh;)t=t.leftCh;return t},t.prototype.maximumAux=function(t){for(;null!==t.rightCh;)t=t.rightCh;return t},t.prototype.heightAux=function(t){return null===t?-1:Math.max(this.heightAux(t.leftCh),this.heightAux(t.rightCh))+1},t.prototype.insertNode=function(t){for(var e=null,r=this.root,n=null;null!==r;){if(0===(n=this.compare(t.element,r.element)))return null;n<0?(e=r,r=r.leftCh):(e=r,r=r.rightCh)}return t.parent=e,null===e?this.root=t:this.compare(t.element,e.element)<0?e.leftCh=t:e.rightCh=t,t},t.prototype.createNode=function(t){return{element:t,leftCh:null,rightCh:null,parent:null}},t}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=i},{"./Queue":11,"./util":15}],2:[function(t,e,r){"use strict";var n=t("./util"),o=t("./Dictionary"),i=t("./Set"),s=function(){function t(t){this.toStrF=t||n.defaultToString,this.dictionary=new o.default(this.toStrF),this.nElements=0}return t.prototype.add=function(t,e){if(void 0===e&&(e=1),n.isUndefined(t)||e<=0)return!1;if(this.contains(t))this.dictionary.getValue(t).copies+=e;else{var r={value:t,copies:e};this.dictionary.setValue(t,r)}return this.nElements+=e,!0},t.prototype.count=function(t){return this.contains(t)?this.dictionary.getValue(t).copies:0},t.prototype.contains=function(t){return this.dictionary.containsKey(t)},t.prototype.remove=function(t,e){if(void 0===e&&(e=1),n.isUndefined(t)||e<=0)return!1;if(this.contains(t)){var r=this.dictionary.getValue(t);return e>r.copies?this.nElements-=r.copies:this.nElements-=e,r.copies-=e,r.copies<=0&&this.dictionary.remove(t),!0}return!1},t.prototype.toArray=function(){for(var t=[],e=this.dictionary.values(),r=0,n=e;r<n.length;r++)for(var o=n[r],i=o.value,s=o.copies,a=0;a<s;a++)t.push(i);return t},t.prototype.toSet=function(){for(var t=new i.default(this.toStrF),e=this.dictionary.values(),r=0,n=e;r<n.length;r++){var o=n[r],s=o.value;t.add(s)}return t},t.prototype.forEach=function(t){this.dictionary.forEach(function(e,r){
for(var n=r.value,o=r.copies,i=0;i<o;i++)if(!1===t(n))return!1;return!0})},t.prototype.size=function(){return this.nElements},t.prototype.isEmpty=function(){return 0===this.nElements},t.prototype.clear=function(){this.nElements=0,this.dictionary.clear()},t}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=s},{"./Dictionary":3,"./Set":12,"./util":15}],3:[function(t,e,r){"use strict";var n=t("./util"),o=function(){function t(t){this.table={},this.nElements=0,this.toStr=t||n.defaultToString}return t.prototype.getValue=function(t){var e=this.table["$"+this.toStr(t)];if(!n.isUndefined(e))return e.value},t.prototype.setValue=function(t,e){if(!n.isUndefined(t)&&!n.isUndefined(e)){var r,o="$"+this.toStr(t),i=this.table[o];return n.isUndefined(i)?(this.nElements++,r=void 0):r=i.value,this.table[o]={key:t,value:e},r}},t.prototype.remove=function(t){var e="$"+this.toStr(t),r=this.table[e];if(!n.isUndefined(r))return delete this.table[e],this.nElements--,r.value},t.prototype.keys=function(){var t=[];for(var e in this.table)if(n.has(this.table,e)){var r=this.table[e];t.push(r.key)}return t},t.prototype.values=function(){var t=[];for(var e in this.table)if(n.has(this.table,e)){var r=this.table[e];t.push(r.value)}return t},t.prototype.forEach=function(t){for(var e in this.table)if(n.has(this.table,e)){var r=this.table[e],o=t(r.key,r.value);if(!1===o)return}},t.prototype.containsKey=function(t){return!n.isUndefined(this.getValue(t))},t.prototype.clear=function(){this.table={},this.nElements=0},t.prototype.size=function(){return this.nElements},t.prototype.isEmpty=function(){return this.nElements<=0},t.prototype.toString=function(){var t="{";return this.forEach(function(e,r){t+="\n\t"+e+" : "+r}),t+"\n}"},t}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{"./util":15}],4:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=t("./Dictionary"),i=t("./util"),s=function(t){function e(e,r){t.call(this,r),this.defaultFactoryFunction=e}return n(e,t),e.prototype.setDefault=function(e,r){var n=t.prototype.getValue.call(this,e);return i.isUndefined(n)?(this.setValue(e,r),r):n},e.prototype.getValue=function(t){return this.setDefault(t,this.defaultFactoryFunction())},e}(o.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=s},{"./Dictionary":3,"./util":15}],5:[function(t,e,r){"use strict";var n=t("./util"),o=t("./arrays"),i=function(){function t(t){this.data=[],this.compare=t||n.defaultCompare}return t.prototype.leftChildIndex=function(t){return 2*t+1},t.prototype.rightChildIndex=function(t){return 2*t+2},t.prototype.parentIndex=function(t){return Math.floor((t-1)/2)},t.prototype.minIndex=function(t,e){return e>=this.data.length?t>=this.data.length?-1:t:this.compare(this.data[t],this.data[e])<=0?t:e},t.prototype.siftUp=function(t){for(var e=this.parentIndex(t);t>0&&this.compare(this.data[e],this.data[t])>0;)o.swap(this.data,e,t),t=e,e=this.parentIndex(t)},t.prototype.siftDown=function(t){for(var e=this.minIndex(this.leftChildIndex(t),this.rightChildIndex(t));e>=0&&this.compare(this.data[t],this.data[e])>0;)o.swap(this.data,e,t),t=e,e=this.minIndex(this.leftChildIndex(t),this.rightChildIndex(t))},t.prototype.peek=function(){return this.data.length>0?this.data[0]:void 0},t.prototype.add=function(t){if(!n.isUndefined(t))return this.data.push(t),this.siftUp(this.data.length-1),!0},t.prototype.removeRoot=function(){if(this.data.length>0){var t=this.data[0];return this.data[0]=this.data[this.data.length-1],this.data.splice(this.data.length-1,1),this.data.length>0&&this.siftDown(0),t}},t.prototype.contains=function(t){var e=n.compareToEquals(this.compare);return o.contains(this.data,t,e)},t.prototype.size=function(){return this.data.length},t.prototype.isEmpty=function(){return this.data.length<=0},t.prototype.clear=function(){this.data.length=0},t.prototype.forEach=function(t){o.forEach(this.data,t)},t}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=i},{"./arrays":14,"./util":15}],6:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=t("./Dictionary"),i=t("./util"),s=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},t}(),a=function(t){function e(e){t.call(this,e),this.head=new s(null,null),this.tail=new s(null,null),this.head.next=this.tail,this.tail.prev=this.head}return n(e,t),e.prototype.appendToTail=function(t){var e=this.tail.prev;e.next=t,t.prev=e,t.next=this.tail,this.tail.prev=t},e.prototype.getLinkedDictionaryPair=function(t){if(!i.isUndefined(t)){var e="$"+this.toStr(t);return this.table[e]}},e.prototype.getValue=function(t){var e=this.getLinkedDictionaryPair(t);if(!i.isUndefined(e))return e.value},e.prototype.remove=function(e){var r=this.getLinkedDictionaryPair(e);if(!i.isUndefined(r))return t.prototype.remove.call(this,e),r.unlink(),r.value},e.prototype.clear=function(){t.prototype.clear.call(this),this.head.next=this.tail,this.tail.prev=this.head},e.prototype.replace=function(t,e){var r="$"+this.toStr(e.key);e.next=t.next,e.prev=t.prev,this.remove(t.key),e.prev.next=e,e.next.prev=e,this.table[r]=e,++this.nElements},e.prototype.setValue=function(t,e){if(!i.isUndefined(t)&&!i.isUndefined(e)){var r=this.getLinkedDictionaryPair(t),n=new s(t,e),o="$"+this.toStr(t);return i.isUndefined(r)?(this.appendToTail(n),this.table[o]=n,void++this.nElements):(this.replace(r,n),r.value)}},e.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(e)}),t},e.prototype.values=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),t},e.prototype.forEach=function(t){for(var e=this.head.next;null!=e.next;){if(!1===t(e.key,e.value))return;e=e.next}},e}(o.default);Object.defineProperty(r,"__esModule",{value:!0}),r.default=a},{"./Dictionary":3,"./util":15}],7:[function(t,e,r){"use strict";var n=t("./util"),o=t("./arrays"),i=function(){function t(){this.firstNode=null,this.lastNode=null,this.nElements=0}return t.prototype.add=function(t,e){if(n.isUndefined(e)&&(e=this.nElements),e<0||e>this.nElements||n.isUndefined(t))return!1;var r=this.createNode(t);if(0===this.nElements)this.firstNode=r,this.lastNode=r;else if(e===this.nElements)this.lastNode.next=r,this.lastNode=r;else if(0===e)r.next=this.firstNode,this.firstNode=r;else{var o=this.nodeAtIndex(e-1);r.next=o.next,o.next=r}return this.nElements++,!0},t.prototype.first=function(){if(null!==this.firstNode)return this.firstNode.element},t.prototype.last=function(){if(null!==this.lastNode)return this.lastNode.element},t.prototype.elementAtIndex=function(t){var e=this.nodeAtIndex(t);if(null!==e)return e.element},t.prototype.indexOf=function(t,e){var r=e||n.defaultEquals;if(n.isUndefined(t))return-1;for(var o=this.firstNode,i=0;null!==o;){if(r(o.element,t))return i;i++,o=o.next}return-1},t.prototype.contains=function(t,e){return this.indexOf(t,e)>=0},t.prototype.remove=function(t,e){var r=e||n.defaultEquals;if(this.nElements<1||n.isUndefined(t))return!1;for(var o=null,i=this.firstNode;null!==i;){if(r(i.element,t))return i===this.firstNode?(this.firstNode=this.firstNode.next,i===this.lastNode&&(this.lastNode=null)):i===this.lastNode?(this.lastNode=o,o.next=i.next,i.next=null):(o.next=i.next,i.next=null),this.nElements--,!0;o=i,i=i.next}return!1},t.prototype.clear=function(){this.firstNode=null,this.lastNode=null,this.nElements=0},t.prototype.equals=function(e,r){var o=r||n.defaultEquals;return e instanceof t&&(this.size()===e.size()&&this.equalsAux(this.firstNode,e.firstNode,o))},t.prototype.equalsAux=function(t,e,r){for(;null!==t;){if(!r(t.element,e.element))return!1;t=t.next,e=e.next}return!0},t.prototype.removeElementAtIndex=function(t){if(!(t<0||t>=this.nElements)){var e;if(1===this.nElements)e=this.firstNode.element,this.firstNode=null,this.lastNode=null;else{var r=this.nodeAtIndex(t-1);null===r?(e=this.firstNode.element,this.firstNode=this.firstNode.next):r.next===this.lastNode&&(e=this.lastNode.element,this.lastNode=r),null!==r&&(e=r.next.element,r.next=r.next.next)}return this.nElements--,e}},t.prototype.forEach=function(t){for(var e=this.firstNode;null!==e&&!1!==t(e.element);)e=e.next},t.prototype.reverse=function(){for(var t=null,e=this.firstNode,r=null;null!==e;)r=e.next,e.next=t,t=e,e=r;r=this.firstNode,this.firstNode=this.lastNode,this.lastNode=r},t.prototype.toArray=function(){for(var t=[],e=this.firstNode;null!==e;)t.push(e.element),e=e.next;return t},t.prototype.size=function(){return this.nElements},t.prototype.isEmpty=function(){return this.nElements<=0},t.prototype.toString=function(){return o.toString(this.toArray())},t.prototype.nodeAtIndex=function(t){if(t<0||t>=this.nElements)return null;if(t===this.nElements-1)return this.lastNode;for(var e=this.firstNode,r=0;r<t;r++)e=e.next;return e},t.prototype.createNode=function(t){return{element:t,next:null}},t}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=i},{"./arrays":14,"./util":15}],8:[function(t,e,r){"use strict";var n=t("./util"),o=t("./Dictionary"),i=t("./arrays"),s=function(){function t(t,e,r){void 0===r&&(r=!1),this.dict=new o.default(t),this.equalsF=e||n.defaultEquals,this.allowDuplicate=r}return t.prototype.getValue=function(t){var e=this.dict.getValue(t);return n.isUndefined(e)?[]:i.copy(e)},t.prototype.setValue=function(t,e){if(n.isUndefined(t)||n.isUndefined(e))return!1;if(!this.containsKey(t))return this.dict.setValue(t,[e]),!0;var r=this.dict.getValue(t);return!(!this.allowDuplicate&&i.contains(r,e,this.equalsF))&&(r.push(e),!0)},t.prototype.remove=function(t,e){if(n.isUndefined(e)){var r=this.dict.remove(t);return!n.isUndefined(r)}var o=this.dict.getValue(t);return!!i.remove(o,e,this.equalsF)&&(0===o.length&&this.dict.remove(t),!0)},t.prototype.keys=function(){return this.dict.keys()},t.prototype.values=function(){for(var t=this.dict.values(),e=[],r=0,n=t;r<n.length;r++)for(var o=n[r],i=0,s=o;i<s.length;i++){var a=s[i];e.push(a)}return e},t.prototype.containsKey=function(t){return this.dict.containsKey(t)},t.prototype.clear=function(){this.dict.clear()},t.prototype.size=function(){return this.dict.size()},t.prototype.isEmpty=function(){return this.dict.isEmpty()},t}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=s},{"./Dictionary":3,"./arrays":14,"./util":15}],9:[function(t,e,r){"use strict";var n;!function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER",t[t.INSIDE_AT_END=2]="INSIDE_AT_END",t[t.INSIDE_AT_START=3]="INSIDE_AT_START"}(n||(n={}));var o=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.rootIds=t,this.nodes=e,this.initRootIds(),this.initNodes()}return t.prototype.initRootIds=function(){for(var t=0,e=this.rootIds;t<e.length;t++){var r=e[t];this.createEmptyNodeIfNotExist(r)}},t.prototype.initNodes=function(){for(var t in this.nodes)if(this.nodes.hasOwnProperty(t))for(var e=0,r=this.nodes[t];e<r.length;e++){var n=r[e];this.createEmptyNodeIfNotExist(n)}},t.prototype.createEmptyNodeIfNotExist=function(t){this.nodes[t]||(this.nodes[t]=[])},t.prototype.getRootIds=function(){return this.rootIds.slice()},t.prototype.getNodes=function(){var t={};for(var e in this.nodes)this.nodes.hasOwnProperty(e)&&(t[e]=this.nodes[e].slice());return t},t.prototype.getObject=function(){return{rootIds:this.getRootIds(),nodes:this.getNodes()}},t.prototype.toObject=function(){return this.getObject()},t.prototype.flatten=function(){function t(e,r,n,o){if(void 0===o&&(o=0),e&&r&&n&&r[e]){o++;for(var i=r[e],s=0;s<i.length;s++){var a=i[s];n.push({id:a,level:o,hasParent:!0}),t(a,r,n,o)}o--}}for(var e=this,r=[],n=0;n<this.rootIds.length;n++){var o=this.rootIds[n];r.push({id:o,level:0,hasParent:!1,childrenCount:void 0}),t(o,this.nodes,r,0)}for(var i=0,s=r;i<s.length;i++){var a=s[i];a.childrenCount=function(t){if(e.nodes[t]){return e.nodes[t].length}return 0}(a.id)}return r},t.prototype.moveIdBeforeId=function(t,e){return this.moveId(t,e,n.BEFORE)},t.prototype.moveIdAfterId=function(t,e){return this.moveId(t,e,n.AFTER)},t.prototype.moveIdIntoId=function(t,e,r){return void 0===r&&(r=!0),r?this.moveId(t,e,n.INSIDE_AT_START):this.moveId(t,e,n.INSIDE_AT_END)},t.prototype.swapRootIdWithRootId=function(t,e){var r=this.findRootId(t),n=this.findRootId(e);this.swapRootPositionWithRootPosition(r,n)},t.prototype.swapRootPositionWithRootPosition=function(t,e){var r=this.rootIds[e];this.rootIds[e]=this.rootIds[t],this.rootIds[t]=r},t.prototype.deleteId=function(t){this.rootDeleteId(t),this.nodeAndSubNodesDelete(t),this.nodeRefrencesDelete(t)},t.prototype.insertIdBeforeId=function(t,e){var r=this.findRootId(t);r>-1&&this.insertIdIntoRoot(e,r);for(var n in this.nodes)if(this.nodes.hasOwnProperty(n)){var o=this.findNodeId(n,t);o>-1&&this.insertIdIntoNode(n,e,o)}},t.prototype.insertIdAfterId=function(t,e){var r=this.findRootId(t);r>-1&&this.insertIdIntoRoot(e,r+1);for(var n in this.nodes)if(this.nodes.hasOwnProperty(n)){var o=this.findNodeId(n,t);o>-1&&this.insertIdIntoNode(n,e,o+1)}},t.prototype.insertIdIntoId=function(t,e){this.nodeInsertAtEnd(t,e),this.nodes[e]=[]},t.prototype.insertIdIntoRoot=function(t,e){if(void 0===e)this.rootInsertAtEnd(t);else if(e<0){var r=this.rootIds.length;this.rootIds.splice(e+r+1,0,t)}else this.rootIds.splice(e,0,t);this.nodes[t]=this.nodes[t]||[]},t.prototype.insertIdIntoNode=function(t,e,r){if(this.nodes[t]=this.nodes[t]||[],this.nodes[e]=this.nodes[e]||[],void 0===r)this.nodeInsertAtEnd(t,e);else if(r<0){var n=this.nodes[t].length;this.nodes[t].splice(r+n+1,0,e)}else this.nodes[t].splice(r,0,e)},t.prototype.moveId=function(t,e,r){var o=t,i=this.findRootId(o);this.nodes[e];for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){this.findNodeId(s,e);break}var a=e,u=this.findRootId(a);this.nodes[e];for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){this.findNodeId(s,e);break}if(i>-1)if(u>-1)switch(this.rootDelete(i),u>i&&u--,r){case n.BEFORE:this.insertIdIntoRoot(o,u);break;case n.AFTER:this.insertIdIntoRoot(o,u+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(a,o);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(a,o)}else{this.rootDelete(i);for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var l=this.findNodeId(s,a);if(l>-1){switch(r){case n.BEFORE:this.insertIdIntoNode(s,o,l);break;case n.AFTER:this.insertIdIntoNode(s,o,l+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(a,o);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(a,o)}break}}}else if(u>-1){for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var l=this.findNodeId(s,o);if(l>-1){this.nodeDeleteAtIndex(s,l);break}}switch(r){case n.BEFORE:this.insertIdIntoRoot(o,u);break;case n.AFTER:this.insertIdIntoRoot(o,u+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(a,o);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(a,o)}}else{for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var l=this.findNodeId(s,o);if(l>-1){this.nodeDeleteAtIndex(s,l);break}}for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var l=this.findNodeId(s,a);if(l>-1){switch(r){case n.BEFORE:this.insertIdIntoNode(s,o,l);break;case n.AFTER:this.insertIdIntoNode(s,o,l+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(a,o);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(a,o)}break}}}},t.prototype.swapArrayElements=function(t,e,r){var n=t[e];return t[e]=t[r],t[r]=n,t},t.prototype.rootDeleteId=function(t){var e=this.findRootId(t);e>-1&&this.rootDelete(e)},t.prototype.nodeAndSubNodesDelete=function(t){for(var e=[],r=0;r<this.nodes[t].length;r++){var n=this.nodes[t][r];this.nodeAndSubNodesDelete(n),e.push(t)}this.nodeDelete(t);for(var r=0;r<e.length;r++)this.nodeDelete(e[r])},t.prototype.nodeRefrencesDelete=function(t){for(var e in this.nodes)if(this.nodes.hasOwnProperty(e))for(var r=0;r<this.nodes[e].length;r++){var n=this.nodes[e][r];n===t&&this.nodeDeleteAtIndex(e,r)}},t.prototype.nodeDelete=function(t){delete this.nodes[t]},t.prototype.findRootId=function(t){return this.rootIds.indexOf(t)},t.prototype.findNodeId=function(t,e){return this.nodes[t].indexOf(e)},t.prototype.findNode=function(t){return this.nodes[t]},t.prototype.nodeInsertAtStart=function(t,e){this.nodes[t].unshift(e)},t.prototype.nodeInsertAtEnd=function(t,e){this.nodes[t].push(e)},t.prototype.rootDelete=function(t){this.rootIds.splice(t,1)},t.prototype.nodeDeleteAtIndex=function(t,e){this.nodes[t].splice(e,1)},t.prototype.rootInsertAtStart=function(t){this.rootIds.unshift(t)},t.prototype.rootInsertAtEnd=function(t){this.rootIds.push(t)},t}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{}],10:[function(t,e,r){"use strict";var n=t("./util"),o=t("./Heap"),i=function(){function t(t){this.heap=new o.default(n.reverseCompareFunction(t))}return t.prototype.enqueue=function(t){return this.heap.add(t)},t.prototype.add=function(t){return this.heap.add(t)},t.prototype.dequeue=function(){if(0!==this.heap.size()){var t=this.heap.peek();return this.heap.removeRoot(),t}},t.prototype.peek=function(){return this.heap.peek()},t.prototype.contains=function(t){return this.heap.contains(t)},t.prototype.isEmpty=function(){return this.heap.isEmpty()},t.prototype.size=function(){return this.heap.size()},t.prototype.clear=function(){this.heap.clear()},t.prototype.forEach=function(t){this.heap.forEach(t)},t}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=i},{"./Heap":5,"./util":15}],11:[function(t,e,r){"use strict";var n=t("./LinkedList"),o=function(){function t(){this.list=new n.default}return t.prototype.enqueue=function(t){return this.list.add(t)},t.prototype.add=function(t){return this.list.add(t)},t.prototype.dequeue=function(){if(0!==this.list.size()){var t=this.list.first();return this.list.removeElementAtIndex(0),t}},t.prototype.peek=function(){if(0!==this.list.size())return this.list.first()},t.prototype.size=function(){return this.list.size()},t.prototype.contains=function(t,e){return this.list.contains(t,e)},t.prototype.isEmpty=function(){return this.list.size()<=0},t.prototype.clear=function(){this.list.clear()},t.prototype.forEach=function(t){this.list.forEach(t)},t}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{"./LinkedList":7}],12:[function(t,e,r){"use strict";var n=t("./util"),o=t("./arrays"),i=t("./Dictionary"),s=function(){function t(t){this.dictionary=new i.default(t)}return t.prototype.contains=function(t){return this.dictionary.containsKey(t)},t.prototype.add=function(t){return!this.contains(t)&&!n.isUndefined(t)&&(this.dictionary.setValue(t,t),!0)},t.prototype.intersection=function(t){var e=this;this.forEach(function(r){return t.contains(r)||e.remove(r),!0})},t.prototype.union=function(t){var e=this;t.forEach(function(t){return e.add(t),!0})},t.prototype.difference=function(t){var e=this;t.forEach(function(t){return e.remove(t),!0})},t.prototype.isSubsetOf=function(t){if(this.size()>t.size())return!1;var e=!0;return this.forEach(function(r){return!!t.contains(r)||(e=!1,!1)}),e},t.prototype.remove=function(t){return!!this.contains(t)&&(this.dictionary.remove(t),!0)},t.prototype.forEach=function(t){this.dictionary.forEach(function(e,r){return t(r)})},t.prototype.toArray=function(){return this.dictionary.values()},t.prototype.isEmpty=function(){return this.dictionary.isEmpty()},t.prototype.size=function(){return this.dictionary.size()},t.prototype.clear=function(){this.dictionary.clear()},t.prototype.toString=function(){return o.toString(this.toArray())},t}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=s},{"./Dictionary":3,"./arrays":14,"./util":15}],13:[function(t,e,r){"use strict";var n=t("./LinkedList"),o=function(){function t(){this.list=new n.default}return t.prototype.push=function(t){return this.list.add(t,0)},t.prototype.add=function(t){return this.list.add(t,0)},t.prototype.pop=function(){return this.list.removeElementAtIndex(0)},t.prototype.peek=function(){return this.list.first()},t.prototype.size=function(){return this.list.size()},t.prototype.contains=function(t,e){return this.list.contains(t,e)},t.prototype.isEmpty=function(){return this.list.isEmpty()},t.prototype.clear=function(){this.list.clear()},t.prototype.forEach=function(t){this.list.forEach(t)},t}();Object.defineProperty(r,"__esModule",{value:!0}),r.default=o},{"./LinkedList":7}],14:[function(t,e,r){"use strict";function n(t,e,r){for(var n=r||g.defaultEquals,o=t.length,i=0;i<o;i++)if(n(t[i],e))return i;return-1}function o(t,e,r){for(var n=r||g.defaultEquals,o=t.length,i=o-1;i>=0;i--)if(n(t[i],e))return i;return-1}function i(t,e,r){return n(t,e,r)>=0}function s(t,e,r){var o=n(t,e,r);return!(o<0)&&(t.splice(o,1),!0)}function a(t,e,r){for(var n=r||g.defaultEquals,o=t.length,i=0,s=0;s<o;s++)n(t[s],e)&&i++;return i}function u(t,e,r){var n=r||g.defaultEquals;if(t.length!==e.length)return!1;for(var o=t.length,i=0;i<o;i++)if(!n(t[i],e[i]))return!1;return!0}function l(t){return t.concat()}function c(t,e,r){if(e<0||e>=t.length||r<0||r>=t.length)return!1;var n=t[e];return t[e]=t[r],t[r]=n,!0}function p(t){return"["+t.toString()+"]"}function f(t,e){for(var r=0,n=t;r<n.length;r++){if(!1===e(n[r]))return}}var g=t("./util");r.indexOf=n,r.lastIndexOf=o,r.contains=i,r.remove=s,r.frequency=a,r.equals=u,r.copy=l,r.swap=c,r.toString=p,r.forEach=f},{"./util":15}],15:[function(t,e,r){"use strict";function n(t,e){return t<e?-1:t===e?0:1}function o(t,e){return t===e}function i(t){return null===t?"COLLECTION_NULL":u(t)?"COLLECTION_UNDEFINED":l(t)?"$s"+t:"$o"+t.toString()}function s(t,e){if(void 0===e&&(e=","),null===t)return"COLLECTION_NULL";if(u(t))return"COLLECTION_UNDEFINED";if(l(t))return t.toString();var n="{",o=!0;for(var i in t)r.has(t,i)&&(o?o=!1:n+=e,n=n+i+":"+t[i]);return n+"}"}function a(t){return"function"==typeof t}function u(t){return void 0===t}function l(t){return"[object String]"===Object.prototype.toString.call(t)}function c(t){return a(t)?function(e,r){return-1*t(e,r)}:function(t,e){return t<e?1:t===e?0:-1}}function p(t){return function(e,r){return 0===t(e,r)}}var f=Object.prototype.hasOwnProperty;r.has=function(t,e){return f.call(t,e)},r.defaultCompare=n,r.defaultEquals=o,r.defaultToString=i,r.makeString=s,r.isFunction=a,r.isUndefined=u,r.isString=l,r.reverseCompareFunction=c,r.compareToEquals=p},{}],"typescript-collections":[function(t,e,r){"use strict";var n=t("./arrays");r.arrays=n;var o=t("./Bag");r.Bag=o.default;var i=t("./BSTree");r.BSTree=i.default;var s=t("./Dictionary");r.Dictionary=s.default;var a=t("./Heap");r.Heap=a.default;var u=t("./LinkedDictionary");r.LinkedDictionary=u.default;var l=t("./LinkedList");r.LinkedList=l.default;var c=t("./MultiDictionary");r.MultiDictionary=c.default;var p=t("./FactoryDictionary");r.FactoryDictionary=p.default;var f=t("./FactoryDictionary");r.DefaultDictionary=f.default;var g=t("./Queue");r.Queue=g.default;var h=t("./PriorityQueue");r.PriorityQueue=h.default;var d=t("./Set");r.Set=d.default;var y=t("./Stack");r.Stack=y.default;var m=t("./MultiRootTree");r.MultiRootTree=m.default;var v=t("./util");r.util=v},{"./BSTree":1,"./Bag":2,"./Dictionary":3,"./FactoryDictionary":4,"./Heap":5,"./LinkedDictionary":6,"./LinkedList":7,"./MultiDictionary":8,"./MultiRootTree":9,"./PriorityQueue":10,"./Queue":11,"./Set":12,"./Stack":13,"./arrays":14,"./util":15}]},{},[]))("typescript-collections")})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./BSTree":15,"./Bag":16,"./Dictionary":17,"./FactoryDictionary":18,"./Heap":19,"./LinkedDictionary":20,"./LinkedList":21,"./MultiDictionary":22,"./MultiRootTree":23,"./PriorityQueue":24,"./Queue":25,"./Set":26,"./Stack":27,"./arrays":28,"./util":30,"typescript-collections":29}],30:[function(t,e,r){"use strict";function n(t,e){return t<e?-1:t===e?0:1}function o(t,e){return t===e}function i(t){return null===t?"COLLECTION_NULL":u(t)?"COLLECTION_UNDEFINED":l(t)?"$s"+t:"$o"+t.toString()}function s(t,e){if(void 0===e&&(e=","),null===t)return"COLLECTION_NULL";if(u(t))return"COLLECTION_UNDEFINED";if(l(t))return t.toString();var n="{",o=!0;for(var i in t)r.has(t,i)&&(o?o=!1:n+=e,n=n+i+":"+t[i]);return n+"}"}function a(t){return"function"==typeof t}function u(t){return void 0===t}function l(t){return"[object String]"===Object.prototype.toString.call(t)}function c(t){return a(t)?function(e,r){return-1*t(e,r)}:function(t,e){return t<e?1:t===e?0:-1}}function p(t){return function(e,r){return 0===t(e,r)}}var f=Object.prototype.hasOwnProperty;r.has=function(t,e){return f.call(t,e)},r.defaultCompare=n,r.defaultEquals=o,r.defaultToString=i,r.makeString=s,r.isFunction=a,r.isUndefined=u,r.isString=l,r.reverseCompareFunction=c,r.compareToEquals=p},{}],31:[function(t,e,r){"use strict";var n=t("../utils/DataStructures"),o=t("../log/category/CategoryService"),i=t("../log/LoggerOptions"),s=function(){function t(){}return t.prototype.help=function(){console.log(t._help)},t.prototype.example=function(){console.log(t._example)},t.prototype.showSettings=function(e){void 0===e&&(e="all");var r=new n.StringBuilder,o=t._getCategoryService();t._getCategories(e).forEach(function(e){t._processCategory(o,e,r,0)}),console.log(r.toString())},t.prototype.change=function(e){var r=t._getCategoryService(),n=t._getCategories(e.category),o=null,s=null,a=null,u=null,l=null,c=function(t){null!==l&&(l+=", "),null===l?l=t:l+=t};c("recursive="+e.recursive),"string"==typeof e.logLevel&&(o=i.LogLevel.fromString(e.logLevel),c("logLevel="+e.logLevel)),"string"==typeof e.logFormat&&(s=i.DateFormatEnum.fromString(e.logFormat),c("logFormat="+e.logFormat)),"boolean"==typeof e.showCategoryName&&(a=e.showCategoryName,c("showCategoryName="+e.showCategoryName)),"boolean"==typeof e.showTimestamp&&(u=e.showTimestamp,c("showTimestamp="+e.showTimestamp));var p=function(t){var e=r.getCategorySettings(t);null!==e&&(null!==o&&(e.logLevel=o),null!==s&&(e.logFormat.dateFormat.formatEnum=s),null!==u&&(e.logFormat.showTimeStamp=u),null!==a&&(e.logFormat.showCategoryName=a))};n.forEach(function(r){return t._applyToCategory(r,e.recursive,p)}),console.log("Applied changes: "+l+" to categories '"+e.category+"'.")},t.prototype.reset=function(e){void 0===e&&(e="all");var r=t._getCategoryService(),n=function(t){var e=r.getCategorySettings(t),n=r.getOriginalCategorySettings(t);null!==e&&null!==n&&(e.logLevel=n.logLevel,e.logFormat.dateFormat.formatEnum=n.logFormat.dateFormat.formatEnum,e.logFormat.showTimeStamp=n.logFormat.showTimeStamp,e.logFormat.showCategoryName=n.logFormat.showCategoryName)};t._getCategories(e).forEach(function(e){return t._applyToCategory(e,!0,n)}),console.log("Applied reset to category: "+e+".")},t._processCategory=function(e,r,n,o){var s=e.getCategorySettings(r);if(null!==s){if(n.append("  "+r.id+": "),o>0)for(var a=0;a<o;a++)n.append("  ");n.append(r.name+" ("+i.LogLevel[s.logLevel].toString()+"@"+i.LoggerType[s.loggerType].toString()+")\n"),r.children.length>0&&r.children.forEach(function(r){t._processCategory(e,r,n,o+1)})}},t._applyToCategory=function(e,r,n){n(e),r&&e.children.forEach(function(e){t._applyToCategory(e,r,n)})},t._getCategoryService=function(){return o.CategoryServiceFactory.getRuntimeSettings()},t._getCategories=function(e){var r=t._getCategoryService(),n=[];if("all"===e)n=r.getRootCategories();else{var o=r.getCategoryById(e);if(null===o)throw new Error("Failed to find category with id "+e);n.push(o)}return n},t}();s._help='\n  help(): void\n    ** Shows this help.\n    \n  example(): void\n    ** Shows an example on how to use this.\n    \n  showSettings(id: number | "all" = "all"): void\n    ** Shows settings for a specific category, or for all. The id of categories can be found by calling this method without parameter.\n    \n  change(settings: CategoryServiceControlSettings): void\n    ** Changes the current settings for one or all categories. \n    ** \n       CategoryServiceControlSettings, properties of object:\n         category: number | "all"\n           ** Apply to specific category, or "all".\n           ** Required        \n        \n         recursive: boolean\n           ** Apply to child categories (true) or not.\n           ** Required\n           \n         logLevel: "Fatal" | "Error" | "Warn" | "Info" | "Debug" | "Trace" | undefined\n           ** Set log level, undefined will not change the setting.\n           ** Optional\n         \n         logFormat: "Default" | "YearMonthDayTime" | "YearDayMonthWithFullTime" | "YearDayMonthTime" | undefined\n           ** Set the log format, undefined will not change the setting.\n           ** Optional\n         \n         showTimestamp: boolean | undefined  \n           ** Whether to show timestamp, undefined will not change the setting.\n           ** Optional\n         \n         showCategoryName: boolean | undefined\n           ** Whether to show the category name, undefined will not change the setting.\n           ** Optional\n           \n   reset(id: number | "all"): void\n     ** Resets everything to original values, for one specific or for all categories.\n',s._example='\n  Examples:\n    change({category: "all", recursive:true, logLevel: "Info"}) \n      ** Change loglevel to Info for all categories, apply to child categories as well.\n     \n    change({category: 1, recursive:false, logLevel: "Warn"})\n      ** Change logLevel for category 1, do not recurse.\n      \n    change({category: "all", recursive:true, logLevel: "Debug", logFormat: "YearDayMonthTime", showTimestamp:false, showCategoryName:false})    \n      ** Change loglevel to Debug for all categories, apply format, do not show timestamp and category names - recursively to child categories.    \n      \n',r.CategoryServiceControlImpl=s},{"../log/LoggerOptions":34,"../log/category/CategoryService":41,"../utils/DataStructures":48}],32:[function(t,e,r){"use strict";var n=t("../log/LoggerOptions"),o=t("../log/standard/LoggerFactoryService"),i=t("../utils/DataStructures"),s=function(){function t(){}return t.prototype.help=function(){console.log(t._help)},t.prototype.listFactories=function(){var e=t._getRuntimeSettingsLoggerFactories(),r=new i.StringBuilder;r.appendLine("Registered LoggerFactories (index / name)");for(var n=0;n<e.length;n++){var o=e[n];r.append("  "+n).append(": "+o.getName()+"\n")}console.log(r.toString())},t.prototype.showSettings=function(e){void 0===e&&(e="all");var r=[];if("all"===e){var o=0;t._getRuntimeSettingsLoggerFactories().forEach(function(t){r.push(new i.TuplePair(o++,t))})}else{var s=t._getRuntimeSettingsLoggerFactories();if(!(e>=0&&e<s.length))throw new Error("Requested number: "+e+" was not found.");r.push(new i.TuplePair(e,s[e]))}for(var a=0,u=r;a<u.length;a++){var l=u[a];console.log("  LoggerFactory: "+l.y.getName()+" (id="+l.x+")");for(var c=l.y.getLogGroupRuntimeSettings(),p=0;p<c.length;p++){var f=c[p];console.log("     LogGroup: (id="+p+")"),console.log("       RegExp: "+f.logGroupRule.regExp.source),console.log("       Level: "+n.LogLevel[f.level].toString()),console.log("       LoggerType: "+n.LoggerType[f.loggerType].toString())}}},t.prototype.reset=function(e){void 0===e&&(e="all");var r=t._getRuntimeSettingsLoggerFactories(),n=[];"all"===e?n=r:e>=0&&e<r.length&&n.push(r[e]),n.forEach(function(t){console.log("Reset all settings for factory "+e),new a(t).reset()})},t.prototype.getLoggerFactoryControl=function(e){var r=t._getRuntimeSettingsLoggerFactories();if(e>=0&&e<r.length)return new a(r[e]);throw new Error("idFactory is invalid (less than 0) or non existing id.")},t._getRuntimeSettingsLoggerFactories=function(){return t._getSettings().getRuntimeSettingsForLoggerFactories()},t._getSettings=function(){return o.LFService.getRuntimeSettings()},t}()
;s._help='\n  help(): void\n    ** Shows this help.\n    \n  listFactories(): void\n    ** List all registered LoggerFactories with associated log groups with respective ids (ids can be used to target a factory and/or group).\n    \n  showSettings(idFactory: number | "all"): void\n    ** Show log group settings for idFactory (use listFactories to find id for a LoggerFactory). If idFactory is "all" shows all factories. \n  \n  getLoggerFactoryControl(idFactory: number): LoggerFactoryControl\n    ** Return LoggerFactoryControl when found for given idFactory or throws Error if invalid or null, get the id by using listFactories()\n    \n  reset(idFactory: number | "all"): void\n    ** Resets given factory or all factories back to original values. \n',r.LoggerControlImpl=s;var a=function(){function t(t){this._settings=t}return t.prototype.help=function(){console.log(t._help)},t.prototype.example=function(){console.log(t._example)},t.prototype.showSettings=function(t){void 0===t&&(t="all");var e=new i.StringBuilder,r=this._settings.getLogGroupRuntimeSettings();e.appendLine("Registered LogGroups (index / expression)");for(var o=0;o<r.length;o++){var s=r[o];e.appendLine("  "+o+": "+s.logGroupRule.regExp.source+", logLevel="+n.LogLevel[s.level].toString()+", showTimestamp="+s.logFormat.showTimeStamp+", showLoggerName="+s.logFormat.showLoggerName+", format="+n.DateFormatEnum[s.logFormat.dateFormat.formatEnum].toString())}console.log(e.toString())},t.prototype.change=function(t){var e=this._getLogGroupRunTimeSettingsFor(t.group),r=null,o=null,i=null,s=null,a=null,u=function(t){null!==a&&(a+=", "),null===a?a=t:a+=t};"string"==typeof t.logLevel&&(r=n.LogLevel.fromString(t.logLevel),u("logLevel="+t.logLevel)),"string"==typeof t.logFormat&&(o=n.DateFormatEnum.fromString(t.logFormat),u("logFormat="+t.logFormat)),"boolean"==typeof t.showLoggerName&&(i=t.showLoggerName,u("showLoggerName="+t.showLoggerName)),"boolean"==typeof t.showTimestamp&&(s=t.showTimestamp,u("showTimestamp="+t.showTimestamp)),e.forEach(function(t){null!==r&&(t.level=r),null!==o&&(t.logFormat.dateFormat.formatEnum=o),null!==s&&(t.logFormat.showTimeStamp=s),null!==i&&(t.logFormat.showLoggerName=i)}),console.log("Applied changes: "+a+" to log groups '"+t.group+"'.")},t.prototype.reset=function(t){void 0===t&&(t="all");for(var e=this._getLogGroupRunTimeSettingsFor(t),r=0,n=e;r<n.length;r++){var o=n[r];o.level=o.logGroupRule.level,o.logFormat.showTimeStamp=o.logGroupRule.logFormat.showTimeStamp,o.logFormat.showLoggerName=o.logGroupRule.logFormat.showLoggerName,o.logFormat.dateFormat.formatEnum=o.logGroupRule.logFormat.dateFormat.formatEnum}console.log("Reset all settings for group "+t)},t.prototype._getLogGroupRunTimeSettingsFor=function(t){var e=[];return"all"===t?e=this._settings.getLogGroupRuntimeSettings():(this._checkIndex(t),e.push(this._settings.getLogGroupRuntimeSettings()[t])),e},t.prototype._checkIndex=function(t){if(t<0||t>=this._settings.getLogGroupRuntimeSettings().length)throw new Error("Invalid index, use listLogGroups to find out a valid one.")},t}();a._help='\n  help(): void\n    ** Shows this help.\n    \n  example(): void\n    ** Shows an example of usage.\n\n  showSettings(id: number | "all"): void\n    ** Prints settings for given group id, "all" for all group.\n\n  change(settings: LogGroupControlSettings): void\n    ** Changes the current settings for one or all log groups. \n    ** \n       LogGroupControlSettings, properties of object:\n         group: number | "all"\n           ** Apply to specific group, or "all".\n           ** Required        \n           \n         logLevel: "Fatal" | "Error" | "Warn" | "Info" | "Debug" | "Trace" | undefined\n           ** Set log level, undefined will not change the setting.\n           ** Optional\n         \n         logFormat: "Default" | "YearMonthDayTime" | "YearDayMonthWithFullTime" | "YearDayMonthTime" | undefined\n           ** Set the log format, undefined will not change the setting.\n           ** Optional\n         \n         showTimestamp: boolean | undefined  \n           ** Whether to show timestamp, undefined will not change the setting.\n           ** Optional\n         \n         showLoggerName: boolean | undefined\n           ** Whether to show the logger name, undefined will not change the setting.\n           ** Optional  \n           \n  reset(id: number | "all"): void\n    ** Resets everything to original values, for one specific or for all groups.\n    \n  help():\n    ** Shows this help.\n',a._example='\n  Examples:\n    change({group: "all", logLevel: "Info"}) \n      ** Change loglevel to Info for all groups.\n     \n    change({group: 1, recursive:false, logLevel: "Warn"})\n      ** Change logLevel for group 1 to Warn.\n      \n    change({group: "all", logLevel: "Debug", logFormat: "YearDayMonthTime", showTimestamp:false, showLoggerName:false})    \n      ** Change loglevel to Debug for all groups, apply format, do not show timestamp and logger names.      \n'},{"../log/LoggerOptions":34,"../log/standard/LoggerFactoryService":45,"../utils/DataStructures":48}],33:[function(t,e,r){"use strict";var n=t("../log/category/CategoryService"),o=t("../log/LoggerOptions"),i=t("../utils/MessageUtils"),s=function(){function t(){}return t.register=function(){if(!t.registered){t.registered=!0;var e=function(e){var r=e.data;null!==r&&t.processMessageFromExtension(r)};"undefined"!=typeof window&&(window.removeEventListener("message",e),window.addEventListener("message",e))}},t.processMessageFromExtension=function(e){if(t.registered)if("tsl-extension"===e.from){var r=e.data;switch(r.type){case"register":t.enableExtensionIntegration();break;case"request-change-loglevel":var n=r.value,o=t.applyLogLevel(n.categoryId,n.logLevel,n.recursive);o.length>0&&t.sendCategoriesRuntimeUpdateMessage(o);break;default:console.log("Unknown command to process message from extension, command was: "+r.type)}}else"tsl-logging"!==e.from&&console.log("Dropping unknown message: "+JSON.stringify(e))},t.sendCategoryLogMessage=function(e){if(t.registered){var r=e.getCategories().map(function(t){return t.id}),n={type:"log-message",value:{categories:r,errorAsStack:e.getErrorAsStack(),formattedMessage:i.MessageFormatUtils.renderDefaultMessage(e,!1),logLevel:o.LogLevel[e.getLevel()].toString(),message:e.getMessage(),resolvedErrorMessage:e.isResolvedErrorMessage()}},s={data:n,from:"tsl-logging"};t.sendMessage(s)}},t.sendCategoriesRuntimeUpdateMessage=function(e){if(t.registered){var r=n.CategoryServiceImpl.getInstance(),i={categories:Array()};e.forEach(function(t){var e=r.getCategorySettings(t);null!=e&&i.categories.push({id:t.id,logLevel:o.LogLevel[e.logLevel].toString()})});var s={type:"categories-rt-update",value:i},a={data:s,from:"tsl-logging"};t.sendMessage(a)}},t.sendRootCategoriesToExtension=function(){if(t.registered){var e=n.CategoryServiceImpl.getInstance().getRootCategories().map(function(e){return t.getCategoryAsJSON(e)}),r={type:"root-categories-tree",value:e},o={data:r,from:"tsl-logging"};t.sendMessage(o)}},t.getCategoryAsJSON=function(e){return{children:e.children.map(function(e){return t.getCategoryAsJSON(e)}),id:e.id,logLevel:o.LogLevel[e.logLevel].toString(),name:e.name,parentId:null!=e.parent?e.parent.id:null}},t.applyLogLevel=function(e,r,i){var s=[],a=n.CategoryServiceImpl.getInstance().getCategoryById(e);return null!=a?t._applyLogLevelRecursive(a,o.LogLevel.fromString(r),i,s):console.log("Could not change log level, failed to find category with id: "+e),s},t._applyLogLevelRecursive=function(e,r,o,i){var s=n.CategoryServiceImpl.getInstance().getCategorySettings(e);null!=s&&(s.logLevel=r,i.push(e),o&&e.children.forEach(function(e){t._applyLogLevelRecursive(e,r,o,i)}))},t.getAllCategories=function(){var t=[],e=function(t,r){r.push(t),t.children.forEach(function(t){e(t,r)})};return n.CategoryServiceImpl.getInstance().getRootCategories().forEach(function(r){e(r,t)}),t},t.sendMessage=function(e){t.registered&&"undefined"!=typeof window&&window.postMessage(e,"*")},t.enableExtensionIntegration=function(){if(t.registered){n.CategoryServiceImpl.getInstance().enableExtensionIntegration(),t.sendRootCategoriesToExtension();var e=t.getAllCategories();t.sendCategoriesRuntimeUpdateMessage(e)}},t}();s.registered=!1,r.ExtensionHelper=s},{"../log/LoggerOptions":34,"../log/category/CategoryService":41,"../utils/MessageUtils":50}],34:[function(t,e,r){"use strict";!function(t){t[t.Trace=0]="Trace",t[t.Debug=1]="Debug",t[t.Info=2]="Info",t[t.Warn=3]="Warn",t[t.Error=4]="Error",t[t.Fatal=5]="Fatal"}(r.LogLevel||(r.LogLevel={})),function(t){function e(e){if(null==e)throw new Error("Argument must be set");switch(e.toLowerCase()){case"trace":return t.Trace;case"debug":return t.Debug;case"info":return t.Info;case"warn":return t.Warn;case"error":return t.Error;case"fatal":return t.Fatal;default:throw new Error("Unsupported value for conversion: "+e)}}t.fromString=e}(r.LogLevel||(r.LogLevel={}));!function(t){t[t.Console=0]="Console",t[t.MessageBuffer=1]="MessageBuffer",t[t.Custom=2]="Custom"}(r.LoggerType||(r.LoggerType={}));var n;!function(t){t[t.Default=0]="Default",t[t.YearMonthDayTime=1]="YearMonthDayTime",t[t.YearDayMonthWithFullTime=2]="YearDayMonthWithFullTime",t[t.YearDayMonthTime=3]="YearDayMonthTime"}(n=r.DateFormatEnum||(r.DateFormatEnum={})),function(t){function e(e){if(null==e)throw new Error("Argument must be set");switch(e.toLowerCase()){case"default":return t.Default;case"yearmonthdayTime":return t.YearMonthDayTime;case"yeardaymonthwithfulltime":return t.YearDayMonthWithFullTime;case"yeardaymonthtime":return t.YearDayMonthTime;default:throw new Error("Unsupported value for conversion: "+e)}}t.fromString=e}(n=r.DateFormatEnum||(r.DateFormatEnum={}));var o=function(){function t(t,e){void 0===t&&(t=n.Default),void 0===e&&(e="-"),this._formatEnum=t,this._dateSeparator=e}return Object.defineProperty(t.prototype,"formatEnum",{get:function(){return this._formatEnum},set:function(t){this._formatEnum=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dateSeparator",{get:function(){return this._dateSeparator},set:function(t){this._dateSeparator=t},enumerable:!0,configurable:!0}),t.prototype.copy=function(){return new t(this._formatEnum,this._dateSeparator)},t}();r.DateFormat=o;var i=function(){function t(t,e,r){void 0===t&&(t=new o),void 0===e&&(e=!0),void 0===r&&(r=!0),this._showTimeStamp=!0,this._showLoggerName=!0,this._dateFormat=t,this._showTimeStamp=e,this._showLoggerName=r}return Object.defineProperty(t.prototype,"dateFormat",{get:function(){return this._dateFormat},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showTimeStamp",{get:function(){return this._showTimeStamp},set:function(t){this._showTimeStamp=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showLoggerName",{get:function(){return this._showLoggerName},set:function(t){this._showLoggerName=t},enumerable:!0,configurable:!0}),t}();r.LogFormat=i;var s=function(){function t(t,e,r){void 0===t&&(t=new o),void 0===e&&(e=!0),void 0===r&&(r=!0),this._dateFormat=t,this._showTimeStamp=e,this._showCategoryName=r}return Object.defineProperty(t.prototype,"dateFormat",{get:function(){return this._dateFormat},set:function(t){this._dateFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showTimeStamp",{get:function(){return this._showTimeStamp},set:function(t){this._showTimeStamp=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showCategoryName",{get:function(){return this._showCategoryName},set:function(t){this._showCategoryName=t},enumerable:!0,configurable:!0}),t.prototype.copy=function(){return new t(this._dateFormat.copy(),this._showTimeStamp,this._showCategoryName)},t}();r.CategoryLogFormat=s},{}],35:[function(t,e,r){"use strict";var n=t("../../utils/DataStructures"),o=t("../../utils/MessageUtils"),i=t("../LoggerOptions"),s=function(){function t(t,e,r,n,o,i,s){this._resolvedErrorMessage=!1,this._errorAsStack=null,this._message=t,this._error=e,this._categories=r,this._date=n,this._level=o,this._logFormat=i,this._ready=s}return t.prototype.getMessage=function(){return this._message},t.prototype.getErrorAsStack=function(){return this._errorAsStack},t.prototype.setErrorAsStack=function(t){this._errorAsStack=t},t.prototype.getError=function(){return this._error},t.prototype.getCategories=function(){return this._categories},t.prototype.getDate=function(){return this._date},t.prototype.getLevel=function(){return this._level},t.prototype.getLogFormat=function(){return this._logFormat},t.prototype.isReady=function(){return this._ready},t.prototype.setReady=function(t){this._ready=t},Object.defineProperty(t.prototype,"resolvedErrorMessage",{get:function(){return this._resolvedErrorMessage},set:function(t){this._resolvedErrorMessage=t},enumerable:!0,configurable:!0}),t.prototype.isResolvedErrorMessage=function(){return this._resolvedErrorMessage},t}(),a=function(){function t(t,e){this.allMessages=new n.LinkedList,this.rootCategory=t,this.runtimeSettings=e}return t.prototype.trace=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this._log.apply(this,[i.LogLevel.Trace,t,null,!1].concat(e))},t.prototype.debug=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this._log.apply(this,[i.LogLevel.Debug,t,null,!1].concat(e))},t.prototype.info=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this._log.apply(this,[i.LogLevel.Info,t,null,!1].concat(e))},t.prototype.warn=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this._log.apply(this,[i.LogLevel.Warn,t,null,!1].concat(e))},t.prototype.error=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];this._log.apply(this,[i.LogLevel.Error,t,e,!1].concat(r))},t.prototype.fatal=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];this._log.apply(this,[i.LogLevel.Fatal,t,e,!1].concat(r))},t.prototype.resolved=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];this._log.apply(this,[i.LogLevel.Error,t,e,!0].concat(r))},t.prototype.log=function(t,e,r){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];this._log.apply(this,[t,e,r,!1].concat(n))},t.prototype.tracec=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this._logc.apply(this,[i.LogLevel.Trace,t,function(){return null},!1].concat(e))},t.prototype.debugc=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this._logc.apply(this,[i.LogLevel.Debug,t,function(){return null},!1].concat(e))},t.prototype.infoc=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this._logc.apply(this,[i.LogLevel.Info,t,function(){return null},!1].concat(e))},t.prototype.warnc=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this._logc.apply(this,[i.LogLevel.Warn,t,function(){return null},!1].concat(e))},t.prototype.errorc=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];this._logc.apply(this,[i.LogLevel.Error,t,e,!1].concat(r))},t.prototype.fatalc=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];this._logc.apply(this,[i.LogLevel.Fatal,t,e,!1].concat(r))},t.prototype.resolvedc=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];this._logc.apply(this,[i.LogLevel.Error,t,e,!0].concat(r))},t.prototype.logc=function(t,e,r){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];this._logc.apply(this,[t,e,r,!1].concat(n))},t.prototype.getRootCategory=function(){return this.rootCategory},t.prototype.createDefaultLogMessage=function(t){return o.MessageFormatUtils.renderDefaultMessage(t,!0)},t.prototype._log=function(t,e,r,n){void 0===r&&(r=null),void 0===n&&(n=!1);for(var o=[],i=4;i<arguments.length;i++)o[i-4]=arguments[i];this._logInternal.apply(this,[t,function(){return e},function(){return r},n].concat(o))},t.prototype._logc=function(t,e,r,n){void 0===n&&(n=!1);for(var o=[],i=4;i<arguments.length;i++)o[i-4]=arguments[i];this._logInternal.apply(this,[t,e,r,n].concat(o))},t.prototype._logInternal=function(t,e,r,n){for(var i=this,a=[],u=4;u<arguments.length;u++)a[u-4]=arguments[u];var l;void 0!==a&&a.length>0?l=a:(l=[],l.push(this.rootCategory));for(var c=this,p=0;p<l.length;p++){if("break"===function(a){var u=l[a];if(null==u)throw new Error("Cannot have a null element within categories, at index="+a);var p=c.runtimeSettings.getCategorySettings(u);if(null==p)throw new Error("Category with path: "+u.getCategoryPath()+" is not registered with this logger, maybe you registered it with a different root logger?");if(p.logLevel<=t){var f=null!=r?r():null;if(null==f){var g=new s(e(),f,l,new Date,t,p.logFormat,!0);g.resolvedErrorMessage=n,c.allMessages.addTail(g),c.processMessages()}else{var h=new s(e(),f,l,new Date,t,p.logFormat,!1);h.resolvedErrorMessage=n,c.allMessages.addTail(h),o.MessageFormatUtils.renderError(f).then(function(t){h.setErrorAsStack(t),h.setReady(!0),i.processMessages()})}return"break"}}(p))break}},t.prototype.processMessages=function(){var t=this.allMessages;if(t.getSize()>0)do{var e=t.getHead();if(null!=e){if(!e.isReady())break;t.removeHead(),this.doLog(e)}}while(t.getSize()>0)},t}();r.AbstractCategoryLogger=a},{"../../utils/DataStructures":48,"../../utils/MessageUtils":50,"../LoggerOptions":34}],36:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=t("../LoggerOptions"),i=t("./AbstractCategoryLogger"),s=function(t){function e(e,r){return t.call(this,e,r)||this}return n(e,t),e.prototype.doLog=function(t){var e=this.createDefaultLogMessage(t);if(void 0===console)throw new Error("Console is not defined, cannot log msg: "+e);var r=!1;switch(t.getLevel()){case o.LogLevel.Trace:break;case o.LogLevel.Debug:console.debug&&(console.debug(e),r=!0);break;case o.LogLevel.Info:console.info&&(console.info(e),r=!0);break;case o.LogLevel.Warn:console.warn&&(console.warn(e),r=!0);break;case o.LogLevel.Error:case o.LogLevel.Fatal:console.error&&(console.error(e),r=!0);break;default:throw new Error("Unsupported level: "+t.getLevel())}r||console.log(e)},e}(i.AbstractCategoryLogger);r.CategoryConsoleLoggerImpl=s},{"../LoggerOptions":34,"./AbstractCategoryLogger":35}],37:[function(t,e,r){"use strict";var n=function(){function t(t){this._delegate=t}return Object.defineProperty(t.prototype,"delegate",{get:function(){return this._delegate},set:function(t){this._delegate=t},enumerable:!0,configurable:!0}),t.prototype.trace=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];(n=this._delegate).trace.apply(n,[t].concat(e));var n},t.prototype.debug=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];(n=this._delegate).debug.apply(n,[t].concat(e));var n},t.prototype.info=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];(n=this._delegate).info.apply(n,[t].concat(e));var n},t.prototype.warn=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];(n=this._delegate).warn.apply(n,[t].concat(e));var n},t.prototype.error=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];(o=this._delegate).error.apply(o,[t,e].concat(r));var o},t.prototype.fatal=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];(o=this._delegate).fatal.apply(o,[t,e].concat(r));var o},t.prototype.resolved=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];(o=this._delegate).resolved.apply(o,[t,e].concat(r));var o},t.prototype.log=function(t,e,r){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];(i=this._delegate).log.apply(i,[t,e,r].concat(n));var i},t.prototype.tracec=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];(n=this._delegate).tracec.apply(n,[t].concat(e));var n},t.prototype.debugc=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];(n=this._delegate).debugc.apply(n,[t].concat(e));var n},t.prototype.infoc=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];(n=this._delegate).infoc.apply(n,[t].concat(e));var n},t.prototype.warnc=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];(n=this._delegate).warnc.apply(n,[t].concat(e));var n},t.prototype.errorc=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];(o=this._delegate).errorc.apply(o,[t,e].concat(r));var o},t.prototype.fatalc=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];(o=this._delegate).fatalc.apply(o,[t,e].concat(r));var o},t.prototype.resolvedc=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];(o=this._delegate).resolvedc.apply(o,[t,e].concat(r));var o},t.prototype.logc=function(t,e,r){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];(i=this._delegate).logc.apply(i,[t,e,r].concat(n));var i},t}();r.CategoryDelegateLoggerImpl=n},{}],38:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=t("../../extension/ExtensionHelper"),i=t("./AbstractCategoryLogger"),s=function(t){function e(e,r){return t.call(this,e,r)||this}return n(e,t),e.prototype.doLog=function(t){"undefined"!=typeof window?o.ExtensionHelper.sendCategoryLogMessage(t):console.log("window is not available, you must be running in a browser for this. Dropped message.")},e}(i.AbstractCategoryLogger);r.CategoryExtensionLoggerImpl=s},{"../../extension/ExtensionHelper":33,"./AbstractCategoryLogger":35}],39:[function(t,e,r){"use strict";var n=t("../LoggerOptions"),o=t("./CategoryService"),i=function(){function t(e,r){if(void 0===r&&(r=null),this._children=[],this._logLevel=n.LogLevel.Error,-1!==e.indexOf("#"))throw new Error("Cannot use # in a name of a Category");this._id=t.nextId(),this._name=e,this._parent=r,null!=this._parent&&this._parent._children.push(this),o.CategoryServiceImpl.getInstance().registerCategory(this)}return Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},enumerable:!0,configurable:!0}),t.prototype.getCategoryPath=function(){for(var t=this.name,e=this.parent;null!=e;)t=e.name+"#"+t,e=e.parent;return t},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),t.nextId=function(){return t.currentId++},t}();i.currentId=1,r.Category=i},{"../LoggerOptions":34,"./CategoryService":41}],40:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=t("./AbstractCategoryLogger"),i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.messages=[],e}return n(e,t),e.prototype.getMessages=function(){return this.messages},e.prototype.toString=function(){return this.messages.map(function(t){return t}).join("\n")},e.prototype.doLog=function(t){var e=this.createDefaultLogMessage(t);this.messages.push(e)},e}(o.AbstractCategoryLogger);r.CategoryMessageBufferLoggerImpl=i},{"./AbstractCategoryLogger":35}],41:[function(t,e,r){"use strict";var n=t("../../utils/DataStructures"),o=t("../LoggerOptions"),i=t("./CategoryConsoleLoggerImpl"),s=t("./CategoryDelegateLoggerImpl"),a=t("./CategoryExtensionLoggerImpl"),u=t("./CategoryMessageBufferImpl"),l=t("../../extension/ExtensionHelper"),c=function(){function t(t,e,r,n,i){void 0===e&&(e=o.LogLevel.Error),void 0===r&&(r=o.LoggerType.Console),void 0===n&&(n=new o.CategoryLogFormat),void 0===i&&(i=null),this._category=t,this._logLevel=e,this._loggerType=r,this._logFormat=n,this._callBackLogger=i}return Object.defineProperty(t.prototype,"category",{get:function(){return this._category},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loggerType",{get:function(){return this._loggerType},set:function(t){this._loggerType=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logFormat",{get:function(){return this._logFormat},set:function(t){this._logFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"callBackLogger",{get:function(){return this._callBackLogger},set:function(t){this._callBackLogger=t},enumerable:!0,configurable:!0}),t}();r.CategoryRuntimeSettings=c;var p=function(){function t(t,e,r,n){if(void 0===t&&(t=o.LogLevel.Error),void 0===e&&(e=o.LoggerType.Console),void 0===r&&(r=new o.CategoryLogFormat),void 0===n&&(n=null),this._logLevel=t,this._loggerType=e,this._logFormat=r,this._callBackLogger=n,this._loggerType===o.LoggerType.Custom&&null===this.callBackLogger)throw new Error("If you specify loggerType to be Custom, you must provide the callBackLogger argument")}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loggerType",{get:function(){return this._loggerType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logFormat",{get:function(){return this._logFormat},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"callBackLogger",{get:function(){return this._callBackLogger},enumerable:!0,configurable:!0}),t.prototype.copy=function(){return new t(this.logLevel,this.loggerType,this.logFormat.copy(),this.callBackLogger)},t}();r.CategoryDefaultConfiguration=p;var f=function(){function t(){this._defaultConfig=new p,this._rootCategories=[],this._categoryRuntimeSettings=new n.SimpleMap,this._categoryOriginalRuntimeSettings=new n.SimpleMap,this._rootLoggers=new n.SimpleMap,l.ExtensionHelper.register()}return t.getInstance=function(){return null===t._INSTANCE&&(t._INSTANCE=new t),t._INSTANCE},t.prototype.getLogger=function(t){if(!this.rootCategoryExists(t))throw new Error("Given category "+t.name+" is not registered as a root category. You must use the root category to retrieve a logger.");var e=this._rootLoggers.get(t.name);if(null!=e)return e.y;var r=new s.CategoryDelegateLoggerImpl(this.createRootLogger(t));return this._rootLoggers.put(t.name,new n.TuplePair(t,r)),r},t.prototype.clear=function(){this._rootCategories=[],this._categoryRuntimeSettings.clear(),this._categoryOriginalRuntimeSettings.clear(),this._rootLoggers.clear(),this.setDefaultConfiguration(new p)},t.prototype.getCategorySettings=function(t){return this._categoryRuntimeSettings.get(t.getCategoryPath())},t.prototype.getOriginalCategorySettings=function(t){return this._categoryOriginalRuntimeSettings.get(t.getCategoryPath())},t.prototype.setDefaultConfiguration=function(t,e){var r=this;if(void 0===e&&(e=!1),this._defaultConfig=t,e){var o=new n.SimpleMap,i=new n.SimpleMap;this._categoryRuntimeSettings.keys().forEach(function(t){var e=r._categoryRuntimeSettings.get(t);if(null===e)throw new Error("No setting associated with key="+t);var n=r._defaultConfig.copy(),s=new c(e.category,n.logLevel,n.loggerType,n.logFormat,n.callBackLogger),a=r._defaultConfig.copy(),u=new c(e.category,a.logLevel,a.loggerType,a.logFormat,a.callBackLogger);o.put(t,s),i.put(t,u)}),this._categoryRuntimeSettings.clear(),this._categoryOriginalRuntimeSettings.clear(),this._categoryRuntimeSettings=o,this._categoryOriginalRuntimeSettings=i,this._rootLoggers.values().forEach(function(t){t.y.delegate=r.createRootLogger(t.x)})}},t.prototype.setConfigurationCategory=function(t,e,r,n){var o=this;void 0===r&&(r=!1),void 0===n&&(n=!1);var i=this.getCategorySettings(e);if(null===i)throw new Error("Given category is not registered: "+e.name);if(i.logLevel=t.logLevel,i.loggerType=t.loggerType,i.logFormat=t.logFormat,i.callBackLogger=t.callBackLogger,r&&e.children.forEach(function(e){o.setConfigurationCategory(t,e,r,n)}),n&&this.rootCategoryExists(e)){var s=this._rootLoggers.get(e.name);null!==s&&(s.y.delegate=this.createRootLogger(s.x))}},t.prototype.registerCategory=function(t){if(null==t||void 0===t)throw new Error("Category CANNOT be null");if(null==t.parent){for(var e=0,r=this._rootCategories;e<r.length;e++)if(r[e].name===t.name)throw new Error("Cannot add this rootCategory with name: "+t.name+", another root category is already registered with that name.");this._rootCategories.push(t)}this.initializeRuntimeSettingsForCategory(t)},t.prototype.enableExtensionIntegration=function(){var t=this;this._rootLoggers.values().forEach(function(e){e.y instanceof a.CategoryExtensionLoggerImpl||(console.log("Reconfiguring root logger for root category: "+e.x.name),e.y.delegate=new a.CategoryExtensionLoggerImpl(e.x,t))})},t.prototype.getRootCategories=function(){return this._rootCategories.slice(0)},t.prototype.getCategoryById=function(t){var e=this._categoryRuntimeSettings.values().filter(function(e){return e.category.id===t}).map(function(t){return t.category});return 1===e.length?e[0]:null},t.prototype.initializeRuntimeSettingsForCategory=function(t){var e=this._categoryRuntimeSettings.get(t.getCategoryPath());if(null!==e)throw new Error("Category with path: "+t.getCategoryPath()+" is already registered?");var r=this._defaultConfig.copy();e=new c(t,r.logLevel,r.loggerType,r.logFormat,r.callBackLogger);var n=this._defaultConfig.copy(),o=new c(t,n.logLevel,n.loggerType,n.logFormat,n.callBackLogger);this._categoryRuntimeSettings.put(t.getCategoryPath(),e),this._categoryOriginalRuntimeSettings.put(t.getCategoryPath(),o)},t.prototype.rootCategoryExists=function(t){if(null==t||void 0===t)throw new Error("Root category CANNOT be null");if(null!=t.parent)throw new Error("Parent must be null for a root category");return-1!==this._rootCategories.indexOf(t)},t.prototype.createRootLogger=function(t){switch(this._defaultConfig.loggerType){case o.LoggerType.Console:return new i.CategoryConsoleLoggerImpl(t,this);case o.LoggerType.MessageBuffer:return new u.CategoryMessageBufferLoggerImpl(t,this);case o.LoggerType.Custom:if(null==this._defaultConfig.callBackLogger)throw new Error("Cannot create custom logger, custom callback is null");return this._defaultConfig.callBackLogger(t,this);default:throw new Error("Cannot create a Logger for LoggerType: "+this._defaultConfig.loggerType)}},t}();f._INSTANCE=null,r.CategoryServiceImpl=f;var g=function(){function t(){}return t.getLogger=function(t){return f.getInstance().getLogger(t)},t.clear=function(){return f.getInstance().clear()},t.setDefaultConfiguration=function(t,e){void 0===e&&(e=!1),f.getInstance().setDefaultConfiguration(t,e)},t.setConfigurationCategory=function(t,e,r,n){void 0===r&&(r=!1),void 0===n&&(n=!1),f.getInstance().setConfigurationCategory(t,e,r,n)},t.getRuntimeSettings=function(){return f.getInstance()},t}();r.CategoryServiceFactory=g},{"../../extension/ExtensionHelper":33,"../../utils/DataStructures":48,"../LoggerOptions":34,"./CategoryConsoleLoggerImpl":36,"./CategoryDelegateLoggerImpl":37,"./CategoryExtensionLoggerImpl":38,"./CategoryMessageBufferImpl":40}],42:[function(t,e,r){"use strict";var n=t("../LoggerOptions"),o=t("../../utils/DataStructures"),i=t("../../utils/MessageUtils"),s=function(){function t(t,e,r,n,o,i,s,a){this._errorAsStack=null,this._error=null,this._loggerName=t,this._message=e,this._errorAsStack=r,this._error=n,this._logGroupRule=o,this._date=i,this._level=s,this._ready=a}return Object.defineProperty(t.prototype,"loggerName",{get:function(){return this._loggerName},enumerable:!0,configurable:!0}),
Object.defineProperty(t.prototype,"message",{get:function(){return this._message},set:function(t){this._message=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"errorAsStack",{get:function(){return this._errorAsStack},set:function(t){this._errorAsStack=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"error",{get:function(){return this._error},set:function(t){this._error=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logGroupRule",{get:function(){return this._logGroupRule},set:function(t){this._logGroupRule=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"date",{get:function(){return this._date},set:function(t){this._date=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this._level},set:function(t){this._level=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ready",{get:function(){return this._ready},set:function(t){this._ready=t},enumerable:!0,configurable:!0}),t}(),a=function(){function t(t,e){this._allMessages=new o.LinkedList,this._open=!0,this._name=t,this._logGroupRuntimeSettings=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),t.prototype.trace=function(t,e){void 0===e&&(e=null),this._log(n.LogLevel.Trace,t,e)},t.prototype.debug=function(t,e){void 0===e&&(e=null),this._log(n.LogLevel.Debug,t,e)},t.prototype.info=function(t,e){void 0===e&&(e=null),this._log(n.LogLevel.Info,t,e)},t.prototype.warn=function(t,e){void 0===e&&(e=null),this._log(n.LogLevel.Warn,t,e)},t.prototype.error=function(t,e){void 0===e&&(e=null),this._log(n.LogLevel.Error,t,e)},t.prototype.fatal=function(t,e){void 0===e&&(e=null),this._log(n.LogLevel.Fatal,t,e)},t.prototype.tracec=function(t,e){this._logc(n.LogLevel.Trace,t,e)},t.prototype.debugc=function(t,e){this._logc(n.LogLevel.Debug,t,e)},t.prototype.infoc=function(t,e){this._logc(n.LogLevel.Info,t,e)},t.prototype.warnc=function(t,e){this._logc(n.LogLevel.Warn,t,e)},t.prototype.errorc=function(t,e){this._logc(n.LogLevel.Error,t,e)},t.prototype.fatalc=function(t,e){this._logc(n.LogLevel.Fatal,t,e)},t.prototype.isTraceEnabled=function(){return this._logGroupRuntimeSettings.level===n.LogLevel.Trace},t.prototype.isDebugEnabled=function(){return this._logGroupRuntimeSettings.level<=n.LogLevel.Debug},t.prototype.isInfoEnabled=function(){return this._logGroupRuntimeSettings.level<=n.LogLevel.Info},t.prototype.isWarnEnabled=function(){return this._logGroupRuntimeSettings.level<=n.LogLevel.Warn},t.prototype.isErrorEnabled=function(){return this._logGroupRuntimeSettings.level<=n.LogLevel.Error},t.prototype.isFatalEnabled=function(){return this._logGroupRuntimeSettings.level<=n.LogLevel.Fatal},t.prototype.getLogLevel=function(){return this._logGroupRuntimeSettings.level},t.prototype.isOpen=function(){return this._open},t.prototype.close=function(){this._open=!1,this._allMessages.clear()},t.prototype.createDefaultLogMessage=function(t){return i.MessageFormatUtils.renderDefaultLog4jMessage(t,!0)},t.prototype._log=function(t,e,r){void 0===r&&(r=null),this._open&&this._logGroupRuntimeSettings.level<=t&&(this._allMessages.addTail(this.createMessage(t,e,new Date,r)),this.processMessages())},t.prototype._logc=function(t,e,r){this._open&&this._logGroupRuntimeSettings.level<=t&&(this._allMessages.addTail(this.createMessage(t,e(),new Date,void 0!==r&&null!==r?r():null)),this.processMessages())},t.prototype.createMessage=function(t,e,r,n){var o=this;if(void 0===n&&(n=null),null!==n){var a=new s(this._name,e,null,n,this._logGroupRuntimeSettings.logGroupRule,r,t,!1);return i.MessageFormatUtils.renderError(n).then(function(t){a.errorAsStack=t,a.ready=!0,o.processMessages()}),a}return new s(this._name,e,null,n,this._logGroupRuntimeSettings.logGroupRule,r,t,!0)},t.prototype.processMessages=function(){var t=this._allMessages;if(t.getSize()>0)do{var e=t.getHead();if(null!=e){if(!e.ready)break;t.removeHead(),null!==e.message&&this.doLog(e)}}while(t.getSize()>0)},t}();r.AbstractLogger=a},{"../../utils/DataStructures":48,"../../utils/MessageUtils":50,"../LoggerOptions":34}],43:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=t("./AbstractLogger"),i=t("../LoggerOptions"),s=function(t){function e(e,r){return t.call(this,e,r)||this}return n(e,t),e.prototype.doLog=function(t){if(void 0===console)throw new Error("Console is not defined, cannot log msg: "+t.message);var e=!1,r=t.level,n=this.createDefaultLogMessage(t);switch(r){case i.LogLevel.Trace:break;case i.LogLevel.Debug:console.debug&&(console.debug(n),e=!0);break;case i.LogLevel.Info:console.info&&(console.info(n),e=!0);break;case i.LogLevel.Warn:console.warn&&(console.warn(n),e=!0);break;case i.LogLevel.Error:case i.LogLevel.Fatal:console.error&&(console.error(n),e=!0);break;default:throw new Error("Log level not supported: "+r)}e||console.log(n)},e}(o.AbstractLogger);r.ConsoleLoggerImpl=s},{"../LoggerOptions":34,"./AbstractLogger":42}],44:[function(t,e,r){"use strict";var n=t("../../utils/DataStructures"),o=t("../LoggerOptions"),i=t("./LoggerFactoryService"),s=t("./ConsoleLoggerImpl"),a=t("./MessageBufferLoggerImpl"),u=t("./AbstractLogger"),l=function(){function t(t,e){this._loggers=new n.SimpleMap,this._logGroupRuntimeSettingsIndexed=[],this._loggerToLogGroupSettings=new n.SimpleMap,this._name=t,this.configure(e)}return t.prototype.configure=function(t){this._options=t,this.closeLoggers(),this._loggerToLogGroupSettings.clear(),this._logGroupRuntimeSettingsIndexed=[];for(var e=this._options.logGroupRules,r=0;r<e.length;r++)this._logGroupRuntimeSettingsIndexed.push(new i.LogGroupRuntimeSettings(e[r]))},t.prototype.getLogger=function(t){if(!this._options.enabled)throw new Error("LoggerFactory is not enabled, please check your options passed in");var e=this._loggers.get(t);return null!==e?e:(e=this.loadLogger(t),this._loggers.put(t,e),e)},t.prototype.isEnabled=function(){return this._options.enabled},t.prototype.closeLoggers=function(){this._loggers.forEach(function(t){null!=t&&t instanceof u.AbstractLogger&&t.close()}),this._loggers.clear()},t.prototype.getName=function(){return this._name},t.prototype.getLogGroupRuntimeSettingsByIndex=function(t){return t>=0&&t<this._logGroupRuntimeSettingsIndexed.length?this._logGroupRuntimeSettingsIndexed[t]:null},t.prototype.getLogGroupRuntimeSettingsByLoggerName=function(t){return this._loggerToLogGroupSettings.get(t)},t.prototype.getLogGroupRuntimeSettings=function(){return this._logGroupRuntimeSettingsIndexed.slice(0)},t.prototype.loadLogger=function(t){for(var e=this._options.logGroupRules,r=0;r<e.length;r++){var n=e[r];if(n.regExp.test(t)){var i=this._logGroupRuntimeSettingsIndexed[r],u=void 0;switch(n.loggerType){case o.LoggerType.Console:u=new s.ConsoleLoggerImpl(t,i);break;case o.LoggerType.MessageBuffer:u=new a.MessageBufferLoggerImpl(t,i);break;case o.LoggerType.Custom:if(null==n.callBackLogger)throw new Error("Cannot create a custom logger, custom callback is null");u=n.callBackLogger(t,i);break;default:throw new Error("Cannot create a Logger for LoggerType: "+n.loggerType)}return this._loggerToLogGroupSettings.put(t,i),u}}throw new Error("Failed to find a match to create a Logger for: "+t)},t}();r.LoggerFactoryImpl=l},{"../../utils/DataStructures":48,"../LoggerOptions":34,"./AbstractLogger":42,"./ConsoleLoggerImpl":43,"./LoggerFactoryService":45,"./MessageBufferLoggerImpl":46}],45:[function(t,e,r){"use strict";var n=t("../../utils/DataStructures"),o=t("../LoggerOptions"),i=t("./LoggerFactoryImpl"),s=t("../../extension/ExtensionHelper"),a=function(){function t(t,e,r,n,i){void 0===r&&(r=new o.LogFormat),void 0===n&&(n=o.LoggerType.Console),void 0===i&&(i=null),this._regExp=t,this._level=e,this._logFormat=r,this._loggerType=n,this._callBackLogger=i}return Object.defineProperty(t.prototype,"regExp",{get:function(){return this._regExp},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this._level},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loggerType",{get:function(){return this._loggerType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logFormat",{get:function(){return this._logFormat},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"callBackLogger",{get:function(){return this._callBackLogger},enumerable:!0,configurable:!0}),t}();r.LogGroupRule=a;var u=function(){function t(){this._logGroupRules=[],this._enabled=!0}return t.prototype.addLogGroupRule=function(t){return this._logGroupRules.push(t),this},t.prototype.setEnabled=function(t){return this._enabled=t,this},Object.defineProperty(t.prototype,"logGroupRules",{get:function(){return this._logGroupRules},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},enumerable:!0,configurable:!0}),t}();r.LoggerFactoryOptions=u;var l=function(){function t(t){this._logGroupRule=t,this._level=t.level,this._loggerType=t.loggerType,this._logFormat=new o.LogFormat(new o.DateFormat(t.logFormat.dateFormat.formatEnum,t.logFormat.dateFormat.dateSeparator),t.logFormat.showTimeStamp,t.logFormat.showLoggerName),this._callBackLogger=t.callBackLogger}return Object.defineProperty(t.prototype,"logGroupRule",{get:function(){return this._logGroupRule},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this._level},set:function(t){this._level=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loggerType",{get:function(){return this._loggerType},set:function(t){this._loggerType=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logFormat",{get:function(){return this._logFormat},set:function(t){this._logFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"callBackLogger",{get:function(){return this._callBackLogger},set:function(t){this._callBackLogger=t},enumerable:!0,configurable:!0}),t}();r.LogGroupRuntimeSettings=l;var c=function(){function t(){this._nameCounter=1,this._mapFactories=new n.SimpleMap,s.ExtensionHelper.register()}return t.getInstance=function(){return null===t._INSTANCE&&(t._INSTANCE=new t),t._INSTANCE},t.prototype.createLoggerFactory=function(t){void 0===t&&(t=null);var e="LoggerFactory"+this._nameCounter++;return this.createNamedLoggerFactory(e,t)},t.prototype.createNamedLoggerFactory=function(e,r){if(void 0===r&&(r=null),this._mapFactories.exists(e))throw new Error("LoggerFactory with name "+e+" already exists.");var n;return n=null!==r?new i.LoggerFactoryImpl(e,r):new i.LoggerFactoryImpl(e,t.createDefaultOptions()),this._mapFactories.put(e,n),n},t.prototype.closeLoggers=function(){this._mapFactories.values().forEach(function(t){t.closeLoggers()}),this._mapFactories.clear(),this._nameCounter=1},t.prototype.getRuntimeSettingsForLoggerFactories=function(){var t=[];return this._mapFactories.forEach(function(e){null!=e&&t.push(e)}),t},t.prototype.getLogGroupSettings=function(t,e){var r=this._mapFactories.get(t);return null===r?null:r.getLogGroupRuntimeSettingsByIndex(e)},t.prototype.getLoggerFactoryRuntimeSettingsByName=function(t){return this._mapFactories.get(t)},t.createDefaultOptions=function(){return(new u).addLogGroupRule(new a(new RegExp(".+"),o.LogLevel.Info))},t}();c._INSTANCE=null;var p=function(){function t(){}return t.createLoggerFactory=function(e){return void 0===e&&(e=null),t.INSTANCE_SERVICE.createLoggerFactory(e)},t.createNamedLoggerFactory=function(e,r){return void 0===r&&(r=null),t.INSTANCE_SERVICE.createNamedLoggerFactory(e,r)},t.closeLoggers=function(){return t.INSTANCE_SERVICE.closeLoggers()},t.getRuntimeSettings=function(){return t.INSTANCE_SERVICE},t}();p.INSTANCE_SERVICE=c.getInstance(),r.LFService=p},{"../../extension/ExtensionHelper":33,"../../utils/DataStructures":48,"../LoggerOptions":34,"./LoggerFactoryImpl":44}],46:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=t("./AbstractLogger"),i=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.messages=[],n}return n(e,t),e.prototype.close=function(){this.messages=[],t.prototype.close.call(this)},e.prototype.getMessages=function(){return this.messages},e.prototype.toString=function(){return this.messages.map(function(t){return t}).join("\n")},e.prototype.doLog=function(t){this.messages.push(this.createDefaultLogMessage(t))},e}(o.AbstractLogger);r.MessageBufferLoggerImpl=i},{"./AbstractLogger":42}],47:[function(t,e,r){"use strict";function n(){console.log("help()\n   ** Shows this help\n   \n getLogControl(): LoggerControl\n   ** Returns LoggerControl Object, use to dynamically change loglevels for log4j logging.\n   ** Call .help() on LoggerControl object for available options.\n   \n getCategoryControl(): CategoryServiceControl\n   ** Returns CategoryServiceControl Object, use to dynamically change loglevels for category logging.\n   ** Call .help() on CategoryServiceControl object for available options.   \n")}function o(){return new s.LoggerControlImpl}function i(){return new a.CategoryServiceControlImpl}var s=t("./control/LogGroupControl"),a=t("./control/CategoryServiceControl"),u=t("./extension/ExtensionHelper");r.ExtensionHelper=u.ExtensionHelper;var l=t("./log/category/AbstractCategoryLogger");r.AbstractCategoryLogger=l.AbstractCategoryLogger;var c=t("./log/category/CategoryConsoleLoggerImpl");r.CategoryConsoleLoggerImpl=c.CategoryConsoleLoggerImpl;var p=t("./log/category/CategoryDelegateLoggerImpl");r.CategoryDelegateLoggerImpl=p.CategoryDelegateLoggerImpl;var f=t("./log/category/CategoryLogger");r.Category=f.Category;var g=t("./log/category/CategoryMessageBufferImpl");r.CategoryMessageBufferLoggerImpl=g.CategoryMessageBufferLoggerImpl;var h=t("./log/category/CategoryService");r.CategoryDefaultConfiguration=h.CategoryDefaultConfiguration,r.CategoryRuntimeSettings=h.CategoryRuntimeSettings,r.CategoryServiceFactory=h.CategoryServiceFactory;var d=t("./log/standard/LoggerFactoryService");r.LoggerFactoryOptions=d.LoggerFactoryOptions,r.LFService=d.LFService,r.LogGroupRule=d.LogGroupRule;var y=t("./log/standard/AbstractLogger");r.AbstractLogger=y.AbstractLogger;var m=t("./log/standard/ConsoleLoggerImpl");r.ConsoleLoggerImpl=m.ConsoleLoggerImpl;var v=t("./log/standard/MessageBufferLoggerImpl");r.MessageBufferLoggerImpl=v.MessageBufferLoggerImpl;var _=t("./log/LoggerOptions");r.CategoryLogFormat=_.CategoryLogFormat,r.DateFormat=_.DateFormat,r.DateFormatEnum=_.DateFormatEnum,r.LogFormat=_.LogFormat,r.LoggerType=_.LoggerType,r.LogLevel=_.LogLevel;var L=t("./utils/DataStructures");r.SimpleMap=L.SimpleMap,r.LinkedList=L.LinkedList,function(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}(t("./utils/JSONHelper"));var w=t("./utils/MessageUtils");r.MessageFormatUtils=w.MessageFormatUtils,r.help=n,r.getLogControl=o,r.getCategoryControl=i},{"./control/CategoryServiceControl":31,"./control/LogGroupControl":32,"./extension/ExtensionHelper":33,"./log/LoggerOptions":34,"./log/category/AbstractCategoryLogger":35,"./log/category/CategoryConsoleLoggerImpl":36,"./log/category/CategoryDelegateLoggerImpl":37,"./log/category/CategoryLogger":39,"./log/category/CategoryMessageBufferImpl":40,"./log/category/CategoryService":41,"./log/standard/AbstractLogger":42,"./log/standard/ConsoleLoggerImpl":43,"./log/standard/LoggerFactoryService":45,"./log/standard/MessageBufferLoggerImpl":46,"./utils/DataStructures":48,"./utils/JSONHelper":49,"./utils/MessageUtils":50}],48:[function(t,e,r){"use strict";var n=function(){function t(t){this._previous=null,this._next=null,this._value=t}return Object.defineProperty(t.prototype,"previous",{get:function(){return this._previous},set:function(t){this._previous=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"next",{get:function(){return this._next},set:function(t){this._next=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),t}(),o=function(){function t(){this.head=null,this.size=0}return t.prototype.addHead=function(t){if(!this.createHeadIfNeeded(t)){if(null==this.head)throw new Error("This should never happen, list implementation broken");var e=this.head.next,r=new n(t);null!=e&&(e.previous=r,r.next=e),this.head=r}this.size++},t.prototype.addTail=function(t){if(!this.createHeadIfNeeded(t)){var e=this.getTailNode();if(null==e)throw new Error("List implementation broken");var r=new n(t);e.next=r,r.previous=e}this.size++},t.prototype.clear=function(){this.head=null,this.size=0},t.prototype.getHead=function(){return null!=this.head?this.head.value:null},t.prototype.removeHead=function(){if(null!=this.head){var t=this.head,e=t.value;return this.head=t.next,this.size--,e}return null},t.prototype.getTail=function(){var t=this.getTailNode();return null!=t?t.value:null},t.prototype.removeTail=function(){var t=this.getTailNode();if(null!=t){if(t===this.head)this.head=null;else{var e=t.previous;if(null==e)throw new Error("List implementation is broken");e.next=null}return this.size--,t.value}return null},t.prototype.getSize=function(){return this.size},t.prototype.filter=function(t){var e=function(t,r,n){t(r.value)&&n.push(r.value);var o=r.next;null!=o&&e(t,o,n)},r=[],n=this.head;return null!=n&&e(t,n,r),r},t.prototype.createHeadIfNeeded=function(t){return null==this.head&&(this.head=new n(t),!0)},t.prototype.getTailNode=function(){if(null==this.head)return null;for(var t=this.head;null!=t.next;)t=t.next;return t},t}();r.LinkedList=o;var i=function(){function t(){this.array={}}return t.prototype.put=function(t,e){if(void 0===e)throw new Error("Undefined value is not allowed, null is.");this.array[t]=e},t.prototype.get=function(t){var e=this.array[t];return void 0!==e?e:null},t.prototype.exists=function(t){return void 0!==this.array[t]},t.prototype.remove=function(t){var e=this.array[t];return void 0!==e&&delete this.array[t],e},t.prototype.keys=function(){var t=[];for(var e in this.array)this.array.hasOwnProperty(e)&&t.push(e);return t},t.prototype.values=function(){var t=[];for(var e in this.array)this.array.hasOwnProperty(e)&&t.push(this.get(e));return t},t.prototype.size=function(){return this.keys().length},t.prototype.isEmpty=function(){return 0===this.size()},t.prototype.clear=function(){this.array={}},t.prototype.forEach=function(t){for(var e in this.array)if(this.array.hasOwnProperty(e)){var r=this.array[e];t(r,e,this)}},t}();r.SimpleMap=i;var s=function(){function t(t,e){this._x=t,this._y=e}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!0,configurable:!0}),t}();r.TuplePair=s;var a=function(){function t(){this.data=[]}return t.prototype.append=function(t){if(void 0===t||null==t)throw new Error("String must be set, cannot append null or undefined");return this.data.push(t),this},t.prototype.appendLine=function(t){return this.data.push(t+"\n"),this},t.prototype.isEmpty=function(){return 0===this.data.length},t.prototype.clear=function(){this.data=[]},t.prototype.toString=function(t){return void 0===t&&(t=""),this.data.join(t)},t}();r.StringBuilder=a},{}],49:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},o=t("../log/LoggerOptions"),i=t("./DataStructures"),s=function(){function t(t){this._value=t}return t.prototype.getValue=function(){return this._value},t.prototype.toString=function(){var t=this.getValue();return null!=t?t.toString():"null"},t}(),a=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e}(s),u=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e}(s),l=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.toString=function(){var t=this.getValue();return null!=t?JSON.stringify(t.toString()):"null"},e}(s),c=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e}(s),p=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.toString=function(){var t=this.getValue();return null!=t?t.toString():"null"},e}(s),f=function(t){function e(){return t.call(this,null)||this}return n(e,t),e.prototype.toString=function(){return"null"},e}(s),g=function(){function t(){}return t.toJSONType=function(t){if(null===t)return new f;if("string"==typeof t)return new l(t);if("number"==typeof t)return new u(t);if("boolean"==typeof t)return new a(t);if(t instanceof h)return new c(t);throw new Error("Type not supported for value: "+t)},t}(),h=function(){function t(){this.values=new i.SimpleMap}return t.prototype.addBoolean=function(e,r){return this.checkName(e),t.checkValue(r),this.values.put(e,new a(r)),this},t.prototype.addNumber=function(e,r){return this.checkName(e),t.checkValue(r),this.values.put(e,new u(r)),this},t.prototype.addString=function(e,r){return this.checkName(e),t.checkValue(r),this.values.put(e,new l(r)),this},t.prototype.addNull=function(t){return this.checkName(t),this.values.put(t,new f),this},t.prototype.addArray=function(e,r){if(this.checkName(e),t.checkValue(r),null==r)throw new Error("Cannot add array as null");return this.values.put(e,new p(r)),this},t.prototype.addObject=function(e,r){if(this.checkName(e),t.checkValue(r),null==r)throw new Error("Cannot add object as null");return this.values.put(e,new c(r)),this},t.prototype.toString=function(t){var e=this;void 0===t&&(t=!1);var r=!1,n=new i.StringBuilder;return n.append("{"),this.values.keys().forEach(function(t){var o=e.values.get(t);null!=o&&(r&&n.append(","),n.append('"').append(t).append('":').append(o.toString()),r=!0)}),n.append("}"),n.toString()},t.prototype.checkName=function(t){if(null==t||void 0===t)throw new Error("Name is null or undefined");if(this.values.exists(t))throw new Error("Name "+t+" is already present for this object")},t.checkValue=function(t){if(void 0===t)throw new Error("Value is undefined")},t}();r.JSONObject=h;var d=function(){function t(){this.objects=[]}return t.prototype.add=function(t){if(void 0===t)throw new Error("Object is not allowed to be undefined");return this.objects.push(g.toJSONType(t)),this},t.prototype.toString=function(t){void 0===t&&(t=!1);var e=new i.StringBuilder;return e.append("["),this.objects.forEach(function(t,r){r>0&&e.append(","),e.append(t.toString())}),e.append("]"),e.toString()},t}();r.JSONArray=d;var y=function(){function t(){}return t.categoryToJSON=function(e,r){var n=new d;t._categoryToJSON(e,n,r);var o=new h;return o.addArray("categories",n),o},t._categoryToJSON=function(e,r,n){var i=new h;i.addNumber("id",e.id),i.addString("name",e.name),i.addString("logLevel",o.LogLevel[e.logLevel].toString()),null!=e.parent?i.addNumber("parent",e.parent.id):i.addNull("parent"),r.add(i),n&&e.children.forEach(function(e){t._categoryToJSON(e,r,n)})},t}();r.JSONHelper=y},{"../log/LoggerOptions":34,"./DataStructures":48}],50:[function(t,e,r){"use strict";var n=t("stacktrace-js"),o=t("../log/LoggerOptions"),i=function(){function t(){}return t.renderDate=function(t,e){var r=function(t,e,r){var n=e-t.length;if(n>0){for(var o="",i=0;i<n;i++)o+=r;return o+=t}return t},n=function(t){return r(t.getFullYear().toString(),4,"0")},i=function(t){return r((t.getMonth()+1).toString(),2,"0")},s=function(t){return r(t.getDate().toString(),2,"0")},a=function(t){return r(t.getHours().toString(),2,"0")},u=function(t){return r(t.getMinutes().toString(),2,"0")},l=function(t){return r(t.getSeconds().toString(),2,"0")},c=function(t){return r(t.getMilliseconds().toString(),3,"0")},p=e.dateSeparator,f="";switch(e.formatEnum){case o.DateFormatEnum.Default:f=n(t)+p+i(t)+p+s(t)+" "+a(t)+":"+u(t)+":"+l(t)+","+c(t);break;case o.DateFormatEnum.YearMonthDayTime:f=n(t)+p+i(t)+p+s(t)+" "+a(t)+":"+u(t)+":"+l(t);break;case o.DateFormatEnum.YearDayMonthWithFullTime:f=n(t)+p+s(t)+p+i(t)+" "+a(t)+":"+u(t)+":"+l(t)+","+c(t);break;case o.DateFormatEnum.YearDayMonthTime:f=n(t)+p+s(t)+p+i(t)+" "+a(t)+":"+u(t)+":"+l(t);break;default:throw new Error("Unsupported date format enum: "+e.formatEnum)}return f},t.renderDefaultMessage=function(e,r){var n="",i=e.getLogFormat();return i.showTimeStamp&&(n+=t.renderDate(e.getDate(),i.dateFormat)+" "),n+=o.LogLevel[e.getLevel()].toUpperCase(),e.isResolvedErrorMessage()&&(n+=" (resolved)"),n+=" ",i.showCategoryName&&(n+="[",e.getCategories().forEach(function(t,e){e>0&&(n+=", "),n+=t.name}),n+="]"),n+=" "+e.getMessage(),r&&null!==e.getErrorAsStack()&&(n+="\n"+e.getErrorAsStack()),n},t.renderDefaultLog4jMessage=function(e,r){var n=e.logGroupRule.logFormat,i="";return n.showTimeStamp&&(i+=t.renderDate(e.date,n.dateFormat)+" "),i+=o.LogLevel[e.level].toUpperCase()+" ",n.showLoggerName&&(i+="["+e.loggerName+"]"),i+=" "+e.message,r&&null!==e.errorAsStack&&(i+="\n"+e.errorAsStack),i},t.renderError=function(t){var e=t.name+": "+t.message+"\n@";return new Promise(function(r){n.fromError(t,{offline:!0}).then(function(t){var n=t.map(function(t){return t.toString()}).join("\n  ");e+="\n"+n,r(e)})})},t}();r.MessageFormatUtils=i},{"../log/LoggerOptions":34,"stacktrace-js":14}],51:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("typescript-collections"),o=function(){function t(){this.activeBoard=new n.MultiDictionary(null,null,!0)}return t.prototype.addPieceToActiveBoard=function(t){this.activeBoard.setValue(t.index,t.uniqueId)},t.prototype.removePieceFromActiveBoard=function(t){this.activeBoard.remove(t.index,t.uniqueId)},t.prototype.contains=function(t){return this.activeBoard.containsKey(t.index)},t}();r.Board=o},{"typescript-collections":29}],52:[function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=t("../enums/States"),i=t("../entities/PiecePosition"),s=function(t){function e(e,r,n,s,a,u,l,c){var p=t.call(this,e,r,n,s)||this;return p.color=a,p.playerId=u,p.uniqueId=l,p.startPosition=c,p.homePosition=new i.PiecePosition(r,n),p.game.physics.enable(p,Phaser.Physics.ARCADE),p.frame=0,p.index=-1,p.state=o.States.AtHome,p.group=p.game.add.group(),p.group.add(p),p}return n(e,t),e.prototype.movePiece=function(t){this.isAtHome&&(this.state=o.States.Active)},e.prototype.isAtHome=function(){return this.state===o.States.AtHome},e.prototype.isActive=function(){return this.state===o.States.Active},e.prototype.isOnWayOut=function(){return this.state===o.States.onWayOut},e.prototype.isExited=function(){return this.state===o.States.Exited},e.prototype.moveToStart=function(){this.state=o.States.Active,this.game.world.bringToTop(this.group);this.game.add.tween(this).to({x:this.startPosition.x,y:this.startPosition.y},1e3,Phaser.Easing.Linear.None,!0)},e}(Phaser.Sprite);r.Piece=s},{"../entities/PiecePosition":54,"../enums/States":57}],53:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../entities/Piece"),o=t("../enums/ColorType"),i=t("../entities/PiecePosition"),s=t("angular2-uuid"),a=function(){function t(t){this.game=t}return t.prototype.getPiece=function(t,e){var r=this.getImageKey(t);if("red_piece"===r){var o=new i.PiecePosition(49,287);return[new n.Piece(this.game,118,72,r,t,e,s.UUID.UUID(),o),new n.Piece(this.game,72,118,r,t,e,s.UUID.UUID(),o),new n.Piece(this.game,168,118,r,t,e,s.UUID.UUID(),o),new n.Piece(this.game,120,168,r,t,e,s.UUID.UUID(),o)]}if("blue_piece"===r){var o=new i.PiecePosition(384,48);return[new n.Piece(this.game,552,72,r,t,e,s.UUID.UUID(),o),new n.Piece(this.game,503,118,r,t,e,s.UUID.UUID(),o),new n.Piece(this.game,600,118,r,t,e,s.UUID.UUID(),o),new n.Piece(this.game,552,168,r,t,e,s.UUID.UUID(),o)]}if("yellow_piece"===r){var o=new i.PiecePosition(624,385);return[new n.Piece(this.game,552,503,r,t,e,s.UUID.UUID(),o),new n.Piece(this.game,503,552,r,t,e,s.UUID.UUID(),o),new n.Piece(this.game,600,552,r,t,e,s.UUID.UUID(),o),new n.Piece(this.game,552,600,r,t,e,s.UUID.UUID(),o)]}if("green_piece"===r){var o=new i.PiecePosition(287,622);return[new n.Piece(this.game,118,503,r,t,e,s.UUID.UUID(),o),new n.Piece(this.game,72,552,r,t,e,s.UUID.UUID(),o),new n.Piece(this.game,168,552,r,t,e,s.UUID.UUID(),o),new n.Piece(this.game,118,600,r,t,e,s.UUID.UUID(),o)]}return[]},t.prototype.getImageKey=function(t){switch(t){case o.ColorType.Red:return"red_piece";case o.ColorType.Blue:return"blue_piece";case o.ColorType.Green:return"green_piece";case o.ColorType.Yellow:return"yellow_piece";default:return"undefined"}},t}();r.PieceFactory=a},{"../entities/Piece":52,"../entities/PiecePosition":54,"../enums/ColorType":56,"angular2-uuid":1}],54:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function t(t,e){this.x=t,this.y=e}return t}();r.PiecePosition=n},{}],55:[function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=t("../entities/PieceFactory"),i=t("../logging/ConfigLog4j"),s=(i.factory.getLogger("model.Player"),function(t){function e(e,r,n,o,i){var s=t.call(this,e)||this;s.pieces=[],s.name=r,s.playerId=n,s.turn=o,s.pieces=new Array;for(var a=0;a<i.length;a++)for(var u=s.getPiece(i[a],n),l=0,c=u;l<c.length;l++){var p=c[l];s.pieces.push(p)}return s}return n(e,t),e}(o.PieceFactory));r.Player=s},{"../entities/PieceFactory":53,"../logging/ConfigLog4j":58}],56:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});!function(t){t[t.Red=0]="Red",t[t.Blue=1]="Blue",t[t.Green=2]="Green",t[t.Yellow=3]="Yellow"}(r.ColorType||(r.ColorType={}))},{}],57:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});!function(t){t[t.AtHome=0]="AtHome",t[t.Active=1]="Active",t[t.onWayOut=2]="onWayOut",t[t.Exited=3]="Exited"}(r.States||(r.States={}))},{}],58:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("typescript-logging"),o=(new n.LoggerFactoryOptions).addLogGroupRule(new n.LogGroupRule(new RegExp("model.+"),n.LogLevel.Debug)).addLogGroupRule(new n.LogGroupRule(new RegExp(".+"),n.LogLevel.Info));r.factory=n.LFService.createNamedLoggerFactory("LoggerFactory",o)},{"typescript-logging":47}],59:[function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=t("./states/Preloader"),i=t("./states/Game"),s=function(t){function e(){var e=t.call(this,900,720,Phaser.AUTO,"gameContainer")||this;return e.state.add("Preloader",o.Preloader,!1),e.state.add("Game",i.Game,!1),e.state.start("Preloader"),e}return n(e,t),e}(Phaser.Game);r.LudoGame=s,window.onload=function(){new s}},{"./states/Game":60,"./states/Preloader":61}],60:[function(t,e,r){"use strict"
;var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=t("angular2-uuid"),i=t("../entities/Player"),s=t("../enums/ColorType"),a=t("../entities/Board"),u=t("../logging/ConfigLog4j"),l=u.factory.getLogger("model.Game"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.create=function(){this.add.sprite(0,0,"board");for(var t=[s.ColorType.Red,s.ColorType.Blue],e=[s.ColorType.Yellow,s.ColorType.Green],r=new i.Player(this.game,"PlayerOne",o.UUID.UUID(),!0,t),n=new i.Player(this.game,"PlayerTwo",o.UUID.UUID(),!0,e),u=new a.Board,c=0,p=0,f=r.pieces;p<f.length;p++){var g=f[p];g.index=c,u.addPieceToActiveBoard(g),++c}for(var h=0,d=n.pieces;h<d.length;h++){var g=d[h];g.index=12,u.addPieceToActiveBoard(g)}r.pieces[2].moveToStart(),r.pieces[5].moveToStart(),n.pieces[2].moveToStart(),n.pieces[5].moveToStart();for(var y=u.activeBoard.getValue(12),m=0,v=y;m<v.length;m++){var _=v[m];l.debug("ID: "+_)}},e}(Phaser.State);r.Game=c},{"../entities/Board":51,"../entities/Player":55,"../enums/ColorType":56,"../logging/ConfigLog4j":58,"angular2-uuid":1}],61:[function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.preload=function(){this.load.spritesheet("red_piece","images/red.png",42,42,2),this.load.spritesheet("blue_piece","images/blue.png",42,42,2),this.load.spritesheet("green_piece","images/green.png",42,42,2),this.load.spritesheet("yellow_piece","images/yellow.png",42,42,2),this.load.image("board","images/board.jpg")},e.prototype.create=function(){this.startGame()},e.prototype.startGame=function(){this.game.state.start("Game",!0,!1)},e}(Phaser.State);r.Preloader=o},{}]},{},[59])(59)});
//# sourceMappingURL=ludo.min.js.map
