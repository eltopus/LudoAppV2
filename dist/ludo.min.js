!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.ludo=e()}}(function(){var e;return function e(t,n,o){function r(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return r(n||e)},c,c.exports,e,t,n,o)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(e,t,n){"use strict";var o=function(){function e(){}return e.UUID=function(){if("undefined"!=typeof window&&void 0!==window.crypto&&void 0!==window.crypto.getRandomValues){var e=new Uint16Array(8);return window.crypto.getRandomValues(e),this.pad4(e[0])+this.pad4(e[1])+"-"+this.pad4(e[2])+"-"+this.pad4(e[3])+"-"+this.pad4(e[4])+"-"+this.pad4(e[5])+this.pad4(e[6])+this.pad4(e[7])}return this.random4()+this.random4()+"-"+this.random4()+"-"+this.random4()+"-"+this.random4()+"-"+this.random4()+this.random4()+this.random4()},e.pad4=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t},e.random4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},e}();n.UUID=o},{}],2:[function(t,n,o){!function(r,i){"use strict";"function"==typeof e&&e.amd?e("error-stack-parser",["stackframe"],i):"object"==typeof o?n.exports=i(t("stackframe")):r.ErrorStackParser=i(r.StackFrame)}(this,function(e){"use strict";function t(e,t,n){if("function"==typeof Array.prototype.map)return e.map(t,n);for(var o=new Array(e.length),r=0;r<e.length;r++)o[r]=t.call(n,e[r]);return o}function n(e,t,n){if("function"==typeof Array.prototype.filter)return e.filter(t,n);for(var o=[],r=0;r<e.length;r++)t.call(n,e[r])&&o.push(e[r]);return o}function o(e,t){if("function"==typeof Array.prototype.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}return{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(/^\s*at .*(\S+\:\d+|\(native\))/m))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/,n=t.exec(e.replace(/[\(\)]/g,""));return[n[1],n[2]||void 0,n[3]||void 0]},parseV8OrIE:function(r){return t(n(r.stack.split("\n"),function(e){return!!e.match(/^\s*at .*(\S+\:\d+|\(native\))/m)},this),function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var n=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),r=this.extractLocation(n.pop()),i=n.join(" ")||void 0,s=o(["eval","<anonymous>"],r[0])>-1?void 0:r[0];return new e(i,void 0,s,r[1],r[2],t)},this)},parseFFOrSafari:function(o){return t(n(o.stack.split("\n"),function(e){return!e.match(/^(eval@)?(\[native code\])?$/)},this),function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new e(t);var n=t.split("@"),o=this.extractLocation(n.pop()),r=n.join("@")||void 0;return new e(r,void 0,o[0],o[1],o[2],t)},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,o=t.message.split("\n"),r=[],i=2,s=o.length;i<s;i+=2){var a=n.exec(o[i]);a&&r.push(new e(void 0,void 0,a[2],a[1],void 0,o[i]))}return r},parseOpera10:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,o=t.stacktrace.split("\n"),r=[],i=0,s=o.length;i<s;i+=2){var a=n.exec(o[i]);a&&r.push(new e(a[3]||void 0,void 0,a[2],a[1],void 0,o[i]))}return r},parseOpera11:function(o){return t(n(o.stack.split("\n"),function(e){return!!e.match(/(^|@)\S+\:\d+/)&&!e.match(/^Error created at/)},this),function(t){var n,o=t.split("@"),r=this.extractLocation(o.pop()),i=o.shift()||"",s=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;i.match(/\(([^\)]*)\)/)&&(n=i.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var a=void 0===n||"[arguments not available]"===n?void 0:n.split(",");return new e(s,a,r[0],r[1],r[2],t)},this)}}})},{stackframe:5}],3:[function(t,n,o){!function(t,r){"use strict";"function"==typeof e&&e.amd?e("stackframe",[],r):"object"==typeof o?n.exports=r():t.StackFrame=r()}(this,function(){"use strict";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e){return e[0].toUpperCase()+e.substring(1)}function n(e){return function(){return this[e]}}function o(e){if(e instanceof Object)for(var n=r.concat(i.concat(s.concat(a))),o=0;o<n.length;o++)e.hasOwnProperty(n[o])&&void 0!==e[n[o]]&&this["set"+t(n[o])](e[n[o]])}var r=["isConstructor","isEval","isNative","isToplevel"],i=["columnNumber","lineNumber"],s=["fileName","functionName","source"],a=["args"];o.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof o)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new o(e)}},toString:function(){return(this.getFunctionName()||"{anonymous}")+"("+(this.getArgs()||[]).join(",")+")"+(this.getFileName()?"@"+this.getFileName():"")+(e(this.getLineNumber())?":"+this.getLineNumber():"")+(e(this.getColumnNumber())?":"+this.getColumnNumber():"")}};for(var u=0;u<r.length;u++)o.prototype["get"+t(r[u])]=n(r[u]),o.prototype["set"+t(r[u])]=function(e){return function(t){this[e]=Boolean(t)}}(r[u]);for(var l=0;l<i.length;l++)o.prototype["get"+t(i[l])]=n(i[l]),o.prototype["set"+t(i[l])]=function(t){return function(n){if(!e(n))throw new TypeError(t+" must be a Number");this[t]=Number(n)}}(i[l]);for(var c=0;c<s.length;c++)o.prototype["get"+t(s[c])]=n(s[c]),o.prototype["set"+t(s[c])]=function(e){return function(t){this[e]=String(t)}}(s[c]);return o})},{}],4:[function(t,n,o){!function(r,i){"use strict";"function"==typeof e&&e.amd?e("stack-generator",["stackframe"],i):"object"==typeof o?n.exports=i(t("stackframe")):r.StackGenerator=i(r.StackFrame)}(this,function(e){return{backtrace:function(t){var n=[],o=10;"object"==typeof t&&"number"==typeof t.maxStackSize&&(o=t.maxStackSize);for(var r=arguments.callee;r&&n.length<o;){for(var i=new Array(r.arguments.length),s=0;s<i.length;++s)i[s]=r.arguments[s];/function(?:\s+([\w$]+))+\s*\(/.test(r.toString())?n.push(new e({functionName:RegExp.$1||void 0,args:i})):n.push(new e({args:i}));try{r=r.caller}catch(e){break}}return n}}})},{stackframe:3}],5:[function(t,n,o){!function(t,r){"use strict";"function"==typeof e&&e.amd?e("stackframe",[],r):"object"==typeof o?n.exports=r():t.StackFrame=r()}(this,function(){"use strict";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e,t,n,o,r,i){void 0!==e&&this.setFunctionName(e),void 0!==t&&this.setArgs(t),void 0!==n&&this.setFileName(n),void 0!==o&&this.setLineNumber(o),void 0!==r&&this.setColumnNumber(r),void 0!==i&&this.setSource(i)}return t.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(e){this.functionName=String(e)},getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getFileName:function(){return this.fileName},setFileName:function(e){this.fileName=String(e)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(t){if(!e(t))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(t)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(t){if(!e(t))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(t)},getSource:function(){return this.source},setSource:function(e){this.source=String(e)},toString:function(){return(this.getFunctionName()||"{anonymous}")+"("+(this.getArgs()||[]).join(",")+")"+(this.getFileName()?"@"+this.getFileName():"")+(e(this.getLineNumber())?":"+this.getLineNumber():"")+(e(this.getColumnNumber())?":"+this.getColumnNumber():"")}},t})},{}],6:[function(e,t,n){function o(){this._array=[],this._set=Object.create(null)}var r=e("./util"),i=Object.prototype.hasOwnProperty;o.fromArray=function(e,t){for(var n=new o,r=0,i=e.length;r<i;r++)n.add(e[r],t);return n},o.prototype.size=function(){return Object.getOwnPropertyNames(this._set).length},o.prototype.add=function(e,t){var n=r.toSetString(e),o=i.call(this._set,n),s=this._array.length;o&&!t||this._array.push(e),o||(this._set[n]=s)},o.prototype.has=function(e){var t=r.toSetString(e);return i.call(this._set,t)},o.prototype.indexOf=function(e){var t=r.toSetString(e);if(i.call(this._set,t))return this._set[t];throw new Error('"'+e+'" is not in the set.')},o.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},o.prototype.toArray=function(){return this._array.slice()},n.ArraySet=o},{"./util":12}],7:[function(e,t,n){function o(e){return e<0?1+(-e<<1):0+(e<<1)}function r(e){var t=1==(1&e),n=e>>1;return t?-n:n}var i=e("./base64");n.encode=function(e){var t,n="",r=o(e);do{t=31&r,r>>>=5,r>0&&(t|=32),n+=i.encode(t)}while(r>0);return n},n.decode=function(e,t,n){var o,s,a=e.length,u=0,l=0;do{if(t>=a)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(s=i.decode(e.charCodeAt(t++))))throw new Error("Invalid base64 digit: "+e.charAt(t-1));o=!!(32&s),s&=31,u+=s<<l,l+=5}while(o);n.value=r(u),n.rest=t}},{"./base64":8}],8:[function(e,t,n){var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");n.encode=function(e){if(0<=e&&e<o.length)return o[e];throw new TypeError("Must be between 0 and 63: "+e)},n.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1}},{}],9:[function(e,t,n){function o(e,t,r,i,s,a){var u=Math.floor((t-e)/2)+e,l=s(r,i[u],!0);return 0===l?u:l>0?t-u>1?o(u,t,r,i,s,a):a==n.LEAST_UPPER_BOUND?t<i.length?t:-1:u:u-e>1?o(e,u,r,i,s,a):a==n.LEAST_UPPER_BOUND?u:e<0?-1:e}n.GREATEST_LOWER_BOUND=1,n.LEAST_UPPER_BOUND=2,n.search=function(e,t,r,i){if(0===t.length)return-1;var s=o(-1,t.length,e,t,r,i||n.GREATEST_LOWER_BOUND);if(s<0)return-1;for(;s-1>=0&&0===r(t[s],t[s-1],!0);)--s;return s}},{}],10:[function(e,t,n){function o(e,t,n){var o=e[t];e[t]=e[n],e[n]=o}function r(e,t){return Math.round(e+Math.random()*(t-e))}function i(e,t,n,s){if(n<s){var a=r(n,s),u=n-1;o(e,a,s);for(var l=e[s],c=n;c<s;c++)t(e[c],l)<=0&&(u+=1,o(e,u,c));o(e,u+1,c);var p=u+1;i(e,t,n,p-1),i(e,t,p+1,s)}}n.quickSort=function(e,t){i(e,t,0,e.length-1)}},{}],11:[function(e,t,n){function o(e){var t=e;return"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,""))),null!=t.sections?new s(t):new r(t)}function r(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var n=a.getArg(t,"version"),o=a.getArg(t,"sources"),r=a.getArg(t,"names",[]),i=a.getArg(t,"sourceRoot",null),s=a.getArg(t,"sourcesContent",null),u=a.getArg(t,"mappings"),c=a.getArg(t,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);o=o.map(String).map(a.normalize).map(function(e){return i&&a.isAbsolute(i)&&a.isAbsolute(e)?a.relative(i,e):e}),this._names=l.fromArray(r.map(String),!0),this._sources=l.fromArray(o,!0),this.sourceRoot=i,this.sourcesContent=s,this._mappings=u,this.file=c}function i(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function s(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var n=a.getArg(t,"version"),r=a.getArg(t,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new l,this._names=new l;var i={line:-1,column:0};this._sections=r.map(function(e){if(e.url)throw new Error("Support for url field in sections not implemented.");var t=a.getArg(e,"offset"),n=a.getArg(t,"line"),r=a.getArg(t,"column");if(n<i.line||n===i.line&&r<i.column)throw new Error("Section offsets must be ordered and non-overlapping.");return i=t,{generatedOffset:{generatedLine:n+1,generatedColumn:r+1},consumer:new o(a.getArg(e,"map"))}})}var a=e("./util"),u=e("./binary-search"),l=e("./array-set").ArraySet,c=e("./base64-vlq"),p=e("./quick-sort").quickSort;o.fromSourceMap=function(e){return r.fromSourceMap(e)},o.prototype._version=3,o.prototype.__generatedMappings=null,Object.defineProperty(o.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),o.prototype.__originalMappings=null,Object.defineProperty(o.prototype,"_originalMappings",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),o.prototype._charIsMappingSeparator=function(e,t){var n=e.charAt(t);return";"===n||","===n},o.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},o.GENERATED_ORDER=1,o.ORIGINAL_ORDER=2,o.GREATEST_LOWER_BOUND=1,o.LEAST_UPPER_BOUND=2,o.prototype.eachMapping=function(e,t,n){var r,i=t||null,s=n||o.GENERATED_ORDER;switch(s){case o.GENERATED_ORDER:r=this._generatedMappings;break;case o.ORIGINAL_ORDER:r=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var u=this.sourceRoot;r.map(function(e){var t=null===e.source?null:this._sources.at(e.source);return null!=t&&null!=u&&(t=a.join(u,t)),{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}},this).forEach(e,i)},o.prototype.allGeneratedPositionsFor=function(e){var t=a.getArg(e,"line"),n={source:a.getArg(e,"source"),originalLine:t,originalColumn:a.getArg(e,"column",0)};if(null!=this.sourceRoot&&(n.source=a.relative(this.sourceRoot,n.source)),!this._sources.has(n.source))return[];n.source=this._sources.indexOf(n.source);var o=[],r=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",a.compareByOriginalPositions,u.LEAST_UPPER_BOUND);if(r>=0){var i=this._originalMappings[r];if(void 0===e.column)for(var s=i.originalLine;i&&i.originalLine===s;)o.push({line:a.getArg(i,"generatedLine",null),column:a.getArg(i,"generatedColumn",null),lastColumn:a.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[++r];else for(var l=i.originalColumn;i&&i.originalLine===t&&i.originalColumn==l;)o.push({line:a.getArg(i,"generatedLine",null),column:a.getArg(i,"generatedColumn",null),lastColumn:a.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[++r]}return o},n.SourceMapConsumer=o,r.prototype=Object.create(o.prototype),r.prototype.consumer=o,r.fromSourceMap=function(e){var t=Object.create(r.prototype),n=t._names=l.fromArray(e._names.toArray(),!0),o=t._sources=l.fromArray(e._sources.toArray(),!0);t.sourceRoot=e._sourceRoot,t.sourcesContent=e._generateSourcesContent(t._sources.toArray(),t.sourceRoot),t.file=e._file;for(var s=e._mappings.toArray().slice(),u=t.__generatedMappings=[],c=t.__originalMappings=[],h=0,g=s.length;h<g;h++){var f=s[h],d=new i;d.generatedLine=f.generatedLine,d.generatedColumn=f.generatedColumn,f.source&&(d.source=o.indexOf(f.source),d.originalLine=f.originalLine,d.originalColumn=f.originalColumn,f.name&&(d.name=n.indexOf(f.name)),c.push(d)),u.push(d)}return p(t.__originalMappings,a.compareByOriginalPositions),t},r.prototype._version=3,Object.defineProperty(r.prototype,"sources",{get:function(){return this._sources.toArray().map(function(e){return null!=this.sourceRoot?a.join(this.sourceRoot,e):e},this)}}),r.prototype._parseMappings=function(e,t){for(var n,o,r,s,u,l=1,h=0,g=0,f=0,d=0,y=0,v=e.length,m=0,_={},L={},w=[],I=[];m<v;)if(";"===e.charAt(m))l++,m++,h=0;else if(","===e.charAt(m))m++;else{for(n=new i,n.generatedLine=l,s=m;s<v&&!this._charIsMappingSeparator(e,s);s++);if(o=e.slice(m,s),r=_[o])m+=o.length;else{for(r=[];m<s;)c.decode(e,m,L),u=L.value,m=L.rest,r.push(u);if(2===r.length)throw new Error("Found a source, but no line and column");if(3===r.length)throw new Error("Found a source and line, but no column");_[o]=r}n.generatedColumn=h+r[0],h=n.generatedColumn,r.length>1&&(n.source=d+r[1],d+=r[1],n.originalLine=g+r[2],g=n.originalLine,n.originalLine+=1,n.originalColumn=f+r[3],f=n.originalColumn,r.length>4&&(n.name=y+r[4],y+=r[4])),I.push(n),"number"==typeof n.originalLine&&w.push(n)}p(I,a.compareByGeneratedPositionsDeflated),this.__generatedMappings=I,p(w,a.compareByOriginalPositions),this.__originalMappings=w},r.prototype._findMapping=function(e,t,n,o,r,i){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[o]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[o]);return u.search(e,t,r,i)},r.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(t.generatedLine===n.generatedLine){t.lastGeneratedColumn=n.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},r.prototype.originalPositionFor=function(e){var t={generatedLine:a.getArg(e,"line"),generatedColumn:a.getArg(e,"column")},n=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",a.compareByGeneratedPositionsDeflated,a.getArg(e,"bias",o.GREATEST_LOWER_BOUND));if(n>=0){var r=this._generatedMappings[n];if(r.generatedLine===t.generatedLine){var i=a.getArg(r,"source",null);null!==i&&(i=this._sources.at(i),null!=this.sourceRoot&&(i=a.join(this.sourceRoot,i)));var s=a.getArg(r,"name",null);return null!==s&&(s=this._names.at(s)),{source:i,line:a.getArg(r,"originalLine",null),column:a.getArg(r,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}},r.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e}))},r.prototype.sourceContentFor=function(e,t){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(e=a.relative(this.sourceRoot,e)),this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];var n;if(null!=this.sourceRoot&&(n=a.urlParse(this.sourceRoot))){var o=e.replace(/^file:\/\//,"");if("file"==n.scheme&&this._sources.has(o))return this.sourcesContent[this._sources.indexOf(o)];if((!n.path||"/"==n.path)&&this._sources.has("/"+e))return this.sourcesContent[this._sources.indexOf("/"+e)]}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},r.prototype.generatedPositionFor=function(e){var t=a.getArg(e,"source");if(null!=this.sourceRoot&&(t=a.relative(this.sourceRoot,t)),!this._sources.has(t))return{line:null,column:null,lastColumn:null};t=this._sources.indexOf(t);var n={source:t,originalLine:a.getArg(e,"line"),originalColumn:a.getArg(e,"column")},r=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",a.compareByOriginalPositions,a.getArg(e,"bias",o.GREATEST_LOWER_BOUND));if(r>=0){var i=this._originalMappings[r];if(i.source===n.source)return{line:a.getArg(i,"generatedLine",null),column:a.getArg(i,"generatedColumn",null),lastColumn:a.getArg(i,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},n.BasicSourceMapConsumer=r,s.prototype=Object.create(o.prototype),s.prototype.constructor=o,s.prototype._version=3,Object.defineProperty(s.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var n=0;n<this._sections[t].consumer.sources.length;n++)e.push(this._sections[t].consumer.sources[n]);return e}}),s.prototype.originalPositionFor=function(e){var t={generatedLine:a.getArg(e,"line"),generatedColumn:a.getArg(e,"column")},n=u.search(t,this._sections,function(e,t){var n=e.generatedLine-t.generatedOffset.generatedLine;return n||e.generatedColumn-t.generatedOffset.generatedColumn}),o=this._sections[n];return o?o.consumer.originalPositionFor({line:t.generatedLine-(o.generatedOffset.generatedLine-1),column:t.generatedColumn-(o.generatedOffset.generatedLine===t.generatedLine?o.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},s.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},s.prototype.sourceContentFor=function(e,t){for(var n=0;n<this._sections.length;n++){var o=this._sections[n],r=o.consumer.sourceContentFor(e,!0);if(r)return r}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},s.prototype.generatedPositionFor=function(e){for(var t=0;t<this._sections.length;t++){var n=this._sections[t];if(-1!==n.consumer.sources.indexOf(a.getArg(e,"source"))){var o=n.consumer.generatedPositionFor(e);if(o){return{line:o.line+(n.generatedOffset.generatedLine-1),column:o.column+(n.generatedOffset.generatedLine===o.line?n.generatedOffset.generatedColumn-1:0)}}}}return{line:null,column:null}},s.prototype._parseMappings=function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var o=this._sections[n],r=o.consumer._generatedMappings,i=0;i<r.length;i++){var s=r[i],u=o.consumer._sources.at(s.source);null!==o.consumer.sourceRoot&&(u=a.join(o.consumer.sourceRoot,u)),this._sources.add(u),u=this._sources.indexOf(u);var l=o.consumer._names.at(s.name);this._names.add(l),l=this._names.indexOf(l);var c={source:u,generatedLine:s.generatedLine+(o.generatedOffset.generatedLine-1),generatedColumn:s.generatedColumn+(o.generatedOffset.generatedLine===s.generatedLine?o.generatedOffset.generatedColumn-1:0),originalLine:s.originalLine,originalColumn:s.originalColumn,name:l};this.__generatedMappings.push(c),"number"==typeof c.originalLine&&this.__originalMappings.push(c)}p(this.__generatedMappings,a.compareByGeneratedPositionsDeflated),p(this.__originalMappings,a.compareByOriginalPositions)},n.IndexedSourceMapConsumer=s},{"./array-set":6,"./base64-vlq":7,"./binary-search":9,"./quick-sort":10,"./util":12}],12:[function(e,t,n){function o(e,t,n){if(t in e)return e[t];if(3===arguments.length)return n;throw new Error('"'+t+'" is a required argument.')}function r(e){var t=e.match(v);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}function i(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function s(e){var t=e,o=r(e);if(o){if(!o.path)return e;t=o.path}for(var s,a=n.isAbsolute(t),u=t.split(/\/+/),l=0,c=u.length-1;c>=0;c--)s=u[c],"."===s?u.splice(c,1):".."===s?l++:l>0&&(""===s?(u.splice(c+1,l),l=0):(u.splice(c,2),l--));return t=u.join("/"),""===t&&(t=a?"/":"."),o?(o.path=t,i(o)):t}function a(e,t){""===e&&(e="."),""===t&&(t=".");var n=r(t),o=r(e);if(o&&(e=o.path||"/"),n&&!n.scheme)return o&&(n.scheme=o.scheme),i(n);if(n||t.match(m))return t;if(o&&!o.host&&!o.path)return o.host=t,i(o);var a="/"===t.charAt(0)?t:s(e.replace(/\/+$/,"")+"/"+t);return o?(o.path=a,i(o)):a}function u(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");for(var n=0;0!==t.indexOf(e+"/");){var o=e.lastIndexOf("/");if(o<0)return t;if(e=e.slice(0,o),e.match(/^([^\/]+:\/)?\/*$/))return t;++n}return Array(n+1).join("../")+t.substr(e.length+1)}function l(e){return e}function c(e){return h(e)?"$"+e:e}function p(e){return h(e)?e.slice(1):e}function h(e){if(!e)return!1;var t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(var n=t-10;n>=0;n--)if(36!==e.charCodeAt(n))return!1;return!0}function g(e,t,n){var o=e.source-t.source;return 0!==o?o:0!==(o=e.originalLine-t.originalLine)?o:0!==(o=e.originalColumn-t.originalColumn)||n?o:0!==(o=e.generatedColumn-t.generatedColumn)?o:(o=e.generatedLine-t.generatedLine,0!==o?o:e.name-t.name)}function f(e,t,n){var o=e.generatedLine-t.generatedLine;return 0!==o?o:0!==(o=e.generatedColumn-t.generatedColumn)||n?o:0!==(o=e.source-t.source)?o:0!==(o=e.originalLine-t.originalLine)?o:(o=e.originalColumn-t.originalColumn,0!==o?o:e.name-t.name)}function d(e,t){return e===t?0:e>t?1:-1}function y(e,t){var n=e.generatedLine-t.generatedLine;return 0!==n?n:0!==(n=e.generatedColumn-t.generatedColumn)?n:0!==(n=d(e.source,t.source))?n:0!==(n=e.originalLine-t.originalLine)?n:(n=e.originalColumn-t.originalColumn,0!==n?n:d(e.name,t.name))}n.getArg=o;var v=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,m=/^data:.+\,.+$/;n.urlParse=r,n.urlGenerate=i,n.normalize=s,n.join=a,n.isAbsolute=function(e){return"/"===e.charAt(0)||!!e.match(v)},n.relative=u;var _=function(){return!("__proto__"in Object.create(null))}();n.toSetString=_?l:c,n.fromSetString=_?l:p,n.compareByOriginalPositions=g,n.compareByGeneratedPositionsDeflated=f,n.compareByGeneratedPositionsInflated=y},{}],13:[function(t,n,o){!function(r,i){"use strict";"function"==typeof e&&e.amd?e("stacktrace-gps",["source-map","stackframe"],i):"object"==typeof o?n.exports=i(t("source-map/lib/source-map-consumer"),t("stackframe")):r.StackTraceGPS=i(r.SourceMap||r.sourceMap,r.StackFrame)}(this,function(e,t){"use strict";function n(e){return new Promise(function(t,n){var o=new XMLHttpRequest;o.open("get",e),o.onerror=n,o.onreadystatechange=function(){4===o.readyState&&(o.status>=200&&o.status<300?t(o.responseText):n(new Error("HTTP status: "+o.status+" retrieving "+e)))},o.send()})}function o(e){if("undefined"!=typeof window&&window.atob)return window.atob(e);throw new Error("You must supply a polyfill for window.atob in this environment")}function r(e){if("undefined"!=typeof JSON&&JSON.parse)return JSON.parse(e);throw new Error("You must supply a polyfill for JSON.parse in this environment")}function i(e,t){for(var n,o=/function\s+([^(]*?)\s*\(([^)]*)\)/,r=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,i=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,s=e.split("\n"),a="",u=Math.min(t,20),l=0;l<u;++l){var c=s[t-l-1],p=c.indexOf("//");if(p>=0&&(c=c.substr(0,p)),c){if(a=c+a,(n=r.exec(a))&&n[1])return n[1];if((n=o.exec(a))&&n[1])return n[1];if((n=i.exec(a))&&n[1])return n[1]}}}function s(){if("function"!=typeof Object.defineProperty||"function"!=typeof Object.create)throw new Error("Unable to consume source maps in older browsers")}function a(e){if("object"!=typeof e)throw new TypeError("Given StackFrame is not an object");if("string"!=typeof e.fileName)throw new TypeError("Given file name is not a String");if("number"!=typeof e.lineNumber||e.lineNumber%1!=0||e.lineNumber<1)throw new TypeError("Given line number must be a positive integer");if("number"!=typeof e.columnNumber||e.columnNumber%1!=0||e.columnNumber<0)throw new TypeError("Given column number must be a non-negative integer");return!0}function u(e){var t=/\/\/[#@] ?sourceMappingURL=([^\s'"]+)\s*$/.exec(e);if(t&&t[1])return t[1];throw new Error("sourceMappingURL not found")}function l(n,o,r){return new Promise(function(i,s){var a=new e.SourceMapConsumer(o),u=a.originalPositionFor({line:n.lineNumber,column:n.columnNumber});if(u.source){var l=a.sourceContentFor(u.source);l&&(r[u.source]=l),i(new t(u.name||n.functionName,n.args,u.source,u.line,u.column))}else s(new Error("Could not get original source for given stackframe and source map"))})}return function e(c){if(!(this instanceof e))return new e(c);c=c||{},this.sourceCache=c.sourceCache||{},this.ajax=c.ajax||n,this._atob=c.atob||o,this._get=function(e){return new Promise(function(t,n){var o="data:"===e.substr(0,5);if(this.sourceCache[e])t(this.sourceCache[e]);else if(c.offline&&!o)n(new Error("Cannot make network requests in offline mode"));else if(o){var r=e.match(/^data:application\/json;([\w=:"-]+;)*base64,/);if(r){var i=r[0].length,s=e.substr(i),a=this._atob(s);this.sourceCache[e]=a,t(a)}else n(new Error("The encoding of the inline sourcemap is not supported"))}else{var u=this.ajax(e,{method:"get"});this.sourceCache[e]=u,u.then(t,n)}}.bind(this))},this.pinpoint=function(e){return new Promise(function(t,n){this.getMappedLocation(e).then(function(e){function n(){t(e)}this.findFunctionName(e).then(t,n).catch(n)}.bind(this),n)}.bind(this))},this.findFunctionName=function(e){return new Promise(function(n,o){a(e),this._get(e.fileName).then(function(o){var r=e.lineNumber,s=e.columnNumber,a=i(o,r);n(a?new t(a,e.args,e.fileName,r,s):e)},o).catch(o)}.bind(this))},this.getMappedLocation=function(e){return new Promise(function(t,n){s(),a(e);var o=this.sourceCache,i=e.fileName;this._get(i).then(function(s){var a=u(s),c="data:"===a.substr(0,5),p=i.substring(0,i.lastIndexOf("/")+1);"/"===a[0]||c||/^https?:\/\/|^\/\//i.test(a)||(a=p+a),this._get(a).then(function(n){"string"==typeof n&&(n=r(n.replace(/^\)\]\}'/,""))),void 0===n.sourceRoot&&(n.sourceRoot=p),l(e,n,o).then(t).catch(function(){t(e)})},n).catch(n)}.bind(this),n).catch(n)}.bind(this))}}})},{"source-map/lib/source-map-consumer":11,stackframe:5}],14:[function(t,n,o){!function(r,i){"use strict";"function"==typeof e&&e.amd?e("stacktrace",["error-stack-parser","stack-generator","stacktrace-gps"],i):"object"==typeof o?n.exports=i(t("error-stack-parser"),t("stack-generator"),t("stacktrace-gps")):r.StackTrace=i(r.ErrorStackParser,r.StackGenerator,r.StackTraceGPS)}(this,function(e,t,n){function o(e,t){var n={};return[e,t].forEach(function(e){for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}),n}function r(e){return e.stack||e["opera#sourceloc"]}function i(e,t){return"function"==typeof t?e.filter(t):e}var s={filter:function(e){return-1===(e.functionName||"").indexOf("StackTrace$$")&&-1===(e.functionName||"").indexOf("ErrorStackParser$$")&&-1===(e.functionName||"").indexOf("StackTraceGPS$$")&&-1===(e.functionName||"").indexOf("StackGenerator$$")},sourceCache:{}},a=function(){try{throw new Error}catch(e){return e}};return{get:function(e){var t=a();return r(t)?this.fromError(t,e):this.generateArtificially(e)},getSync:function(n){n=o(s,n);var u=a();return i(r(u)?e.parse(u):t.backtrace(n),n.filter)},fromError:function(t,r){r=o(s,r);var a=new n(r);return new Promise(function(n){var o=i(e.parse(t),r.filter);n(Promise.all(o.map(function(e){return new Promise(function(t){function n(){t(e)}a.pinpoint(e).then(t,n).catch(n)})})))}.bind(this))},generateArtificially:function(e){e=o(s,e);var n=t.backtrace(e);return"function"==typeof e.filter&&(n=n.filter(e.filter)),Promise.resolve(n)},instrument:function(e,t,n,o){if("function"!=typeof e)throw new Error("Cannot instrument non-function object");if("function"==typeof e.__stacktraceOriginalFn)return e;var i=function(){try{return this.get().then(t,n).catch(n),e.apply(o||this,arguments)}catch(e){throw r(e)&&this.fromError(e).then(t,n).catch(n),e}}.bind(this);return i.__stacktraceOriginalFn=e,i},deinstrument:function(e){if("function"!=typeof e)throw new Error("Cannot de-instrument non-function object");return"function"==typeof e.__stacktraceOriginalFn?e.__stacktraceOriginalFn:e},report:function(e,t,n){return new Promise(function(o,r){var i=new XMLHttpRequest;i.onerror=r,i.onreadystatechange=function(){4===i.readyState&&(i.status>=200&&i.status<400?o(i.responseText):r(new Error("POST to "+t+" failed with status: "+i.status)))},i.open("post",t),i.setRequestHeader("Content-Type","application/json");var s={stack:e};void 0!==n&&(s.message=n),i.send(JSON.stringify(s))})
}}})},{"error-stack-parser":2,"stack-generator":4,"stacktrace-gps":13}],15:[function(e,t,n){"use strict";var o=e("./util"),r=e("./Queue"),i=function(){function e(e){this.root=null,this.compare=e||o.defaultCompare,this.nElements=0}return e.prototype.add=function(e){return!o.isUndefined(e)&&(null!==this.insertNode(this.createNode(e))&&(this.nElements++,!0))},e.prototype.clear=function(){this.root=null,this.nElements=0},e.prototype.isEmpty=function(){return 0===this.nElements},e.prototype.size=function(){return this.nElements},e.prototype.contains=function(e){return!o.isUndefined(e)&&null!==this.searchNode(this.root,e)},e.prototype.remove=function(e){var t=this.searchNode(this.root,e);return null!==t&&(this.removeNode(t),this.nElements--,!0)},e.prototype.inorderTraversal=function(e){this.inorderTraversalAux(this.root,e,{stop:!1})},e.prototype.preorderTraversal=function(e){this.preorderTraversalAux(this.root,e,{stop:!1})},e.prototype.postorderTraversal=function(e){this.postorderTraversalAux(this.root,e,{stop:!1})},e.prototype.levelTraversal=function(e){this.levelTraversalAux(this.root,e)},e.prototype.minimum=function(){if(!this.isEmpty())return this.minimumAux(this.root).element},e.prototype.maximum=function(){if(!this.isEmpty())return this.maximumAux(this.root).element},e.prototype.forEach=function(e){this.inorderTraversal(e)},e.prototype.toArray=function(){var e=[];return this.inorderTraversal(function(t){return e.push(t),!0}),e},e.prototype.height=function(){return this.heightAux(this.root)},e.prototype.searchNode=function(e,t){for(var n=null;null!==e&&0!==n;)n=this.compare(t,e.element),n<0?e=e.leftCh:n>0&&(e=e.rightCh);return e},e.prototype.transplant=function(e,t){null===e.parent?this.root=t:e===e.parent.leftCh?e.parent.leftCh=t:e.parent.rightCh=t,null!==t&&(t.parent=e.parent)},e.prototype.removeNode=function(e){if(null===e.leftCh)this.transplant(e,e.rightCh);else if(null===e.rightCh)this.transplant(e,e.leftCh);else{var t=this.minimumAux(e.rightCh);t.parent!==e&&(this.transplant(t,t.rightCh),t.rightCh=e.rightCh,t.rightCh.parent=t),this.transplant(e,t),t.leftCh=e.leftCh,t.leftCh.parent=t}},e.prototype.inorderTraversalAux=function(e,t,n){null===e||n.stop||(this.inorderTraversalAux(e.leftCh,t,n),n.stop||(n.stop=!1===t(e.element),n.stop||this.inorderTraversalAux(e.rightCh,t,n)))},e.prototype.levelTraversalAux=function(e,t){var n=new r.default;for(null!==e&&n.enqueue(e);!n.isEmpty();){if(e=n.dequeue(),!1===t(e.element))return;null!==e.leftCh&&n.enqueue(e.leftCh),null!==e.rightCh&&n.enqueue(e.rightCh)}},e.prototype.preorderTraversalAux=function(e,t,n){null===e||n.stop||(n.stop=!1===t(e.element),n.stop||(this.preorderTraversalAux(e.leftCh,t,n),n.stop||this.preorderTraversalAux(e.rightCh,t,n)))},e.prototype.postorderTraversalAux=function(e,t,n){null===e||n.stop||(this.postorderTraversalAux(e.leftCh,t,n),n.stop||(this.postorderTraversalAux(e.rightCh,t,n),n.stop||(n.stop=!1===t(e.element))))},e.prototype.minimumAux=function(e){for(;null!==e.leftCh;)e=e.leftCh;return e},e.prototype.maximumAux=function(e){for(;null!==e.rightCh;)e=e.rightCh;return e},e.prototype.heightAux=function(e){return null===e?-1:Math.max(this.heightAux(e.leftCh),this.heightAux(e.rightCh))+1},e.prototype.insertNode=function(e){for(var t=null,n=this.root,o=null;null!==n;){if(0===(o=this.compare(e.element,n.element)))return null;o<0?(t=n,n=n.leftCh):(t=n,n=n.rightCh)}return e.parent=t,null===t?this.root=e:this.compare(e.element,t.element)<0?t.leftCh=e:t.rightCh=e,e},e.prototype.createNode=function(e){return{element:e,leftCh:null,rightCh:null,parent:null}},e}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"./Queue":25,"./util":30}],16:[function(e,t,n){"use strict";var o=e("./util"),r=e("./Dictionary"),i=e("./Set"),s=function(){function e(e){this.toStrF=e||o.defaultToString,this.dictionary=new r.default(this.toStrF),this.nElements=0}return e.prototype.add=function(e,t){if(void 0===t&&(t=1),o.isUndefined(e)||t<=0)return!1;if(this.contains(e))this.dictionary.getValue(e).copies+=t;else{var n={value:e,copies:t};this.dictionary.setValue(e,n)}return this.nElements+=t,!0},e.prototype.count=function(e){return this.contains(e)?this.dictionary.getValue(e).copies:0},e.prototype.contains=function(e){return this.dictionary.containsKey(e)},e.prototype.remove=function(e,t){if(void 0===t&&(t=1),o.isUndefined(e)||t<=0)return!1;if(this.contains(e)){var n=this.dictionary.getValue(e);return t>n.copies?this.nElements-=n.copies:this.nElements-=t,n.copies-=t,n.copies<=0&&this.dictionary.remove(e),!0}return!1},e.prototype.toArray=function(){for(var e=[],t=this.dictionary.values(),n=0,o=t;n<o.length;n++)for(var r=o[n],i=r.value,s=r.copies,a=0;a<s;a++)e.push(i);return e},e.prototype.toSet=function(){for(var e=new i.default(this.toStrF),t=this.dictionary.values(),n=0,o=t;n<o.length;n++){var r=o[n],s=r.value;e.add(s)}return e},e.prototype.forEach=function(e){this.dictionary.forEach(function(t,n){for(var o=n.value,r=n.copies,i=0;i<r;i++)if(!1===e(o))return!1;return!0})},e.prototype.size=function(){return this.nElements},e.prototype.isEmpty=function(){return 0===this.nElements},e.prototype.clear=function(){this.nElements=0,this.dictionary.clear()},e}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=s},{"./Dictionary":17,"./Set":26,"./util":30}],17:[function(e,t,n){"use strict";var o=e("./util"),r=function(){function e(e){this.table={},this.nElements=0,this.toStr=e||o.defaultToString}return e.prototype.getValue=function(e){var t=this.table["$"+this.toStr(e)];if(!o.isUndefined(t))return t.value},e.prototype.setValue=function(e,t){if(!o.isUndefined(e)&&!o.isUndefined(t)){var n,r="$"+this.toStr(e),i=this.table[r];return o.isUndefined(i)?(this.nElements++,n=void 0):n=i.value,this.table[r]={key:e,value:t},n}},e.prototype.remove=function(e){var t="$"+this.toStr(e),n=this.table[t];if(!o.isUndefined(n))return delete this.table[t],this.nElements--,n.value},e.prototype.keys=function(){var e=[];for(var t in this.table)if(o.has(this.table,t)){var n=this.table[t];e.push(n.key)}return e},e.prototype.values=function(){var e=[];for(var t in this.table)if(o.has(this.table,t)){var n=this.table[t];e.push(n.value)}return e},e.prototype.forEach=function(e){for(var t in this.table)if(o.has(this.table,t)){var n=this.table[t],r=e(n.key,n.value);if(!1===r)return}},e.prototype.containsKey=function(e){return!o.isUndefined(this.getValue(e))},e.prototype.clear=function(){this.table={},this.nElements=0},e.prototype.size=function(){return this.nElements},e.prototype.isEmpty=function(){return this.nElements<=0},e.prototype.toString=function(){var e="{";return this.forEach(function(t,n){e+="\n\t"+t+" : "+n}),e+"\n}"},e}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=r},{"./util":30}],18:[function(e,t,n){"use strict";var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=e("./Dictionary"),i=e("./util"),s=function(e){function t(t,n){e.call(this,n),this.defaultFactoryFunction=t}return o(t,e),t.prototype.setDefault=function(t,n){var o=e.prototype.getValue.call(this,t);return i.isUndefined(o)?(this.setValue(t,n),n):o},t.prototype.getValue=function(e){return this.setDefault(e,this.defaultFactoryFunction())},t}(r.default);Object.defineProperty(n,"__esModule",{value:!0}),n.default=s},{"./Dictionary":17,"./util":30}],19:[function(e,t,n){"use strict";var o=e("./util"),r=e("./arrays"),i=function(){function e(e){this.data=[],this.compare=e||o.defaultCompare}return e.prototype.leftChildIndex=function(e){return 2*e+1},e.prototype.rightChildIndex=function(e){return 2*e+2},e.prototype.parentIndex=function(e){return Math.floor((e-1)/2)},e.prototype.minIndex=function(e,t){return t>=this.data.length?e>=this.data.length?-1:e:this.compare(this.data[e],this.data[t])<=0?e:t},e.prototype.siftUp=function(e){for(var t=this.parentIndex(e);e>0&&this.compare(this.data[t],this.data[e])>0;)r.swap(this.data,t,e),e=t,t=this.parentIndex(e)},e.prototype.siftDown=function(e){for(var t=this.minIndex(this.leftChildIndex(e),this.rightChildIndex(e));t>=0&&this.compare(this.data[e],this.data[t])>0;)r.swap(this.data,t,e),e=t,t=this.minIndex(this.leftChildIndex(e),this.rightChildIndex(e))},e.prototype.peek=function(){return this.data.length>0?this.data[0]:void 0},e.prototype.add=function(e){if(!o.isUndefined(e))return this.data.push(e),this.siftUp(this.data.length-1),!0},e.prototype.removeRoot=function(){if(this.data.length>0){var e=this.data[0];return this.data[0]=this.data[this.data.length-1],this.data.splice(this.data.length-1,1),this.data.length>0&&this.siftDown(0),e}},e.prototype.contains=function(e){var t=o.compareToEquals(this.compare);return r.contains(this.data,e,t)},e.prototype.size=function(){return this.data.length},e.prototype.isEmpty=function(){return this.data.length<=0},e.prototype.clear=function(){this.data.length=0},e.prototype.forEach=function(e){r.forEach(this.data,e)},e}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"./arrays":28,"./util":30}],20:[function(e,t,n){"use strict";var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=e("./Dictionary"),i=e("./util"),s=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},e}(),a=function(e){function t(t){e.call(this,t),this.head=new s(null,null),this.tail=new s(null,null),this.head.next=this.tail,this.tail.prev=this.head}return o(t,e),t.prototype.appendToTail=function(e){var t=this.tail.prev;t.next=e,e.prev=t,e.next=this.tail,this.tail.prev=e},t.prototype.getLinkedDictionaryPair=function(e){if(!i.isUndefined(e)){var t="$"+this.toStr(e);return this.table[t]}},t.prototype.getValue=function(e){var t=this.getLinkedDictionaryPair(e);if(!i.isUndefined(t))return t.value},t.prototype.remove=function(t){var n=this.getLinkedDictionaryPair(t);if(!i.isUndefined(n))return e.prototype.remove.call(this,t),n.unlink(),n.value},t.prototype.clear=function(){e.prototype.clear.call(this),this.head.next=this.tail,this.tail.prev=this.head},t.prototype.replace=function(e,t){var n="$"+this.toStr(t.key);t.next=e.next,t.prev=e.prev,this.remove(e.key),t.prev.next=t,t.next.prev=t,this.table[n]=t,++this.nElements},t.prototype.setValue=function(e,t){if(!i.isUndefined(e)&&!i.isUndefined(t)){var n=this.getLinkedDictionaryPair(e),o=new s(e,t),r="$"+this.toStr(e);return i.isUndefined(n)?(this.appendToTail(o),this.table[r]=o,void++this.nElements):(this.replace(n,o),n.value)}},t.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(t)}),e},t.prototype.values=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),e},t.prototype.forEach=function(e){for(var t=this.head.next;null!=t.next;){if(!1===e(t.key,t.value))return;t=t.next}},t}(r.default);Object.defineProperty(n,"__esModule",{value:!0}),n.default=a},{"./Dictionary":17,"./util":30}],21:[function(e,t,n){"use strict";var o=e("./util"),r=e("./arrays"),i=function(){function e(){this.firstNode=null,this.lastNode=null,this.nElements=0}return e.prototype.add=function(e,t){if(o.isUndefined(t)&&(t=this.nElements),t<0||t>this.nElements||o.isUndefined(e))return!1;var n=this.createNode(e);if(0===this.nElements)this.firstNode=n,this.lastNode=n;else if(t===this.nElements)this.lastNode.next=n,this.lastNode=n;else if(0===t)n.next=this.firstNode,this.firstNode=n;else{var r=this.nodeAtIndex(t-1);n.next=r.next,r.next=n}return this.nElements++,!0},e.prototype.first=function(){if(null!==this.firstNode)return this.firstNode.element},e.prototype.last=function(){if(null!==this.lastNode)return this.lastNode.element},e.prototype.elementAtIndex=function(e){var t=this.nodeAtIndex(e);if(null!==t)return t.element},e.prototype.indexOf=function(e,t){var n=t||o.defaultEquals;if(o.isUndefined(e))return-1;for(var r=this.firstNode,i=0;null!==r;){if(n(r.element,e))return i;i++,r=r.next}return-1},e.prototype.contains=function(e,t){return this.indexOf(e,t)>=0},e.prototype.remove=function(e,t){var n=t||o.defaultEquals;if(this.nElements<1||o.isUndefined(e))return!1;for(var r=null,i=this.firstNode;null!==i;){if(n(i.element,e))return i===this.firstNode?(this.firstNode=this.firstNode.next,i===this.lastNode&&(this.lastNode=null)):i===this.lastNode?(this.lastNode=r,r.next=i.next,i.next=null):(r.next=i.next,i.next=null),this.nElements--,!0;r=i,i=i.next}return!1},e.prototype.clear=function(){this.firstNode=null,this.lastNode=null,this.nElements=0},e.prototype.equals=function(t,n){var r=n||o.defaultEquals;return t instanceof e&&(this.size()===t.size()&&this.equalsAux(this.firstNode,t.firstNode,r))},e.prototype.equalsAux=function(e,t,n){for(;null!==e;){if(!n(e.element,t.element))return!1;e=e.next,t=t.next}return!0},e.prototype.removeElementAtIndex=function(e){if(!(e<0||e>=this.nElements)){var t;if(1===this.nElements)t=this.firstNode.element,this.firstNode=null,this.lastNode=null;else{var n=this.nodeAtIndex(e-1);null===n?(t=this.firstNode.element,this.firstNode=this.firstNode.next):n.next===this.lastNode&&(t=this.lastNode.element,this.lastNode=n),null!==n&&(t=n.next.element,n.next=n.next.next)}return this.nElements--,t}},e.prototype.forEach=function(e){for(var t=this.firstNode;null!==t&&!1!==e(t.element);)t=t.next},e.prototype.reverse=function(){for(var e=null,t=this.firstNode,n=null;null!==t;)n=t.next,t.next=e,e=t,t=n;n=this.firstNode,this.firstNode=this.lastNode,this.lastNode=n},e.prototype.toArray=function(){for(var e=[],t=this.firstNode;null!==t;)e.push(t.element),t=t.next;return e},e.prototype.size=function(){return this.nElements},e.prototype.isEmpty=function(){return this.nElements<=0},e.prototype.toString=function(){return r.toString(this.toArray())},e.prototype.nodeAtIndex=function(e){if(e<0||e>=this.nElements)return null;if(e===this.nElements-1)return this.lastNode;for(var t=this.firstNode,n=0;n<e;n++)t=t.next;return t},e.prototype.createNode=function(e){return{element:e,next:null}},e}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"./arrays":28,"./util":30}],22:[function(e,t,n){"use strict";var o=e("./util"),r=e("./Dictionary"),i=e("./arrays"),s=function(){function e(e,t,n){void 0===n&&(n=!1),this.dict=new r.default(e),this.equalsF=t||o.defaultEquals,this.allowDuplicate=n}return e.prototype.getValue=function(e){var t=this.dict.getValue(e);return o.isUndefined(t)?[]:i.copy(t)},e.prototype.setValue=function(e,t){if(o.isUndefined(e)||o.isUndefined(t))return!1;if(!this.containsKey(e))return this.dict.setValue(e,[t]),!0;var n=this.dict.getValue(e);return!(!this.allowDuplicate&&i.contains(n,t,this.equalsF))&&(n.push(t),!0)},e.prototype.remove=function(e,t){if(o.isUndefined(t)){var n=this.dict.remove(e);return!o.isUndefined(n)}var r=this.dict.getValue(e);return!!i.remove(r,t,this.equalsF)&&(0===r.length&&this.dict.remove(e),!0)},e.prototype.keys=function(){return this.dict.keys()},e.prototype.values=function(){for(var e=this.dict.values(),t=[],n=0,o=e;n<o.length;n++)for(var r=o[n],i=0,s=r;i<s.length;i++){var a=s[i];t.push(a)}return t},e.prototype.containsKey=function(e){return this.dict.containsKey(e)},e.prototype.clear=function(){this.dict.clear()},e.prototype.size=function(){return this.dict.size()},e.prototype.isEmpty=function(){return this.dict.isEmpty()},e}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=s},{"./Dictionary":17,"./arrays":28,"./util":30}],23:[function(e,t,n){"use strict";var o;!function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER",e[e.INSIDE_AT_END=2]="INSIDE_AT_END",e[e.INSIDE_AT_START=3]="INSIDE_AT_START"}(o||(o={}));var r=function(){function e(e,t){void 0===e&&(e=[]),void 0===t&&(t={}),this.rootIds=e,this.nodes=t,this.initRootIds(),this.initNodes()}return e.prototype.initRootIds=function(){for(var e=0,t=this.rootIds;e<t.length;e++){var n=t[e];this.createEmptyNodeIfNotExist(n)}},e.prototype.initNodes=function(){for(var e in this.nodes)if(this.nodes.hasOwnProperty(e))for(var t=0,n=this.nodes[e];t<n.length;t++){var o=n[t];this.createEmptyNodeIfNotExist(o)}},e.prototype.createEmptyNodeIfNotExist=function(e){this.nodes[e]||(this.nodes[e]=[])},e.prototype.getRootIds=function(){return this.rootIds.slice()},e.prototype.getNodes=function(){var e={};for(var t in this.nodes)this.nodes.hasOwnProperty(t)&&(e[t]=this.nodes[t].slice());return e},e.prototype.getObject=function(){return{rootIds:this.getRootIds(),nodes:this.getNodes()}},e.prototype.toObject=function(){return this.getObject()},e.prototype.flatten=function(){function e(t,n,o,r){if(void 0===r&&(r=0),t&&n&&o&&n[t]){r++;for(var i=n[t],s=0;s<i.length;s++){var a=i[s];o.push({id:a,level:r,hasParent:!0}),e(a,n,o,r)}r--}}for(var t=this,n=[],o=0;o<this.rootIds.length;o++){var r=this.rootIds[o];n.push({id:r,level:0,hasParent:!1,childrenCount:void 0}),e(r,this.nodes,n,0)}for(var i=0,s=n;i<s.length;i++){var a=s[i];a.childrenCount=function(e){if(t.nodes[e]){return t.nodes[e].length}return 0}(a.id)}return n},e.prototype.moveIdBeforeId=function(e,t){return this.moveId(e,t,o.BEFORE)},e.prototype.moveIdAfterId=function(e,t){return this.moveId(e,t,o.AFTER)},e.prototype.moveIdIntoId=function(e,t,n){return void 0===n&&(n=!0),n?this.moveId(e,t,o.INSIDE_AT_START):this.moveId(e,t,o.INSIDE_AT_END)},e.prototype.swapRootIdWithRootId=function(e,t){var n=this.findRootId(e),o=this.findRootId(t);this.swapRootPositionWithRootPosition(n,o)},e.prototype.swapRootPositionWithRootPosition=function(e,t){var n=this.rootIds[t];this.rootIds[t]=this.rootIds[e],this.rootIds[e]=n},e.prototype.deleteId=function(e){this.rootDeleteId(e),this.nodeAndSubNodesDelete(e),this.nodeRefrencesDelete(e)},e.prototype.insertIdBeforeId=function(e,t){var n=this.findRootId(e);n>-1&&this.insertIdIntoRoot(t,n);for(var o in this.nodes)if(this.nodes.hasOwnProperty(o)){var r=this.findNodeId(o,e);r>-1&&this.insertIdIntoNode(o,t,r)}},e.prototype.insertIdAfterId=function(e,t){var n=this.findRootId(e);n>-1&&this.insertIdIntoRoot(t,n+1);for(var o in this.nodes)if(this.nodes.hasOwnProperty(o)){var r=this.findNodeId(o,e);r>-1&&this.insertIdIntoNode(o,t,r+1)}},e.prototype.insertIdIntoId=function(e,t){this.nodeInsertAtEnd(e,t),this.nodes[t]=[]},e.prototype.insertIdIntoRoot=function(e,t){if(void 0===t)this.rootInsertAtEnd(e);else if(t<0){var n=this.rootIds.length;this.rootIds.splice(t+n+1,0,e)}else this.rootIds.splice(t,0,e);this.nodes[e]=this.nodes[e]||[]},e.prototype.insertIdIntoNode=function(e,t,n){if(this.nodes[e]=this.nodes[e]||[],this.nodes[t]=this.nodes[t]||[],void 0===n)this.nodeInsertAtEnd(e,t);else if(n<0){var o=this.nodes[e].length;this.nodes[e].splice(n+o+1,0,t)}else this.nodes[e].splice(n,0,t)},e.prototype.moveId=function(e,t,n){var r=e,i=this.findRootId(r);this.nodes[t];for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){this.findNodeId(s,t);break}var a=t,u=this.findRootId(a);this.nodes[t];for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){this.findNodeId(s,t);break}if(i>-1)if(u>-1)switch(this.rootDelete(i),u>i&&u--,n){case o.BEFORE:this.insertIdIntoRoot(r,u);break;case o.AFTER:this.insertIdIntoRoot(r,u+1);break;case o.INSIDE_AT_START:this.nodeInsertAtStart(a,r);break;case o.INSIDE_AT_END:this.nodeInsertAtEnd(a,r)}else{this.rootDelete(i);for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var l=this.findNodeId(s,a);if(l>-1){switch(n){case o.BEFORE:this.insertIdIntoNode(s,r,l);break;case o.AFTER:this.insertIdIntoNode(s,r,l+1);break;case o.INSIDE_AT_START:this.nodeInsertAtStart(a,r);break;case o.INSIDE_AT_END:this.nodeInsertAtEnd(a,r)}break}}}else if(u>-1){for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var l=this.findNodeId(s,r);if(l>-1){this.nodeDeleteAtIndex(s,l);break}}switch(n){case o.BEFORE:this.insertIdIntoRoot(r,u);break;case o.AFTER:this.insertIdIntoRoot(r,u+1);break;case o.INSIDE_AT_START:this.nodeInsertAtStart(a,r);break;case o.INSIDE_AT_END:this.nodeInsertAtEnd(a,r)}}else{for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var l=this.findNodeId(s,r);if(l>-1){this.nodeDeleteAtIndex(s,l);break}}for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var l=this.findNodeId(s,a);if(l>-1){switch(n){case o.BEFORE:this.insertIdIntoNode(s,r,l);break;case o.AFTER:this.insertIdIntoNode(s,r,l+1);break;case o.INSIDE_AT_START:this.nodeInsertAtStart(a,r);break;case o.INSIDE_AT_END:this.nodeInsertAtEnd(a,r)}break}}}},e.prototype.swapArrayElements=function(e,t,n){var o=e[t];return e[t]=e[n],e[n]=o,e},e.prototype.rootDeleteId=function(e){var t=this.findRootId(e);t>-1&&this.rootDelete(t)},e.prototype.nodeAndSubNodesDelete=function(e){for(var t=[],n=0;n<this.nodes[e].length;n++){var o=this.nodes[e][n];this.nodeAndSubNodesDelete(o),t.push(e)}this.nodeDelete(e);for(var n=0;n<t.length;n++)this.nodeDelete(t[n])},e.prototype.nodeRefrencesDelete=function(e){for(var t in this.nodes)if(this.nodes.hasOwnProperty(t))for(var n=0;n<this.nodes[t].length;n++){var o=this.nodes[t][n];o===e&&this.nodeDeleteAtIndex(t,n)}},e.prototype.nodeDelete=function(e){delete this.nodes[e]},e.prototype.findRootId=function(e){return this.rootIds.indexOf(e)},e.prototype.findNodeId=function(e,t){return this.nodes[e].indexOf(t)},e.prototype.findNode=function(e){return this.nodes[e]},e.prototype.nodeInsertAtStart=function(e,t){this.nodes[e].unshift(t)},e.prototype.nodeInsertAtEnd=function(e,t){this.nodes[e].push(t)},e.prototype.rootDelete=function(e){this.rootIds.splice(e,1)},e.prototype.nodeDeleteAtIndex=function(e,t){this.nodes[e].splice(t,1)},e.prototype.rootInsertAtStart=function(e){this.rootIds.unshift(e)},e.prototype.rootInsertAtEnd=function(e){this.rootIds.push(e)},e}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=r},{}],24:[function(e,t,n){"use strict";var o=e("./util"),r=e("./Heap"),i=function(){function e(e){this.heap=new r.default(o.reverseCompareFunction(e))}return e.prototype.enqueue=function(e){return this.heap.add(e)},e.prototype.add=function(e){return this.heap.add(e)},e.prototype.dequeue=function(){if(0!==this.heap.size()){var e=this.heap.peek();return this.heap.removeRoot(),e}},e.prototype.peek=function(){return this.heap.peek()},e.prototype.contains=function(e){return this.heap.contains(e)},e.prototype.isEmpty=function(){return this.heap.isEmpty()},e.prototype.size=function(){return this.heap.size()},e.prototype.clear=function(){this.heap.clear()},e.prototype.forEach=function(e){this.heap.forEach(e)},e}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"./Heap":19,"./util":30}],25:[function(e,t,n){"use strict";var o=e("./LinkedList"),r=function(){function e(){this.list=new o.default}return e.prototype.enqueue=function(e){return this.list.add(e)},e.prototype.add=function(e){return this.list.add(e)},e.prototype.dequeue=function(){if(0!==this.list.size()){var e=this.list.first();return this.list.removeElementAtIndex(0),e}},e.prototype.peek=function(){if(0!==this.list.size())return this.list.first()},e.prototype.size=function(){return this.list.size()},e.prototype.contains=function(e,t){return this.list.contains(e,t)},e.prototype.isEmpty=function(){return this.list.size()<=0},e.prototype.clear=function(){this.list.clear()},e.prototype.forEach=function(e){this.list.forEach(e)},e}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=r},{"./LinkedList":21}],26:[function(e,t,n){"use strict";var o=e("./util"),r=e("./arrays"),i=e("./Dictionary"),s=function(){function e(e){this.dictionary=new i.default(e)}return e.prototype.contains=function(e){return this.dictionary.containsKey(e)},e.prototype.add=function(e){return!this.contains(e)&&!o.isUndefined(e)&&(this.dictionary.setValue(e,e),!0)},e.prototype.intersection=function(e){var t=this;this.forEach(function(n){return e.contains(n)||t.remove(n),!0})},e.prototype.union=function(e){var t=this;e.forEach(function(e){return t.add(e),!0})},e.prototype.difference=function(e){var t=this;e.forEach(function(e){return t.remove(e),!0})},e.prototype.isSubsetOf=function(e){if(this.size()>e.size())return!1;var t=!0;return this.forEach(function(n){return!!e.contains(n)||(t=!1,!1)}),t},e.prototype.remove=function(e){return!!this.contains(e)&&(this.dictionary.remove(e),!0)},e.prototype.forEach=function(e){this.dictionary.forEach(function(t,n){return e(n)})},e.prototype.toArray=function(){return this.dictionary.values()},e.prototype.isEmpty=function(){return this.dictionary.isEmpty()},e.prototype.size=function(){return this.dictionary.size()},e.prototype.clear=function(){this.dictionary.clear()},e.prototype.toString=function(){return r.toString(this.toArray())},e}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=s},{"./Dictionary":17,"./arrays":28,"./util":30}],27:[function(e,t,n){"use strict";var o=e("./LinkedList"),r=function(){function e(){this.list=new o.default}return e.prototype.push=function(e){return this.list.add(e,0)},e.prototype.add=function(e){return this.list.add(e,0)},e.prototype.pop=function(){return this.list.removeElementAtIndex(0)},e.prototype.peek=function(){return this.list.first()},e.prototype.size=function(){return this.list.size()},e.prototype.contains=function(e,t){return this.list.contains(e,t)},e.prototype.isEmpty=function(){return this.list.isEmpty()},e.prototype.clear=function(){this.list.clear()},e.prototype.forEach=function(e){this.list.forEach(e)},e}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=r},{"./LinkedList":21}],28:[function(e,t,n){"use strict";function o(e,t,n){for(var o=n||g.defaultEquals,r=e.length,i=0;i<r;i++)if(o(e[i],t))return i;return-1}function r(e,t,n){for(var o=n||g.defaultEquals,r=e.length,i=r-1;i>=0;i--)if(o(e[i],t))return i;return-1}function i(e,t,n){return o(e,t,n)>=0}function s(e,t,n){var r=o(e,t,n);return!(r<0)&&(e.splice(r,1),!0)}function a(e,t,n){for(var o=n||g.defaultEquals,r=e.length,i=0,s=0;s<r;s++)o(e[s],t)&&i++;return i}function u(e,t,n){var o=n||g.defaultEquals;if(e.length!==t.length)return!1;for(var r=e.length,i=0;i<r;i++)if(!o(e[i],t[i]))return!1;return!0}function l(e){return e.concat()}function c(e,t,n){if(t<0||t>=e.length||n<0||n>=e.length)return!1;var o=e[t];return e[t]=e[n],e[n]=o,!0}function p(e){return"["+e.toString()+"]"}function h(e,t){for(var n=0,o=e;n<o.length;n++){if(!1===t(o[n]))return}}var g=e("./util");n.indexOf=o,n.lastIndexOf=r,n.contains=i,n.remove=s,n.frequency=a,n.equals=u,n.copy=l,n.swap=c,n.toString=p,n.forEach=h},{"./util":30}],29:[function(t,n,o){(function(r){!function(t){if("object"==typeof o&&void 0!==n)n.exports=t();else if("function"==typeof e&&e.amd)e([],t);else{var i;i="undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:this,i.listComponent=t()}}(function(){return(t=function e(n,o,r){function i(a,u){if(!o[a]){if(!n[a]){var l="function"==typeof t&&t;if(!u&&l)return l(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var p=o[a]={exports:{}};n[a][0].call(p.exports,function(e){var t=n[a][1][e];return i(t||e)},p,p.exports,e,n,o,r)}return o[a].exports}for(var s="function"==typeof t&&t,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";var o=e("./util"),r=e("./Queue"),i=function(){function e(e){this.root=null,this.compare=e||o.defaultCompare,this.nElements=0}return e.prototype.add=function(e){return!o.isUndefined(e)&&(null!==this.insertNode(this.createNode(e))&&(this.nElements++,!0))},e.prototype.clear=function(){this.root=null,this.nElements=0},e.prototype.isEmpty=function(){return 0===this.nElements},e.prototype.size=function(){return this.nElements},e.prototype.contains=function(e){return!o.isUndefined(e)&&null!==this.searchNode(this.root,e)},e.prototype.remove=function(e){var t=this.searchNode(this.root,e);return null!==t&&(this.removeNode(t),this.nElements--,!0)},e.prototype.inorderTraversal=function(e){this.inorderTraversalAux(this.root,e,{stop:!1})},e.prototype.preorderTraversal=function(e){this.preorderTraversalAux(this.root,e,{stop:!1})},e.prototype.postorderTraversal=function(e){this.postorderTraversalAux(this.root,e,{stop:!1})},e.prototype.levelTraversal=function(e){this.levelTraversalAux(this.root,e)},e.prototype.minimum=function(){if(!this.isEmpty())return this.minimumAux(this.root).element},e.prototype.maximum=function(){if(!this.isEmpty())return this.maximumAux(this.root).element},e.prototype.forEach=function(e){this.inorderTraversal(e)},e.prototype.toArray=function(){var e=[];return this.inorderTraversal(function(t){return e.push(t),!0}),e},e.prototype.height=function(){return this.heightAux(this.root)},e.prototype.searchNode=function(e,t){for(var n=null;null!==e&&0!==n;)n=this.compare(t,e.element),n<0?e=e.leftCh:n>0&&(e=e.rightCh);return e},e.prototype.transplant=function(e,t){null===e.parent?this.root=t:e===e.parent.leftCh?e.parent.leftCh=t:e.parent.rightCh=t,null!==t&&(t.parent=e.parent)},e.prototype.removeNode=function(e){if(null===e.leftCh)this.transplant(e,e.rightCh);else if(null===e.rightCh)this.transplant(e,e.leftCh);else{var t=this.minimumAux(e.rightCh);t.parent!==e&&(this.transplant(t,t.rightCh),t.rightCh=e.rightCh,t.rightCh.parent=t),this.transplant(e,t),t.leftCh=e.leftCh,t.leftCh.parent=t}},e.prototype.inorderTraversalAux=function(e,t,n){null===e||n.stop||(this.inorderTraversalAux(e.leftCh,t,n),n.stop||(n.stop=!1===t(e.element),n.stop||this.inorderTraversalAux(e.rightCh,t,n)))},e.prototype.levelTraversalAux=function(e,t){var n=new r.default;for(null!==e&&n.enqueue(e);!n.isEmpty();){if(e=n.dequeue(),!1===t(e.element))return;null!==e.leftCh&&n.enqueue(e.leftCh),null!==e.rightCh&&n.enqueue(e.rightCh)}},e.prototype.preorderTraversalAux=function(e,t,n){null===e||n.stop||(n.stop=!1===t(e.element),n.stop||(this.preorderTraversalAux(e.leftCh,t,n),n.stop||this.preorderTraversalAux(e.rightCh,t,n)))},e.prototype.postorderTraversalAux=function(e,t,n){null===e||n.stop||(this.postorderTraversalAux(e.leftCh,t,n),n.stop||(this.postorderTraversalAux(e.rightCh,t,n),n.stop||(n.stop=!1===t(e.element))))},e.prototype.minimumAux=function(e){for(;null!==e.leftCh;)e=e.leftCh;return e},e.prototype.maximumAux=function(e){for(;null!==e.rightCh;)e=e.rightCh;return e},e.prototype.heightAux=function(e){return null===e?-1:Math.max(this.heightAux(e.leftCh),this.heightAux(e.rightCh))+1},e.prototype.insertNode=function(e){for(var t=null,n=this.root,o=null;null!==n;){if(0===(o=this.compare(e.element,n.element)))return null;o<0?(t=n,n=n.leftCh):(t=n,n=n.rightCh)}return e.parent=t,null===t?this.root=e:this.compare(e.element,t.element)<0?t.leftCh=e:t.rightCh=e,e},e.prototype.createNode=function(e){return{element:e,leftCh:null,rightCh:null,parent:null}},e}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"./Queue":11,"./util":15}],2:[function(e,t,n){"use strict";var o=e("./util"),r=e("./Dictionary"),i=e("./Set"),s=function(){function e(e){this.toStrF=e||o.defaultToString,this.dictionary=new r.default(this.toStrF),this.nElements=0}return e.prototype.add=function(e,t){if(void 0===t&&(t=1),o.isUndefined(e)||t<=0)return!1;if(this.contains(e))this.dictionary.getValue(e).copies+=t;else{var n={value:e,copies:t};this.dictionary.setValue(e,n)}return this.nElements+=t,!0},e.prototype.count=function(e){return this.contains(e)?this.dictionary.getValue(e).copies:0},e.prototype.contains=function(e){return this.dictionary.containsKey(e)},e.prototype.remove=function(e,t){if(void 0===t&&(t=1),o.isUndefined(e)||t<=0)return!1;if(this.contains(e)){var n=this.dictionary.getValue(e);return t>n.copies?this.nElements-=n.copies:this.nElements-=t,n.copies-=t,n.copies<=0&&this.dictionary.remove(e),!0}return!1},e.prototype.toArray=function(){for(var e=[],t=this.dictionary.values(),n=0,o=t;n<o.length;n++)for(var r=o[n],i=r.value,s=r.copies,a=0;a<s;a++)e.push(i);return e},e.prototype.toSet=function(){for(var e=new i.default(this.toStrF),t=this.dictionary.values(),n=0,o=t;n<o.length;n++){var r=o[n],s=r.value;e.add(s)}return e},e.prototype.forEach=function(e){this.dictionary.forEach(function(t,n){
for(var o=n.value,r=n.copies,i=0;i<r;i++)if(!1===e(o))return!1;return!0})},e.prototype.size=function(){return this.nElements},e.prototype.isEmpty=function(){return 0===this.nElements},e.prototype.clear=function(){this.nElements=0,this.dictionary.clear()},e}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=s},{"./Dictionary":3,"./Set":12,"./util":15}],3:[function(e,t,n){"use strict";var o=e("./util"),r=function(){function e(e){this.table={},this.nElements=0,this.toStr=e||o.defaultToString}return e.prototype.getValue=function(e){var t=this.table["$"+this.toStr(e)];if(!o.isUndefined(t))return t.value},e.prototype.setValue=function(e,t){if(!o.isUndefined(e)&&!o.isUndefined(t)){var n,r="$"+this.toStr(e),i=this.table[r];return o.isUndefined(i)?(this.nElements++,n=void 0):n=i.value,this.table[r]={key:e,value:t},n}},e.prototype.remove=function(e){var t="$"+this.toStr(e),n=this.table[t];if(!o.isUndefined(n))return delete this.table[t],this.nElements--,n.value},e.prototype.keys=function(){var e=[];for(var t in this.table)if(o.has(this.table,t)){var n=this.table[t];e.push(n.key)}return e},e.prototype.values=function(){var e=[];for(var t in this.table)if(o.has(this.table,t)){var n=this.table[t];e.push(n.value)}return e},e.prototype.forEach=function(e){for(var t in this.table)if(o.has(this.table,t)){var n=this.table[t],r=e(n.key,n.value);if(!1===r)return}},e.prototype.containsKey=function(e){return!o.isUndefined(this.getValue(e))},e.prototype.clear=function(){this.table={},this.nElements=0},e.prototype.size=function(){return this.nElements},e.prototype.isEmpty=function(){return this.nElements<=0},e.prototype.toString=function(){var e="{";return this.forEach(function(t,n){e+="\n\t"+t+" : "+n}),e+"\n}"},e}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=r},{"./util":15}],4:[function(e,t,n){"use strict";var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=e("./Dictionary"),i=e("./util"),s=function(e){function t(t,n){e.call(this,n),this.defaultFactoryFunction=t}return o(t,e),t.prototype.setDefault=function(t,n){var o=e.prototype.getValue.call(this,t);return i.isUndefined(o)?(this.setValue(t,n),n):o},t.prototype.getValue=function(e){return this.setDefault(e,this.defaultFactoryFunction())},t}(r.default);Object.defineProperty(n,"__esModule",{value:!0}),n.default=s},{"./Dictionary":3,"./util":15}],5:[function(e,t,n){"use strict";var o=e("./util"),r=e("./arrays"),i=function(){function e(e){this.data=[],this.compare=e||o.defaultCompare}return e.prototype.leftChildIndex=function(e){return 2*e+1},e.prototype.rightChildIndex=function(e){return 2*e+2},e.prototype.parentIndex=function(e){return Math.floor((e-1)/2)},e.prototype.minIndex=function(e,t){return t>=this.data.length?e>=this.data.length?-1:e:this.compare(this.data[e],this.data[t])<=0?e:t},e.prototype.siftUp=function(e){for(var t=this.parentIndex(e);e>0&&this.compare(this.data[t],this.data[e])>0;)r.swap(this.data,t,e),e=t,t=this.parentIndex(e)},e.prototype.siftDown=function(e){for(var t=this.minIndex(this.leftChildIndex(e),this.rightChildIndex(e));t>=0&&this.compare(this.data[e],this.data[t])>0;)r.swap(this.data,t,e),e=t,t=this.minIndex(this.leftChildIndex(e),this.rightChildIndex(e))},e.prototype.peek=function(){return this.data.length>0?this.data[0]:void 0},e.prototype.add=function(e){if(!o.isUndefined(e))return this.data.push(e),this.siftUp(this.data.length-1),!0},e.prototype.removeRoot=function(){if(this.data.length>0){var e=this.data[0];return this.data[0]=this.data[this.data.length-1],this.data.splice(this.data.length-1,1),this.data.length>0&&this.siftDown(0),e}},e.prototype.contains=function(e){var t=o.compareToEquals(this.compare);return r.contains(this.data,e,t)},e.prototype.size=function(){return this.data.length},e.prototype.isEmpty=function(){return this.data.length<=0},e.prototype.clear=function(){this.data.length=0},e.prototype.forEach=function(e){r.forEach(this.data,e)},e}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"./arrays":14,"./util":15}],6:[function(e,t,n){"use strict";var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=e("./Dictionary"),i=e("./util"),s=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},e}(),a=function(e){function t(t){e.call(this,t),this.head=new s(null,null),this.tail=new s(null,null),this.head.next=this.tail,this.tail.prev=this.head}return o(t,e),t.prototype.appendToTail=function(e){var t=this.tail.prev;t.next=e,e.prev=t,e.next=this.tail,this.tail.prev=e},t.prototype.getLinkedDictionaryPair=function(e){if(!i.isUndefined(e)){var t="$"+this.toStr(e);return this.table[t]}},t.prototype.getValue=function(e){var t=this.getLinkedDictionaryPair(e);if(!i.isUndefined(t))return t.value},t.prototype.remove=function(t){var n=this.getLinkedDictionaryPair(t);if(!i.isUndefined(n))return e.prototype.remove.call(this,t),n.unlink(),n.value},t.prototype.clear=function(){e.prototype.clear.call(this),this.head.next=this.tail,this.tail.prev=this.head},t.prototype.replace=function(e,t){var n="$"+this.toStr(t.key);t.next=e.next,t.prev=e.prev,this.remove(e.key),t.prev.next=t,t.next.prev=t,this.table[n]=t,++this.nElements},t.prototype.setValue=function(e,t){if(!i.isUndefined(e)&&!i.isUndefined(t)){var n=this.getLinkedDictionaryPair(e),o=new s(e,t),r="$"+this.toStr(e);return i.isUndefined(n)?(this.appendToTail(o),this.table[r]=o,void++this.nElements):(this.replace(n,o),n.value)}},t.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(t)}),e},t.prototype.values=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),e},t.prototype.forEach=function(e){for(var t=this.head.next;null!=t.next;){if(!1===e(t.key,t.value))return;t=t.next}},t}(r.default);Object.defineProperty(n,"__esModule",{value:!0}),n.default=a},{"./Dictionary":3,"./util":15}],7:[function(e,t,n){"use strict";var o=e("./util"),r=e("./arrays"),i=function(){function e(){this.firstNode=null,this.lastNode=null,this.nElements=0}return e.prototype.add=function(e,t){if(o.isUndefined(t)&&(t=this.nElements),t<0||t>this.nElements||o.isUndefined(e))return!1;var n=this.createNode(e);if(0===this.nElements)this.firstNode=n,this.lastNode=n;else if(t===this.nElements)this.lastNode.next=n,this.lastNode=n;else if(0===t)n.next=this.firstNode,this.firstNode=n;else{var r=this.nodeAtIndex(t-1);n.next=r.next,r.next=n}return this.nElements++,!0},e.prototype.first=function(){if(null!==this.firstNode)return this.firstNode.element},e.prototype.last=function(){if(null!==this.lastNode)return this.lastNode.element},e.prototype.elementAtIndex=function(e){var t=this.nodeAtIndex(e);if(null!==t)return t.element},e.prototype.indexOf=function(e,t){var n=t||o.defaultEquals;if(o.isUndefined(e))return-1;for(var r=this.firstNode,i=0;null!==r;){if(n(r.element,e))return i;i++,r=r.next}return-1},e.prototype.contains=function(e,t){return this.indexOf(e,t)>=0},e.prototype.remove=function(e,t){var n=t||o.defaultEquals;if(this.nElements<1||o.isUndefined(e))return!1;for(var r=null,i=this.firstNode;null!==i;){if(n(i.element,e))return i===this.firstNode?(this.firstNode=this.firstNode.next,i===this.lastNode&&(this.lastNode=null)):i===this.lastNode?(this.lastNode=r,r.next=i.next,i.next=null):(r.next=i.next,i.next=null),this.nElements--,!0;r=i,i=i.next}return!1},e.prototype.clear=function(){this.firstNode=null,this.lastNode=null,this.nElements=0},e.prototype.equals=function(t,n){var r=n||o.defaultEquals;return t instanceof e&&(this.size()===t.size()&&this.equalsAux(this.firstNode,t.firstNode,r))},e.prototype.equalsAux=function(e,t,n){for(;null!==e;){if(!n(e.element,t.element))return!1;e=e.next,t=t.next}return!0},e.prototype.removeElementAtIndex=function(e){if(!(e<0||e>=this.nElements)){var t;if(1===this.nElements)t=this.firstNode.element,this.firstNode=null,this.lastNode=null;else{var n=this.nodeAtIndex(e-1);null===n?(t=this.firstNode.element,this.firstNode=this.firstNode.next):n.next===this.lastNode&&(t=this.lastNode.element,this.lastNode=n),null!==n&&(t=n.next.element,n.next=n.next.next)}return this.nElements--,t}},e.prototype.forEach=function(e){for(var t=this.firstNode;null!==t&&!1!==e(t.element);)t=t.next},e.prototype.reverse=function(){for(var e=null,t=this.firstNode,n=null;null!==t;)n=t.next,t.next=e,e=t,t=n;n=this.firstNode,this.firstNode=this.lastNode,this.lastNode=n},e.prototype.toArray=function(){for(var e=[],t=this.firstNode;null!==t;)e.push(t.element),t=t.next;return e},e.prototype.size=function(){return this.nElements},e.prototype.isEmpty=function(){return this.nElements<=0},e.prototype.toString=function(){return r.toString(this.toArray())},e.prototype.nodeAtIndex=function(e){if(e<0||e>=this.nElements)return null;if(e===this.nElements-1)return this.lastNode;for(var t=this.firstNode,n=0;n<e;n++)t=t.next;return t},e.prototype.createNode=function(e){return{element:e,next:null}},e}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"./arrays":14,"./util":15}],8:[function(e,t,n){"use strict";var o=e("./util"),r=e("./Dictionary"),i=e("./arrays"),s=function(){function e(e,t,n){void 0===n&&(n=!1),this.dict=new r.default(e),this.equalsF=t||o.defaultEquals,this.allowDuplicate=n}return e.prototype.getValue=function(e){var t=this.dict.getValue(e);return o.isUndefined(t)?[]:i.copy(t)},e.prototype.setValue=function(e,t){if(o.isUndefined(e)||o.isUndefined(t))return!1;if(!this.containsKey(e))return this.dict.setValue(e,[t]),!0;var n=this.dict.getValue(e);return!(!this.allowDuplicate&&i.contains(n,t,this.equalsF))&&(n.push(t),!0)},e.prototype.remove=function(e,t){if(o.isUndefined(t)){var n=this.dict.remove(e);return!o.isUndefined(n)}var r=this.dict.getValue(e);return!!i.remove(r,t,this.equalsF)&&(0===r.length&&this.dict.remove(e),!0)},e.prototype.keys=function(){return this.dict.keys()},e.prototype.values=function(){for(var e=this.dict.values(),t=[],n=0,o=e;n<o.length;n++)for(var r=o[n],i=0,s=r;i<s.length;i++){var a=s[i];t.push(a)}return t},e.prototype.containsKey=function(e){return this.dict.containsKey(e)},e.prototype.clear=function(){this.dict.clear()},e.prototype.size=function(){return this.dict.size()},e.prototype.isEmpty=function(){return this.dict.isEmpty()},e}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=s},{"./Dictionary":3,"./arrays":14,"./util":15}],9:[function(e,t,n){"use strict";var o;!function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER",e[e.INSIDE_AT_END=2]="INSIDE_AT_END",e[e.INSIDE_AT_START=3]="INSIDE_AT_START"}(o||(o={}));var r=function(){function e(e,t){void 0===e&&(e=[]),void 0===t&&(t={}),this.rootIds=e,this.nodes=t,this.initRootIds(),this.initNodes()}return e.prototype.initRootIds=function(){for(var e=0,t=this.rootIds;e<t.length;e++){var n=t[e];this.createEmptyNodeIfNotExist(n)}},e.prototype.initNodes=function(){for(var e in this.nodes)if(this.nodes.hasOwnProperty(e))for(var t=0,n=this.nodes[e];t<n.length;t++){var o=n[t];this.createEmptyNodeIfNotExist(o)}},e.prototype.createEmptyNodeIfNotExist=function(e){this.nodes[e]||(this.nodes[e]=[])},e.prototype.getRootIds=function(){return this.rootIds.slice()},e.prototype.getNodes=function(){var e={};for(var t in this.nodes)this.nodes.hasOwnProperty(t)&&(e[t]=this.nodes[t].slice());return e},e.prototype.getObject=function(){return{rootIds:this.getRootIds(),nodes:this.getNodes()}},e.prototype.toObject=function(){return this.getObject()},e.prototype.flatten=function(){function e(t,n,o,r){if(void 0===r&&(r=0),t&&n&&o&&n[t]){r++;for(var i=n[t],s=0;s<i.length;s++){var a=i[s];o.push({id:a,level:r,hasParent:!0}),e(a,n,o,r)}r--}}for(var t=this,n=[],o=0;o<this.rootIds.length;o++){var r=this.rootIds[o];n.push({id:r,level:0,hasParent:!1,childrenCount:void 0}),e(r,this.nodes,n,0)}for(var i=0,s=n;i<s.length;i++){var a=s[i];a.childrenCount=function(e){if(t.nodes[e]){return t.nodes[e].length}return 0}(a.id)}return n},e.prototype.moveIdBeforeId=function(e,t){return this.moveId(e,t,o.BEFORE)},e.prototype.moveIdAfterId=function(e,t){return this.moveId(e,t,o.AFTER)},e.prototype.moveIdIntoId=function(e,t,n){return void 0===n&&(n=!0),n?this.moveId(e,t,o.INSIDE_AT_START):this.moveId(e,t,o.INSIDE_AT_END)},e.prototype.swapRootIdWithRootId=function(e,t){var n=this.findRootId(e),o=this.findRootId(t);this.swapRootPositionWithRootPosition(n,o)},e.prototype.swapRootPositionWithRootPosition=function(e,t){var n=this.rootIds[t];this.rootIds[t]=this.rootIds[e],this.rootIds[e]=n},e.prototype.deleteId=function(e){this.rootDeleteId(e),this.nodeAndSubNodesDelete(e),this.nodeRefrencesDelete(e)},e.prototype.insertIdBeforeId=function(e,t){var n=this.findRootId(e);n>-1&&this.insertIdIntoRoot(t,n);for(var o in this.nodes)if(this.nodes.hasOwnProperty(o)){var r=this.findNodeId(o,e);r>-1&&this.insertIdIntoNode(o,t,r)}},e.prototype.insertIdAfterId=function(e,t){var n=this.findRootId(e);n>-1&&this.insertIdIntoRoot(t,n+1);for(var o in this.nodes)if(this.nodes.hasOwnProperty(o)){var r=this.findNodeId(o,e);r>-1&&this.insertIdIntoNode(o,t,r+1)}},e.prototype.insertIdIntoId=function(e,t){this.nodeInsertAtEnd(e,t),this.nodes[t]=[]},e.prototype.insertIdIntoRoot=function(e,t){if(void 0===t)this.rootInsertAtEnd(e);else if(t<0){var n=this.rootIds.length;this.rootIds.splice(t+n+1,0,e)}else this.rootIds.splice(t,0,e);this.nodes[e]=this.nodes[e]||[]},e.prototype.insertIdIntoNode=function(e,t,n){if(this.nodes[e]=this.nodes[e]||[],this.nodes[t]=this.nodes[t]||[],void 0===n)this.nodeInsertAtEnd(e,t);else if(n<0){var o=this.nodes[e].length;this.nodes[e].splice(n+o+1,0,t)}else this.nodes[e].splice(n,0,t)},e.prototype.moveId=function(e,t,n){var r=e,i=this.findRootId(r);this.nodes[t];for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){this.findNodeId(s,t);break}var a=t,u=this.findRootId(a);this.nodes[t];for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){this.findNodeId(s,t);break}if(i>-1)if(u>-1)switch(this.rootDelete(i),u>i&&u--,n){case o.BEFORE:this.insertIdIntoRoot(r,u);break;case o.AFTER:this.insertIdIntoRoot(r,u+1);break;case o.INSIDE_AT_START:this.nodeInsertAtStart(a,r);break;case o.INSIDE_AT_END:this.nodeInsertAtEnd(a,r)}else{this.rootDelete(i);for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var l=this.findNodeId(s,a);if(l>-1){switch(n){case o.BEFORE:this.insertIdIntoNode(s,r,l);break;case o.AFTER:this.insertIdIntoNode(s,r,l+1);break;case o.INSIDE_AT_START:this.nodeInsertAtStart(a,r);break;case o.INSIDE_AT_END:this.nodeInsertAtEnd(a,r)}break}}}else if(u>-1){for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var l=this.findNodeId(s,r);if(l>-1){this.nodeDeleteAtIndex(s,l);break}}switch(n){case o.BEFORE:this.insertIdIntoRoot(r,u);break;case o.AFTER:this.insertIdIntoRoot(r,u+1);break;case o.INSIDE_AT_START:this.nodeInsertAtStart(a,r);break;case o.INSIDE_AT_END:this.nodeInsertAtEnd(a,r)}}else{for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var l=this.findNodeId(s,r);if(l>-1){this.nodeDeleteAtIndex(s,l);break}}for(var s in this.nodes)if(this.nodes.hasOwnProperty(s)){var l=this.findNodeId(s,a);if(l>-1){switch(n){case o.BEFORE:this.insertIdIntoNode(s,r,l);break;case o.AFTER:this.insertIdIntoNode(s,r,l+1);break;case o.INSIDE_AT_START:this.nodeInsertAtStart(a,r);break;case o.INSIDE_AT_END:this.nodeInsertAtEnd(a,r)}break}}}},e.prototype.swapArrayElements=function(e,t,n){var o=e[t];return e[t]=e[n],e[n]=o,e},e.prototype.rootDeleteId=function(e){var t=this.findRootId(e);t>-1&&this.rootDelete(t)},e.prototype.nodeAndSubNodesDelete=function(e){for(var t=[],n=0;n<this.nodes[e].length;n++){var o=this.nodes[e][n];this.nodeAndSubNodesDelete(o),t.push(e)}this.nodeDelete(e);for(var n=0;n<t.length;n++)this.nodeDelete(t[n])},e.prototype.nodeRefrencesDelete=function(e){for(var t in this.nodes)if(this.nodes.hasOwnProperty(t))for(var n=0;n<this.nodes[t].length;n++){var o=this.nodes[t][n];o===e&&this.nodeDeleteAtIndex(t,n)}},e.prototype.nodeDelete=function(e){delete this.nodes[e]},e.prototype.findRootId=function(e){return this.rootIds.indexOf(e)},e.prototype.findNodeId=function(e,t){return this.nodes[e].indexOf(t)},e.prototype.findNode=function(e){return this.nodes[e]},e.prototype.nodeInsertAtStart=function(e,t){this.nodes[e].unshift(t)},e.prototype.nodeInsertAtEnd=function(e,t){this.nodes[e].push(t)},e.prototype.rootDelete=function(e){this.rootIds.splice(e,1)},e.prototype.nodeDeleteAtIndex=function(e,t){this.nodes[e].splice(t,1)},e.prototype.rootInsertAtStart=function(e){this.rootIds.unshift(e)},e.prototype.rootInsertAtEnd=function(e){this.rootIds.push(e)},e}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=r},{}],10:[function(e,t,n){"use strict";var o=e("./util"),r=e("./Heap"),i=function(){function e(e){this.heap=new r.default(o.reverseCompareFunction(e))}return e.prototype.enqueue=function(e){return this.heap.add(e)},e.prototype.add=function(e){return this.heap.add(e)},e.prototype.dequeue=function(){if(0!==this.heap.size()){var e=this.heap.peek();return this.heap.removeRoot(),e}},e.prototype.peek=function(){return this.heap.peek()},e.prototype.contains=function(e){return this.heap.contains(e)},e.prototype.isEmpty=function(){return this.heap.isEmpty()},e.prototype.size=function(){return this.heap.size()},e.prototype.clear=function(){this.heap.clear()},e.prototype.forEach=function(e){this.heap.forEach(e)},e}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{"./Heap":5,"./util":15}],11:[function(e,t,n){"use strict";var o=e("./LinkedList"),r=function(){function e(){this.list=new o.default}return e.prototype.enqueue=function(e){return this.list.add(e)},e.prototype.add=function(e){return this.list.add(e)},e.prototype.dequeue=function(){if(0!==this.list.size()){var e=this.list.first();return this.list.removeElementAtIndex(0),e}},e.prototype.peek=function(){if(0!==this.list.size())return this.list.first()},e.prototype.size=function(){return this.list.size()},e.prototype.contains=function(e,t){return this.list.contains(e,t)},e.prototype.isEmpty=function(){return this.list.size()<=0},e.prototype.clear=function(){this.list.clear()},e.prototype.forEach=function(e){this.list.forEach(e)},e}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=r},{"./LinkedList":7}],12:[function(e,t,n){"use strict";var o=e("./util"),r=e("./arrays"),i=e("./Dictionary"),s=function(){function e(e){this.dictionary=new i.default(e)}return e.prototype.contains=function(e){return this.dictionary.containsKey(e)},e.prototype.add=function(e){return!this.contains(e)&&!o.isUndefined(e)&&(this.dictionary.setValue(e,e),!0)},e.prototype.intersection=function(e){var t=this;this.forEach(function(n){return e.contains(n)||t.remove(n),!0})},e.prototype.union=function(e){var t=this;e.forEach(function(e){return t.add(e),!0})},e.prototype.difference=function(e){var t=this;e.forEach(function(e){return t.remove(e),!0})},e.prototype.isSubsetOf=function(e){if(this.size()>e.size())return!1;var t=!0;return this.forEach(function(n){return!!e.contains(n)||(t=!1,!1)}),t},e.prototype.remove=function(e){return!!this.contains(e)&&(this.dictionary.remove(e),!0)},e.prototype.forEach=function(e){this.dictionary.forEach(function(t,n){return e(n)})},e.prototype.toArray=function(){return this.dictionary.values()},e.prototype.isEmpty=function(){return this.dictionary.isEmpty()},e.prototype.size=function(){return this.dictionary.size()},e.prototype.clear=function(){this.dictionary.clear()},e.prototype.toString=function(){return r.toString(this.toArray())},e}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=s},{"./Dictionary":3,"./arrays":14,"./util":15}],13:[function(e,t,n){"use strict";var o=e("./LinkedList"),r=function(){function e(){this.list=new o.default}return e.prototype.push=function(e){return this.list.add(e,0)},e.prototype.add=function(e){return this.list.add(e,0)},e.prototype.pop=function(){return this.list.removeElementAtIndex(0)},e.prototype.peek=function(){return this.list.first()},e.prototype.size=function(){return this.list.size()},e.prototype.contains=function(e,t){return this.list.contains(e,t)},e.prototype.isEmpty=function(){return this.list.isEmpty()},e.prototype.clear=function(){this.list.clear()},e.prototype.forEach=function(e){this.list.forEach(e)},e}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=r},{"./LinkedList":7}],14:[function(e,t,n){"use strict";function o(e,t,n){for(var o=n||g.defaultEquals,r=e.length,i=0;i<r;i++)if(o(e[i],t))return i;return-1}function r(e,t,n){for(var o=n||g.defaultEquals,r=e.length,i=r-1;i>=0;i--)if(o(e[i],t))return i;return-1}function i(e,t,n){return o(e,t,n)>=0}function s(e,t,n){var r=o(e,t,n);return!(r<0)&&(e.splice(r,1),!0)}function a(e,t,n){for(var o=n||g.defaultEquals,r=e.length,i=0,s=0;s<r;s++)o(e[s],t)&&i++;return i}function u(e,t,n){var o=n||g.defaultEquals;if(e.length!==t.length)return!1;for(var r=e.length,i=0;i<r;i++)if(!o(e[i],t[i]))return!1;return!0}function l(e){return e.concat()}function c(e,t,n){if(t<0||t>=e.length||n<0||n>=e.length)return!1;var o=e[t];return e[t]=e[n],e[n]=o,!0}function p(e){return"["+e.toString()+"]"}function h(e,t){for(var n=0,o=e;n<o.length;n++){if(!1===t(o[n]))return}}var g=e("./util");n.indexOf=o,n.lastIndexOf=r,n.contains=i,n.remove=s,n.frequency=a,n.equals=u,n.copy=l,n.swap=c,n.toString=p,n.forEach=h},{"./util":15}],15:[function(e,t,n){"use strict";function o(e,t){return e<t?-1:e===t?0:1}function r(e,t){return e===t}function i(e){return null===e?"COLLECTION_NULL":u(e)?"COLLECTION_UNDEFINED":l(e)?"$s"+e:"$o"+e.toString()}function s(e,t){if(void 0===t&&(t=","),null===e)return"COLLECTION_NULL";if(u(e))return"COLLECTION_UNDEFINED";if(l(e))return e.toString();var o="{",r=!0;for(var i in e)n.has(e,i)&&(r?r=!1:o+=t,o=o+i+":"+e[i]);return o+"}"}function a(e){return"function"==typeof e}function u(e){return void 0===e}function l(e){return"[object String]"===Object.prototype.toString.call(e)}function c(e){return a(e)?function(t,n){return-1*e(t,n)}:function(e,t){return e<t?1:e===t?0:-1}}function p(e){return function(t,n){return 0===e(t,n)}}var h=Object.prototype.hasOwnProperty;n.has=function(e,t){return h.call(e,t)},n.defaultCompare=o,n.defaultEquals=r,n.defaultToString=i,n.makeString=s,n.isFunction=a,n.isUndefined=u,n.isString=l,n.reverseCompareFunction=c,n.compareToEquals=p},{}],"typescript-collections":[function(e,t,n){"use strict";var o=e("./arrays");n.arrays=o;var r=e("./Bag");n.Bag=r.default;var i=e("./BSTree");n.BSTree=i.default;var s=e("./Dictionary");n.Dictionary=s.default;var a=e("./Heap");n.Heap=a.default;var u=e("./LinkedDictionary");n.LinkedDictionary=u.default;var l=e("./LinkedList");n.LinkedList=l.default;var c=e("./MultiDictionary");n.MultiDictionary=c.default;var p=e("./FactoryDictionary");n.FactoryDictionary=p.default;var h=e("./FactoryDictionary");n.DefaultDictionary=h.default;var g=e("./Queue");n.Queue=g.default;var f=e("./PriorityQueue");n.PriorityQueue=f.default;var d=e("./Set");n.Set=d.default;var y=e("./Stack");n.Stack=y.default;var v=e("./MultiRootTree");n.MultiRootTree=v.default;var m=e("./util");n.util=m},{"./BSTree":1,"./Bag":2,"./Dictionary":3,"./FactoryDictionary":4,"./Heap":5,"./LinkedDictionary":6,"./LinkedList":7,"./MultiDictionary":8,"./MultiRootTree":9,"./PriorityQueue":10,"./Queue":11,"./Set":12,"./Stack":13,"./arrays":14,"./util":15}]},{},[]))("typescript-collections")})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./BSTree":15,"./Bag":16,"./Dictionary":17,"./FactoryDictionary":18,"./Heap":19,"./LinkedDictionary":20,"./LinkedList":21,"./MultiDictionary":22,"./MultiRootTree":23,"./PriorityQueue":24,"./Queue":25,"./Set":26,"./Stack":27,"./arrays":28,"./util":30,"typescript-collections":29}],30:[function(e,t,n){"use strict";function o(e,t){return e<t?-1:e===t?0:1}function r(e,t){return e===t}function i(e){return null===e?"COLLECTION_NULL":u(e)?"COLLECTION_UNDEFINED":l(e)?"$s"+e:"$o"+e.toString()}function s(e,t){if(void 0===t&&(t=","),null===e)return"COLLECTION_NULL";if(u(e))return"COLLECTION_UNDEFINED";if(l(e))return e.toString();var o="{",r=!0;for(var i in e)n.has(e,i)&&(r?r=!1:o+=t,o=o+i+":"+e[i]);return o+"}"}function a(e){return"function"==typeof e}function u(e){return void 0===e}function l(e){return"[object String]"===Object.prototype.toString.call(e)}function c(e){return a(e)?function(t,n){return-1*e(t,n)}:function(e,t){return e<t?1:e===t?0:-1}}function p(e){return function(t,n){return 0===e(t,n)}}var h=Object.prototype.hasOwnProperty;n.has=function(e,t){return h.call(e,t)},n.defaultCompare=o,n.defaultEquals=r,n.defaultToString=i,n.makeString=s,n.isFunction=a,n.isUndefined=u,n.isString=l,n.reverseCompareFunction=c,n.compareToEquals=p},{}],31:[function(e,t,n){"use strict";var o=e("../utils/DataStructures"),r=e("../log/category/CategoryService"),i=e("../log/LoggerOptions"),s=function(){function e(){}return e.prototype.help=function(){console.log(e._help)},e.prototype.example=function(){console.log(e._example)},e.prototype.showSettings=function(t){void 0===t&&(t="all");var n=new o.StringBuilder,r=e._getCategoryService();e._getCategories(t).forEach(function(t){e._processCategory(r,t,n,0)}),console.log(n.toString())},e.prototype.change=function(t){var n=e._getCategoryService(),o=e._getCategories(t.category),r=null,s=null,a=null,u=null,l=null,c=function(e){null!==l&&(l+=", "),null===l?l=e:l+=e};c("recursive="+t.recursive),"string"==typeof t.logLevel&&(r=i.LogLevel.fromString(t.logLevel),c("logLevel="+t.logLevel)),"string"==typeof t.logFormat&&(s=i.DateFormatEnum.fromString(t.logFormat),c("logFormat="+t.logFormat)),"boolean"==typeof t.showCategoryName&&(a=t.showCategoryName,c("showCategoryName="+t.showCategoryName)),"boolean"==typeof t.showTimestamp&&(u=t.showTimestamp,c("showTimestamp="+t.showTimestamp));var p=function(e){var t=n.getCategorySettings(e);null!==t&&(null!==r&&(t.logLevel=r),null!==s&&(t.logFormat.dateFormat.formatEnum=s),null!==u&&(t.logFormat.showTimeStamp=u),null!==a&&(t.logFormat.showCategoryName=a))};o.forEach(function(n){return e._applyToCategory(n,t.recursive,p)}),console.log("Applied changes: "+l+" to categories '"+t.category+"'.")},e.prototype.reset=function(t){void 0===t&&(t="all");var n=e._getCategoryService(),o=function(e){var t=n.getCategorySettings(e),o=n.getOriginalCategorySettings(e);null!==t&&null!==o&&(t.logLevel=o.logLevel,t.logFormat.dateFormat.formatEnum=o.logFormat.dateFormat.formatEnum,t.logFormat.showTimeStamp=o.logFormat.showTimeStamp,t.logFormat.showCategoryName=o.logFormat.showCategoryName)};e._getCategories(t).forEach(function(t){return e._applyToCategory(t,!0,o)}),console.log("Applied reset to category: "+t+".")},e._processCategory=function(t,n,o,r){var s=t.getCategorySettings(n);if(null!==s){if(o.append("  "+n.id+": "),r>0)for(var a=0;a<r;a++)o.append("  ");o.append(n.name+" ("+i.LogLevel[s.logLevel].toString()+"@"+i.LoggerType[s.loggerType].toString()+")\n"),n.children.length>0&&n.children.forEach(function(n){e._processCategory(t,n,o,r+1)})}},e._applyToCategory=function(t,n,o){o(t),n&&t.children.forEach(function(t){e._applyToCategory(t,n,o)})},e._getCategoryService=function(){return r.CategoryServiceFactory.getRuntimeSettings()},e._getCategories=function(t){var n=e._getCategoryService(),o=[];if("all"===t)o=n.getRootCategories();else{var r=n.getCategoryById(t);if(null===r)throw new Error("Failed to find category with id "+t);o.push(r)}return o},e}();s._help='\n  help(): void\n    ** Shows this help.\n    \n  example(): void\n    ** Shows an example on how to use this.\n    \n  showSettings(id: number | "all" = "all"): void\n    ** Shows settings for a specific category, or for all. The id of categories can be found by calling this method without parameter.\n    \n  change(settings: CategoryServiceControlSettings): void\n    ** Changes the current settings for one or all categories. \n    ** \n       CategoryServiceControlSettings, properties of object:\n         category: number | "all"\n           ** Apply to specific category, or "all".\n           ** Required        \n        \n         recursive: boolean\n           ** Apply to child categories (true) or not.\n           ** Required\n           \n         logLevel: "Fatal" | "Error" | "Warn" | "Info" | "Debug" | "Trace" | undefined\n           ** Set log level, undefined will not change the setting.\n           ** Optional\n         \n         logFormat: "Default" | "YearMonthDayTime" | "YearDayMonthWithFullTime" | "YearDayMonthTime" | undefined\n           ** Set the log format, undefined will not change the setting.\n           ** Optional\n         \n         showTimestamp: boolean | undefined  \n           ** Whether to show timestamp, undefined will not change the setting.\n           ** Optional\n         \n         showCategoryName: boolean | undefined\n           ** Whether to show the category name, undefined will not change the setting.\n           ** Optional\n           \n   reset(id: number | "all"): void\n     ** Resets everything to original values, for one specific or for all categories.\n',s._example='\n  Examples:\n    change({category: "all", recursive:true, logLevel: "Info"}) \n      ** Change loglevel to Info for all categories, apply to child categories as well.\n     \n    change({category: 1, recursive:false, logLevel: "Warn"})\n      ** Change logLevel for category 1, do not recurse.\n      \n    change({category: "all", recursive:true, logLevel: "Debug", logFormat: "YearDayMonthTime", showTimestamp:false, showCategoryName:false})    \n      ** Change loglevel to Debug for all categories, apply format, do not show timestamp and category names - recursively to child categories.    \n      \n',n.CategoryServiceControlImpl=s},{"../log/LoggerOptions":34,"../log/category/CategoryService":41,"../utils/DataStructures":48}],32:[function(e,t,n){"use strict";var o=e("../log/LoggerOptions"),r=e("../log/standard/LoggerFactoryService"),i=e("../utils/DataStructures"),s=function(){function e(){}return e.prototype.help=function(){console.log(e._help)},e.prototype.listFactories=function(){var t=e._getRuntimeSettingsLoggerFactories(),n=new i.StringBuilder;n.appendLine("Registered LoggerFactories (index / name)");for(var o=0;o<t.length;o++){var r=t[o];n.append("  "+o).append(": "+r.getName()+"\n")}console.log(n.toString())},e.prototype.showSettings=function(t){void 0===t&&(t="all");var n=[];if("all"===t){var r=0;e._getRuntimeSettingsLoggerFactories().forEach(function(e){n.push(new i.TuplePair(r++,e))})}else{var s=e._getRuntimeSettingsLoggerFactories();if(!(t>=0&&t<s.length))throw new Error("Requested number: "+t+" was not found.");n.push(new i.TuplePair(t,s[t]))}for(var a=0,u=n;a<u.length;a++){var l=u[a];console.log("  LoggerFactory: "+l.y.getName()+" (id="+l.x+")");for(var c=l.y.getLogGroupRuntimeSettings(),p=0;p<c.length;p++){var h=c[p];console.log("     LogGroup: (id="+p+")"),console.log("       RegExp: "+h.logGroupRule.regExp.source),console.log("       Level: "+o.LogLevel[h.level].toString()),console.log("       LoggerType: "+o.LoggerType[h.loggerType].toString())}}},e.prototype.reset=function(t){void 0===t&&(t="all");var n=e._getRuntimeSettingsLoggerFactories(),o=[];"all"===t?o=n:t>=0&&t<n.length&&o.push(n[t]),o.forEach(function(e){console.log("Reset all settings for factory "+t),new a(e).reset()})},e.prototype.getLoggerFactoryControl=function(t){var n=e._getRuntimeSettingsLoggerFactories();if(t>=0&&t<n.length)return new a(n[t]);throw new Error("idFactory is invalid (less than 0) or non existing id.")},e._getRuntimeSettingsLoggerFactories=function(){return e._getSettings().getRuntimeSettingsForLoggerFactories()},e._getSettings=function(){return r.LFService.getRuntimeSettings()},e}()
;s._help='\n  help(): void\n    ** Shows this help.\n    \n  listFactories(): void\n    ** List all registered LoggerFactories with associated log groups with respective ids (ids can be used to target a factory and/or group).\n    \n  showSettings(idFactory: number | "all"): void\n    ** Show log group settings for idFactory (use listFactories to find id for a LoggerFactory). If idFactory is "all" shows all factories. \n  \n  getLoggerFactoryControl(idFactory: number): LoggerFactoryControl\n    ** Return LoggerFactoryControl when found for given idFactory or throws Error if invalid or null, get the id by using listFactories()\n    \n  reset(idFactory: number | "all"): void\n    ** Resets given factory or all factories back to original values. \n',n.LoggerControlImpl=s;var a=function(){function e(e){this._settings=e}return e.prototype.help=function(){console.log(e._help)},e.prototype.example=function(){console.log(e._example)},e.prototype.showSettings=function(e){void 0===e&&(e="all");var t=new i.StringBuilder,n=this._settings.getLogGroupRuntimeSettings();t.appendLine("Registered LogGroups (index / expression)");for(var r=0;r<n.length;r++){var s=n[r];t.appendLine("  "+r+": "+s.logGroupRule.regExp.source+", logLevel="+o.LogLevel[s.level].toString()+", showTimestamp="+s.logFormat.showTimeStamp+", showLoggerName="+s.logFormat.showLoggerName+", format="+o.DateFormatEnum[s.logFormat.dateFormat.formatEnum].toString())}console.log(t.toString())},e.prototype.change=function(e){var t=this._getLogGroupRunTimeSettingsFor(e.group),n=null,r=null,i=null,s=null,a=null,u=function(e){null!==a&&(a+=", "),null===a?a=e:a+=e};"string"==typeof e.logLevel&&(n=o.LogLevel.fromString(e.logLevel),u("logLevel="+e.logLevel)),"string"==typeof e.logFormat&&(r=o.DateFormatEnum.fromString(e.logFormat),u("logFormat="+e.logFormat)),"boolean"==typeof e.showLoggerName&&(i=e.showLoggerName,u("showLoggerName="+e.showLoggerName)),"boolean"==typeof e.showTimestamp&&(s=e.showTimestamp,u("showTimestamp="+e.showTimestamp)),t.forEach(function(e){null!==n&&(e.level=n),null!==r&&(e.logFormat.dateFormat.formatEnum=r),null!==s&&(e.logFormat.showTimeStamp=s),null!==i&&(e.logFormat.showLoggerName=i)}),console.log("Applied changes: "+a+" to log groups '"+e.group+"'.")},e.prototype.reset=function(e){void 0===e&&(e="all");for(var t=this._getLogGroupRunTimeSettingsFor(e),n=0,o=t;n<o.length;n++){var r=o[n];r.level=r.logGroupRule.level,r.logFormat.showTimeStamp=r.logGroupRule.logFormat.showTimeStamp,r.logFormat.showLoggerName=r.logGroupRule.logFormat.showLoggerName,r.logFormat.dateFormat.formatEnum=r.logGroupRule.logFormat.dateFormat.formatEnum}console.log("Reset all settings for group "+e)},e.prototype._getLogGroupRunTimeSettingsFor=function(e){var t=[];return"all"===e?t=this._settings.getLogGroupRuntimeSettings():(this._checkIndex(e),t.push(this._settings.getLogGroupRuntimeSettings()[e])),t},e.prototype._checkIndex=function(e){if(e<0||e>=this._settings.getLogGroupRuntimeSettings().length)throw new Error("Invalid index, use listLogGroups to find out a valid one.")},e}();a._help='\n  help(): void\n    ** Shows this help.\n    \n  example(): void\n    ** Shows an example of usage.\n\n  showSettings(id: number | "all"): void\n    ** Prints settings for given group id, "all" for all group.\n\n  change(settings: LogGroupControlSettings): void\n    ** Changes the current settings for one or all log groups. \n    ** \n       LogGroupControlSettings, properties of object:\n         group: number | "all"\n           ** Apply to specific group, or "all".\n           ** Required        \n           \n         logLevel: "Fatal" | "Error" | "Warn" | "Info" | "Debug" | "Trace" | undefined\n           ** Set log level, undefined will not change the setting.\n           ** Optional\n         \n         logFormat: "Default" | "YearMonthDayTime" | "YearDayMonthWithFullTime" | "YearDayMonthTime" | undefined\n           ** Set the log format, undefined will not change the setting.\n           ** Optional\n         \n         showTimestamp: boolean | undefined  \n           ** Whether to show timestamp, undefined will not change the setting.\n           ** Optional\n         \n         showLoggerName: boolean | undefined\n           ** Whether to show the logger name, undefined will not change the setting.\n           ** Optional  \n           \n  reset(id: number | "all"): void\n    ** Resets everything to original values, for one specific or for all groups.\n    \n  help():\n    ** Shows this help.\n',a._example='\n  Examples:\n    change({group: "all", logLevel: "Info"}) \n      ** Change loglevel to Info for all groups.\n     \n    change({group: 1, recursive:false, logLevel: "Warn"})\n      ** Change logLevel for group 1 to Warn.\n      \n    change({group: "all", logLevel: "Debug", logFormat: "YearDayMonthTime", showTimestamp:false, showLoggerName:false})    \n      ** Change loglevel to Debug for all groups, apply format, do not show timestamp and logger names.      \n'},{"../log/LoggerOptions":34,"../log/standard/LoggerFactoryService":45,"../utils/DataStructures":48}],33:[function(e,t,n){"use strict";var o=e("../log/category/CategoryService"),r=e("../log/LoggerOptions"),i=e("../utils/MessageUtils"),s=function(){function e(){}return e.register=function(){if(!e.registered){e.registered=!0;var t=function(t){var n=t.data;null!==n&&e.processMessageFromExtension(n)};"undefined"!=typeof window&&(window.removeEventListener("message",t),window.addEventListener("message",t))}},e.processMessageFromExtension=function(t){if(e.registered)if("tsl-extension"===t.from){var n=t.data;switch(n.type){case"register":e.enableExtensionIntegration();break;case"request-change-loglevel":var o=n.value,r=e.applyLogLevel(o.categoryId,o.logLevel,o.recursive);r.length>0&&e.sendCategoriesRuntimeUpdateMessage(r);break;default:console.log("Unknown command to process message from extension, command was: "+n.type)}}else"tsl-logging"!==t.from&&console.log("Dropping unknown message: "+JSON.stringify(t))},e.sendCategoryLogMessage=function(t){if(e.registered){var n=t.getCategories().map(function(e){return e.id}),o={type:"log-message",value:{categories:n,errorAsStack:t.getErrorAsStack(),formattedMessage:i.MessageFormatUtils.renderDefaultMessage(t,!1),logLevel:r.LogLevel[t.getLevel()].toString(),message:t.getMessage(),resolvedErrorMessage:t.isResolvedErrorMessage()}},s={data:o,from:"tsl-logging"};e.sendMessage(s)}},e.sendCategoriesRuntimeUpdateMessage=function(t){if(e.registered){var n=o.CategoryServiceImpl.getInstance(),i={categories:Array()};t.forEach(function(e){var t=n.getCategorySettings(e);null!=t&&i.categories.push({id:e.id,logLevel:r.LogLevel[t.logLevel].toString()})});var s={type:"categories-rt-update",value:i},a={data:s,from:"tsl-logging"};e.sendMessage(a)}},e.sendRootCategoriesToExtension=function(){if(e.registered){var t=o.CategoryServiceImpl.getInstance().getRootCategories().map(function(t){return e.getCategoryAsJSON(t)}),n={type:"root-categories-tree",value:t},r={data:n,from:"tsl-logging"};e.sendMessage(r)}},e.getCategoryAsJSON=function(t){return{children:t.children.map(function(t){return e.getCategoryAsJSON(t)}),id:t.id,logLevel:r.LogLevel[t.logLevel].toString(),name:t.name,parentId:null!=t.parent?t.parent.id:null}},e.applyLogLevel=function(t,n,i){var s=[],a=o.CategoryServiceImpl.getInstance().getCategoryById(t);return null!=a?e._applyLogLevelRecursive(a,r.LogLevel.fromString(n),i,s):console.log("Could not change log level, failed to find category with id: "+t),s},e._applyLogLevelRecursive=function(t,n,r,i){var s=o.CategoryServiceImpl.getInstance().getCategorySettings(t);null!=s&&(s.logLevel=n,i.push(t),r&&t.children.forEach(function(t){e._applyLogLevelRecursive(t,n,r,i)}))},e.getAllCategories=function(){var e=[],t=function(e,n){n.push(e),e.children.forEach(function(e){t(e,n)})};return o.CategoryServiceImpl.getInstance().getRootCategories().forEach(function(n){t(n,e)}),e},e.sendMessage=function(t){e.registered&&"undefined"!=typeof window&&window.postMessage(t,"*")},e.enableExtensionIntegration=function(){if(e.registered){o.CategoryServiceImpl.getInstance().enableExtensionIntegration(),e.sendRootCategoriesToExtension();var t=e.getAllCategories();e.sendCategoriesRuntimeUpdateMessage(t)}},e}();s.registered=!1,n.ExtensionHelper=s},{"../log/LoggerOptions":34,"../log/category/CategoryService":41,"../utils/MessageUtils":50}],34:[function(e,t,n){"use strict";!function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warn=3]="Warn",e[e.Error=4]="Error",e[e.Fatal=5]="Fatal"}(n.LogLevel||(n.LogLevel={})),function(e){function t(t){if(null==t)throw new Error("Argument must be set");switch(t.toLowerCase()){case"trace":return e.Trace;case"debug":return e.Debug;case"info":return e.Info;case"warn":return e.Warn;case"error":return e.Error;case"fatal":return e.Fatal;default:throw new Error("Unsupported value for conversion: "+t)}}e.fromString=t}(n.LogLevel||(n.LogLevel={}));!function(e){e[e.Console=0]="Console",e[e.MessageBuffer=1]="MessageBuffer",e[e.Custom=2]="Custom"}(n.LoggerType||(n.LoggerType={}));var o;!function(e){e[e.Default=0]="Default",e[e.YearMonthDayTime=1]="YearMonthDayTime",e[e.YearDayMonthWithFullTime=2]="YearDayMonthWithFullTime",e[e.YearDayMonthTime=3]="YearDayMonthTime"}(o=n.DateFormatEnum||(n.DateFormatEnum={})),function(e){function t(t){if(null==t)throw new Error("Argument must be set");switch(t.toLowerCase()){case"default":return e.Default;case"yearmonthdayTime":return e.YearMonthDayTime;case"yeardaymonthwithfulltime":return e.YearDayMonthWithFullTime;case"yeardaymonthtime":return e.YearDayMonthTime;default:throw new Error("Unsupported value for conversion: "+t)}}e.fromString=t}(o=n.DateFormatEnum||(n.DateFormatEnum={}));var r=function(){function e(e,t){void 0===e&&(e=o.Default),void 0===t&&(t="-"),this._formatEnum=e,this._dateSeparator=t}return Object.defineProperty(e.prototype,"formatEnum",{get:function(){return this._formatEnum},set:function(e){this._formatEnum=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateSeparator",{get:function(){return this._dateSeparator},set:function(e){this._dateSeparator=e},enumerable:!0,configurable:!0}),e.prototype.copy=function(){return new e(this._formatEnum,this._dateSeparator)},e}();n.DateFormat=r;var i=function(){function e(e,t,n){void 0===e&&(e=new r),void 0===t&&(t=!0),void 0===n&&(n=!0),this._showTimeStamp=!0,this._showLoggerName=!0,this._dateFormat=e,this._showTimeStamp=t,this._showLoggerName=n}return Object.defineProperty(e.prototype,"dateFormat",{get:function(){return this._dateFormat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTimeStamp",{get:function(){return this._showTimeStamp},set:function(e){this._showTimeStamp=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showLoggerName",{get:function(){return this._showLoggerName},set:function(e){this._showLoggerName=e},enumerable:!0,configurable:!0}),e}();n.LogFormat=i;var s=function(){function e(e,t,n){void 0===e&&(e=new r),void 0===t&&(t=!0),void 0===n&&(n=!0),this._dateFormat=e,this._showTimeStamp=t,this._showCategoryName=n}return Object.defineProperty(e.prototype,"dateFormat",{get:function(){return this._dateFormat},set:function(e){this._dateFormat=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTimeStamp",{get:function(){return this._showTimeStamp},set:function(e){this._showTimeStamp=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showCategoryName",{get:function(){return this._showCategoryName},set:function(e){this._showCategoryName=e},enumerable:!0,configurable:!0}),e.prototype.copy=function(){return new e(this._dateFormat.copy(),this._showTimeStamp,this._showCategoryName)},e}();n.CategoryLogFormat=s},{}],35:[function(e,t,n){"use strict";var o=e("../../utils/DataStructures"),r=e("../../utils/MessageUtils"),i=e("../LoggerOptions"),s=function(){function e(e,t,n,o,r,i,s){this._resolvedErrorMessage=!1,this._errorAsStack=null,this._message=e,this._error=t,this._categories=n,this._date=o,this._level=r,this._logFormat=i,this._ready=s}return e.prototype.getMessage=function(){return this._message},e.prototype.getErrorAsStack=function(){return this._errorAsStack},e.prototype.setErrorAsStack=function(e){this._errorAsStack=e},e.prototype.getError=function(){return this._error},e.prototype.getCategories=function(){return this._categories},e.prototype.getDate=function(){return this._date},e.prototype.getLevel=function(){return this._level},e.prototype.getLogFormat=function(){return this._logFormat},e.prototype.isReady=function(){return this._ready},e.prototype.setReady=function(e){this._ready=e},Object.defineProperty(e.prototype,"resolvedErrorMessage",{get:function(){return this._resolvedErrorMessage},set:function(e){this._resolvedErrorMessage=e},enumerable:!0,configurable:!0}),e.prototype.isResolvedErrorMessage=function(){return this._resolvedErrorMessage},e}(),a=function(){function e(e,t){this.allMessages=new o.LinkedList,this.rootCategory=e,this.runtimeSettings=t}return e.prototype.trace=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._log.apply(this,[i.LogLevel.Trace,e,null,!1].concat(t))},e.prototype.debug=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._log.apply(this,[i.LogLevel.Debug,e,null,!1].concat(t))},e.prototype.info=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._log.apply(this,[i.LogLevel.Info,e,null,!1].concat(t))},e.prototype.warn=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._log.apply(this,[i.LogLevel.Warn,e,null,!1].concat(t))},e.prototype.error=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];this._log.apply(this,[i.LogLevel.Error,e,t,!1].concat(n))},e.prototype.fatal=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];this._log.apply(this,[i.LogLevel.Fatal,e,t,!1].concat(n))},e.prototype.resolved=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];this._log.apply(this,[i.LogLevel.Error,e,t,!0].concat(n))},e.prototype.log=function(e,t,n){for(var o=[],r=3;r<arguments.length;r++)o[r-3]=arguments[r];this._log.apply(this,[e,t,n,!1].concat(o))},e.prototype.tracec=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._logc.apply(this,[i.LogLevel.Trace,e,function(){return null},!1].concat(t))},e.prototype.debugc=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._logc.apply(this,[i.LogLevel.Debug,e,function(){return null},!1].concat(t))},e.prototype.infoc=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._logc.apply(this,[i.LogLevel.Info,e,function(){return null},!1].concat(t))},e.prototype.warnc=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._logc.apply(this,[i.LogLevel.Warn,e,function(){return null},!1].concat(t))},e.prototype.errorc=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];this._logc.apply(this,[i.LogLevel.Error,e,t,!1].concat(n))},e.prototype.fatalc=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];this._logc.apply(this,[i.LogLevel.Fatal,e,t,!1].concat(n))},e.prototype.resolvedc=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];this._logc.apply(this,[i.LogLevel.Error,e,t,!0].concat(n))},e.prototype.logc=function(e,t,n){for(var o=[],r=3;r<arguments.length;r++)o[r-3]=arguments[r];this._logc.apply(this,[e,t,n,!1].concat(o))},e.prototype.getRootCategory=function(){return this.rootCategory},e.prototype.createDefaultLogMessage=function(e){return r.MessageFormatUtils.renderDefaultMessage(e,!0)},e.prototype._log=function(e,t,n,o){void 0===n&&(n=null),void 0===o&&(o=!1);for(var r=[],i=4;i<arguments.length;i++)r[i-4]=arguments[i];this._logInternal.apply(this,[e,function(){return t},function(){return n},o].concat(r))},e.prototype._logc=function(e,t,n,o){void 0===o&&(o=!1);for(var r=[],i=4;i<arguments.length;i++)r[i-4]=arguments[i];this._logInternal.apply(this,[e,t,n,o].concat(r))},e.prototype._logInternal=function(e,t,n,o){for(var i=this,a=[],u=4;u<arguments.length;u++)a[u-4]=arguments[u];var l;void 0!==a&&a.length>0?l=a:(l=[],l.push(this.rootCategory));for(var c=this,p=0;p<l.length;p++){if("break"===function(a){var u=l[a];if(null==u)throw new Error("Cannot have a null element within categories, at index="+a);var p=c.runtimeSettings.getCategorySettings(u);if(null==p)throw new Error("Category with path: "+u.getCategoryPath()+" is not registered with this logger, maybe you registered it with a different root logger?");if(p.logLevel<=e){var h=null!=n?n():null;if(null==h){var g=new s(t(),h,l,new Date,e,p.logFormat,!0);g.resolvedErrorMessage=o,c.allMessages.addTail(g),c.processMessages()}else{var f=new s(t(),h,l,new Date,e,p.logFormat,!1);f.resolvedErrorMessage=o,c.allMessages.addTail(f),r.MessageFormatUtils.renderError(h).then(function(e){f.setErrorAsStack(e),f.setReady(!0),i.processMessages()})}return"break"}}(p))break}},e.prototype.processMessages=function(){var e=this.allMessages;if(e.getSize()>0)do{var t=e.getHead();if(null!=t){if(!t.isReady())break;e.removeHead(),this.doLog(t)}}while(e.getSize()>0)},e}();n.AbstractCategoryLogger=a},{"../../utils/DataStructures":48,"../../utils/MessageUtils":50,"../LoggerOptions":34}],36:[function(e,t,n){"use strict";var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=e("../LoggerOptions"),i=e("./AbstractCategoryLogger"),s=function(e){function t(t,n){return e.call(this,t,n)||this}return o(t,e),t.prototype.doLog=function(e){var t=this.createDefaultLogMessage(e);if(void 0===console)throw new Error("Console is not defined, cannot log msg: "+t);var n=!1;switch(e.getLevel()){case r.LogLevel.Trace:break;case r.LogLevel.Debug:console.debug&&(console.debug(t),n=!0);break;case r.LogLevel.Info:console.info&&(console.info(t),n=!0);break;case r.LogLevel.Warn:console.warn&&(console.warn(t),n=!0);break;case r.LogLevel.Error:case r.LogLevel.Fatal:console.error&&(console.error(t),n=!0);break;default:throw new Error("Unsupported level: "+e.getLevel())}n||console.log(t)},t}(i.AbstractCategoryLogger);n.CategoryConsoleLoggerImpl=s},{"../LoggerOptions":34,"./AbstractCategoryLogger":35}],37:[function(e,t,n){"use strict";var o=function(){function e(e){this._delegate=e}return Object.defineProperty(e.prototype,"delegate",{get:function(){return this._delegate},set:function(e){this._delegate=e},enumerable:!0,configurable:!0}),e.prototype.trace=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];(o=this._delegate).trace.apply(o,[e].concat(t));var o},e.prototype.debug=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];(o=this._delegate).debug.apply(o,[e].concat(t));var o},e.prototype.info=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];(o=this._delegate).info.apply(o,[e].concat(t));var o},e.prototype.warn=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];(o=this._delegate).warn.apply(o,[e].concat(t));var o},e.prototype.error=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];(r=this._delegate).error.apply(r,[e,t].concat(n));var r},e.prototype.fatal=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];(r=this._delegate).fatal.apply(r,[e,t].concat(n));var r},e.prototype.resolved=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];(r=this._delegate).resolved.apply(r,[e,t].concat(n));var r},e.prototype.log=function(e,t,n){for(var o=[],r=3;r<arguments.length;r++)o[r-3]=arguments[r];(i=this._delegate).log.apply(i,[e,t,n].concat(o));var i},e.prototype.tracec=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];(o=this._delegate).tracec.apply(o,[e].concat(t));var o},e.prototype.debugc=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];(o=this._delegate).debugc.apply(o,[e].concat(t));var o},e.prototype.infoc=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];(o=this._delegate).infoc.apply(o,[e].concat(t));var o},e.prototype.warnc=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];(o=this._delegate).warnc.apply(o,[e].concat(t));var o},e.prototype.errorc=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];(r=this._delegate).errorc.apply(r,[e,t].concat(n));var r},e.prototype.fatalc=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];(r=this._delegate).fatalc.apply(r,[e,t].concat(n));var r},e.prototype.resolvedc=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];(r=this._delegate).resolvedc.apply(r,[e,t].concat(n));var r},e.prototype.logc=function(e,t,n){for(var o=[],r=3;r<arguments.length;r++)o[r-3]=arguments[r];(i=this._delegate).logc.apply(i,[e,t,n].concat(o));var i},e}();n.CategoryDelegateLoggerImpl=o},{}],38:[function(e,t,n){"use strict";var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=e("../../extension/ExtensionHelper"),i=e("./AbstractCategoryLogger"),s=function(e){function t(t,n){return e.call(this,t,n)||this}return o(t,e),t.prototype.doLog=function(e){"undefined"!=typeof window?r.ExtensionHelper.sendCategoryLogMessage(e):console.log("window is not available, you must be running in a browser for this. Dropped message.")},t}(i.AbstractCategoryLogger);n.CategoryExtensionLoggerImpl=s},{"../../extension/ExtensionHelper":33,"./AbstractCategoryLogger":35}],39:[function(e,t,n){"use strict";var o=e("../LoggerOptions"),r=e("./CategoryService"),i=function(){function e(t,n){if(void 0===n&&(n=null),this._children=[],this._logLevel=o.LogLevel.Error,-1!==t.indexOf("#"))throw new Error("Cannot use # in a name of a Category");this._id=e.nextId(),this._name=t,this._parent=n,null!=this._parent&&this._parent._children.push(this),r.CategoryServiceImpl.getInstance().registerCategory(this)}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},enumerable:!0,configurable:!0}),e.prototype.getCategoryPath=function(){for(var e=this.name,t=this.parent;null!=t;)e=t.name+"#"+e,t=t.parent;return e},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),e.nextId=function(){return e.currentId++},e}();i.currentId=1,n.Category=i},{"../LoggerOptions":34,"./CategoryService":41}],40:[function(e,t,n){"use strict";var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=e("./AbstractCategoryLogger"),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.messages=[],t}return o(t,e),t.prototype.getMessages=function(){return this.messages},t.prototype.toString=function(){return this.messages.map(function(e){return e}).join("\n")},t.prototype.doLog=function(e){var t=this.createDefaultLogMessage(e);this.messages.push(t)},t}(r.AbstractCategoryLogger);n.CategoryMessageBufferLoggerImpl=i},{"./AbstractCategoryLogger":35}],41:[function(e,t,n){"use strict";var o=e("../../utils/DataStructures"),r=e("../LoggerOptions"),i=e("./CategoryConsoleLoggerImpl"),s=e("./CategoryDelegateLoggerImpl"),a=e("./CategoryExtensionLoggerImpl"),u=e("./CategoryMessageBufferImpl"),l=e("../../extension/ExtensionHelper"),c=function(){function e(e,t,n,o,i){void 0===t&&(t=r.LogLevel.Error),void 0===n&&(n=r.LoggerType.Console),void 0===o&&(o=new r.CategoryLogFormat),void 0===i&&(i=null),this._category=e,this._logLevel=t,this._loggerType=n,this._logFormat=o,this._callBackLogger=i}return Object.defineProperty(e.prototype,"category",{get:function(){return this._category},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loggerType",{get:function(){return this._loggerType},set:function(e){this._loggerType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logFormat",{get:function(){return this._logFormat},set:function(e){this._logFormat=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"callBackLogger",{get:function(){return this._callBackLogger},set:function(e){this._callBackLogger=e},enumerable:!0,configurable:!0}),e}();n.CategoryRuntimeSettings=c;var p=function(){function e(e,t,n,o){if(void 0===e&&(e=r.LogLevel.Error),void 0===t&&(t=r.LoggerType.Console),void 0===n&&(n=new r.CategoryLogFormat),void 0===o&&(o=null),this._logLevel=e,this._loggerType=t,this._logFormat=n,this._callBackLogger=o,this._loggerType===r.LoggerType.Custom&&null===this.callBackLogger)throw new Error("If you specify loggerType to be Custom, you must provide the callBackLogger argument")}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loggerType",{get:function(){return this._loggerType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logFormat",{get:function(){return this._logFormat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"callBackLogger",{get:function(){return this._callBackLogger},enumerable:!0,configurable:!0}),e.prototype.copy=function(){return new e(this.logLevel,this.loggerType,this.logFormat.copy(),this.callBackLogger)},e}();n.CategoryDefaultConfiguration=p;var h=function(){function e(){this._defaultConfig=new p,this._rootCategories=[],this._categoryRuntimeSettings=new o.SimpleMap,this._categoryOriginalRuntimeSettings=new o.SimpleMap,this._rootLoggers=new o.SimpleMap,l.ExtensionHelper.register()}return e.getInstance=function(){return null===e._INSTANCE&&(e._INSTANCE=new e),e._INSTANCE},e.prototype.getLogger=function(e){if(!this.rootCategoryExists(e))throw new Error("Given category "+e.name+" is not registered as a root category. You must use the root category to retrieve a logger.");var t=this._rootLoggers.get(e.name);if(null!=t)return t.y;var n=new s.CategoryDelegateLoggerImpl(this.createRootLogger(e));return this._rootLoggers.put(e.name,new o.TuplePair(e,n)),n},e.prototype.clear=function(){this._rootCategories=[],this._categoryRuntimeSettings.clear(),this._categoryOriginalRuntimeSettings.clear(),this._rootLoggers.clear(),this.setDefaultConfiguration(new p)},e.prototype.getCategorySettings=function(e){return this._categoryRuntimeSettings.get(e.getCategoryPath())},e.prototype.getOriginalCategorySettings=function(e){return this._categoryOriginalRuntimeSettings.get(e.getCategoryPath())},e.prototype.setDefaultConfiguration=function(e,t){var n=this;if(void 0===t&&(t=!1),this._defaultConfig=e,t){var r=new o.SimpleMap,i=new o.SimpleMap;this._categoryRuntimeSettings.keys().forEach(function(e){var t=n._categoryRuntimeSettings.get(e);if(null===t)throw new Error("No setting associated with key="+e);var o=n._defaultConfig.copy(),s=new c(t.category,o.logLevel,o.loggerType,o.logFormat,o.callBackLogger),a=n._defaultConfig.copy(),u=new c(t.category,a.logLevel,a.loggerType,a.logFormat,a.callBackLogger);r.put(e,s),i.put(e,u)}),this._categoryRuntimeSettings.clear(),this._categoryOriginalRuntimeSettings.clear(),this._categoryRuntimeSettings=r,this._categoryOriginalRuntimeSettings=i,this._rootLoggers.values().forEach(function(e){e.y.delegate=n.createRootLogger(e.x)})}},e.prototype.setConfigurationCategory=function(e,t,n,o){var r=this;void 0===n&&(n=!1),void 0===o&&(o=!1);var i=this.getCategorySettings(t);if(null===i)throw new Error("Given category is not registered: "+t.name);if(i.logLevel=e.logLevel,i.loggerType=e.loggerType,i.logFormat=e.logFormat,i.callBackLogger=e.callBackLogger,n&&t.children.forEach(function(t){r.setConfigurationCategory(e,t,n,o)}),o&&this.rootCategoryExists(t)){var s=this._rootLoggers.get(t.name);null!==s&&(s.y.delegate=this.createRootLogger(s.x))}},e.prototype.registerCategory=function(e){if(null==e||void 0===e)throw new Error("Category CANNOT be null");if(null==e.parent){for(var t=0,n=this._rootCategories;t<n.length;t++)if(n[t].name===e.name)throw new Error("Cannot add this rootCategory with name: "+e.name+", another root category is already registered with that name.");this._rootCategories.push(e)}this.initializeRuntimeSettingsForCategory(e)},e.prototype.enableExtensionIntegration=function(){var e=this;this._rootLoggers.values().forEach(function(t){t.y instanceof a.CategoryExtensionLoggerImpl||(console.log("Reconfiguring root logger for root category: "+t.x.name),t.y.delegate=new a.CategoryExtensionLoggerImpl(t.x,e))})},e.prototype.getRootCategories=function(){return this._rootCategories.slice(0)},e.prototype.getCategoryById=function(e){var t=this._categoryRuntimeSettings.values().filter(function(t){return t.category.id===e}).map(function(e){return e.category});return 1===t.length?t[0]:null},e.prototype.initializeRuntimeSettingsForCategory=function(e){var t=this._categoryRuntimeSettings.get(e.getCategoryPath());if(null!==t)throw new Error("Category with path: "+e.getCategoryPath()+" is already registered?");var n=this._defaultConfig.copy();t=new c(e,n.logLevel,n.loggerType,n.logFormat,n.callBackLogger);var o=this._defaultConfig.copy(),r=new c(e,o.logLevel,o.loggerType,o.logFormat,o.callBackLogger);this._categoryRuntimeSettings.put(e.getCategoryPath(),t),this._categoryOriginalRuntimeSettings.put(e.getCategoryPath(),r)},e.prototype.rootCategoryExists=function(e){if(null==e||void 0===e)throw new Error("Root category CANNOT be null");if(null!=e.parent)throw new Error("Parent must be null for a root category");return-1!==this._rootCategories.indexOf(e)},e.prototype.createRootLogger=function(e){switch(this._defaultConfig.loggerType){case r.LoggerType.Console:return new i.CategoryConsoleLoggerImpl(e,this);case r.LoggerType.MessageBuffer:return new u.CategoryMessageBufferLoggerImpl(e,this);case r.LoggerType.Custom:if(null==this._defaultConfig.callBackLogger)throw new Error("Cannot create custom logger, custom callback is null");return this._defaultConfig.callBackLogger(e,this);default:throw new Error("Cannot create a Logger for LoggerType: "+this._defaultConfig.loggerType)}},e}();h._INSTANCE=null,n.CategoryServiceImpl=h;var g=function(){function e(){}return e.getLogger=function(e){return h.getInstance().getLogger(e)},e.clear=function(){return h.getInstance().clear()},e.setDefaultConfiguration=function(e,t){void 0===t&&(t=!1),h.getInstance().setDefaultConfiguration(e,t)},e.setConfigurationCategory=function(e,t,n,o){void 0===n&&(n=!1),void 0===o&&(o=!1),h.getInstance().setConfigurationCategory(e,t,n,o)},e.getRuntimeSettings=function(){return h.getInstance()},e}();n.CategoryServiceFactory=g},{"../../extension/ExtensionHelper":33,"../../utils/DataStructures":48,"../LoggerOptions":34,"./CategoryConsoleLoggerImpl":36,"./CategoryDelegateLoggerImpl":37,"./CategoryExtensionLoggerImpl":38,"./CategoryMessageBufferImpl":40}],42:[function(e,t,n){"use strict";var o=e("../LoggerOptions"),r=e("../../utils/DataStructures"),i=e("../../utils/MessageUtils"),s=function(){function e(e,t,n,o,r,i,s,a){this._errorAsStack=null,this._error=null,this._loggerName=e,this._message=t,this._errorAsStack=n,this._error=o,this._logGroupRule=r,this._date=i,this._level=s,this._ready=a}return Object.defineProperty(e.prototype,"loggerName",{get:function(){return this._loggerName},enumerable:!0,configurable:!0}),
Object.defineProperty(e.prototype,"message",{get:function(){return this._message},set:function(e){this._message=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorAsStack",{get:function(){return this._errorAsStack},set:function(e){this._errorAsStack=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this._error},set:function(e){this._error=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logGroupRule",{get:function(){return this._logGroupRule},set:function(e){this._logGroupRule=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"date",{get:function(){return this._date},set:function(e){this._date=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},set:function(e){this._level=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){return this._ready},set:function(e){this._ready=e},enumerable:!0,configurable:!0}),e}(),a=function(){function e(e,t){this._allMessages=new r.LinkedList,this._open=!0,this._name=e,this._logGroupRuntimeSettings=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),e.prototype.trace=function(e,t){void 0===t&&(t=null),this._log(o.LogLevel.Trace,e,t)},e.prototype.debug=function(e,t){void 0===t&&(t=null),this._log(o.LogLevel.Debug,e,t)},e.prototype.info=function(e,t){void 0===t&&(t=null),this._log(o.LogLevel.Info,e,t)},e.prototype.warn=function(e,t){void 0===t&&(t=null),this._log(o.LogLevel.Warn,e,t)},e.prototype.error=function(e,t){void 0===t&&(t=null),this._log(o.LogLevel.Error,e,t)},e.prototype.fatal=function(e,t){void 0===t&&(t=null),this._log(o.LogLevel.Fatal,e,t)},e.prototype.tracec=function(e,t){this._logc(o.LogLevel.Trace,e,t)},e.prototype.debugc=function(e,t){this._logc(o.LogLevel.Debug,e,t)},e.prototype.infoc=function(e,t){this._logc(o.LogLevel.Info,e,t)},e.prototype.warnc=function(e,t){this._logc(o.LogLevel.Warn,e,t)},e.prototype.errorc=function(e,t){this._logc(o.LogLevel.Error,e,t)},e.prototype.fatalc=function(e,t){this._logc(o.LogLevel.Fatal,e,t)},e.prototype.isTraceEnabled=function(){return this._logGroupRuntimeSettings.level===o.LogLevel.Trace},e.prototype.isDebugEnabled=function(){return this._logGroupRuntimeSettings.level<=o.LogLevel.Debug},e.prototype.isInfoEnabled=function(){return this._logGroupRuntimeSettings.level<=o.LogLevel.Info},e.prototype.isWarnEnabled=function(){return this._logGroupRuntimeSettings.level<=o.LogLevel.Warn},e.prototype.isErrorEnabled=function(){return this._logGroupRuntimeSettings.level<=o.LogLevel.Error},e.prototype.isFatalEnabled=function(){return this._logGroupRuntimeSettings.level<=o.LogLevel.Fatal},e.prototype.getLogLevel=function(){return this._logGroupRuntimeSettings.level},e.prototype.isOpen=function(){return this._open},e.prototype.close=function(){this._open=!1,this._allMessages.clear()},e.prototype.createDefaultLogMessage=function(e){return i.MessageFormatUtils.renderDefaultLog4jMessage(e,!0)},e.prototype._log=function(e,t,n){void 0===n&&(n=null),this._open&&this._logGroupRuntimeSettings.level<=e&&(this._allMessages.addTail(this.createMessage(e,t,new Date,n)),this.processMessages())},e.prototype._logc=function(e,t,n){this._open&&this._logGroupRuntimeSettings.level<=e&&(this._allMessages.addTail(this.createMessage(e,t(),new Date,void 0!==n&&null!==n?n():null)),this.processMessages())},e.prototype.createMessage=function(e,t,n,o){var r=this;if(void 0===o&&(o=null),null!==o){var a=new s(this._name,t,null,o,this._logGroupRuntimeSettings.logGroupRule,n,e,!1);return i.MessageFormatUtils.renderError(o).then(function(e){a.errorAsStack=e,a.ready=!0,r.processMessages()}),a}return new s(this._name,t,null,o,this._logGroupRuntimeSettings.logGroupRule,n,e,!0)},e.prototype.processMessages=function(){var e=this._allMessages;if(e.getSize()>0)do{var t=e.getHead();if(null!=t){if(!t.ready)break;e.removeHead(),null!==t.message&&this.doLog(t)}}while(e.getSize()>0)},e}();n.AbstractLogger=a},{"../../utils/DataStructures":48,"../../utils/MessageUtils":50,"../LoggerOptions":34}],43:[function(e,t,n){"use strict";var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=e("./AbstractLogger"),i=e("../LoggerOptions"),s=function(e){function t(t,n){return e.call(this,t,n)||this}return o(t,e),t.prototype.doLog=function(e){if(void 0===console)throw new Error("Console is not defined, cannot log msg: "+e.message);var t=!1,n=e.level,o=this.createDefaultLogMessage(e);switch(n){case i.LogLevel.Trace:break;case i.LogLevel.Debug:console.debug&&(console.debug(o),t=!0);break;case i.LogLevel.Info:console.info&&(console.info(o),t=!0);break;case i.LogLevel.Warn:console.warn&&(console.warn(o),t=!0);break;case i.LogLevel.Error:case i.LogLevel.Fatal:console.error&&(console.error(o),t=!0);break;default:throw new Error("Log level not supported: "+n)}t||console.log(o)},t}(r.AbstractLogger);n.ConsoleLoggerImpl=s},{"../LoggerOptions":34,"./AbstractLogger":42}],44:[function(e,t,n){"use strict";var o=e("../../utils/DataStructures"),r=e("../LoggerOptions"),i=e("./LoggerFactoryService"),s=e("./ConsoleLoggerImpl"),a=e("./MessageBufferLoggerImpl"),u=e("./AbstractLogger"),l=function(){function e(e,t){this._loggers=new o.SimpleMap,this._logGroupRuntimeSettingsIndexed=[],this._loggerToLogGroupSettings=new o.SimpleMap,this._name=e,this.configure(t)}return e.prototype.configure=function(e){this._options=e,this.closeLoggers(),this._loggerToLogGroupSettings.clear(),this._logGroupRuntimeSettingsIndexed=[];for(var t=this._options.logGroupRules,n=0;n<t.length;n++)this._logGroupRuntimeSettingsIndexed.push(new i.LogGroupRuntimeSettings(t[n]))},e.prototype.getLogger=function(e){if(!this._options.enabled)throw new Error("LoggerFactory is not enabled, please check your options passed in");var t=this._loggers.get(e);return null!==t?t:(t=this.loadLogger(e),this._loggers.put(e,t),t)},e.prototype.isEnabled=function(){return this._options.enabled},e.prototype.closeLoggers=function(){this._loggers.forEach(function(e){null!=e&&e instanceof u.AbstractLogger&&e.close()}),this._loggers.clear()},e.prototype.getName=function(){return this._name},e.prototype.getLogGroupRuntimeSettingsByIndex=function(e){return e>=0&&e<this._logGroupRuntimeSettingsIndexed.length?this._logGroupRuntimeSettingsIndexed[e]:null},e.prototype.getLogGroupRuntimeSettingsByLoggerName=function(e){return this._loggerToLogGroupSettings.get(e)},e.prototype.getLogGroupRuntimeSettings=function(){return this._logGroupRuntimeSettingsIndexed.slice(0)},e.prototype.loadLogger=function(e){for(var t=this._options.logGroupRules,n=0;n<t.length;n++){var o=t[n];if(o.regExp.test(e)){var i=this._logGroupRuntimeSettingsIndexed[n],u=void 0;switch(o.loggerType){case r.LoggerType.Console:u=new s.ConsoleLoggerImpl(e,i);break;case r.LoggerType.MessageBuffer:u=new a.MessageBufferLoggerImpl(e,i);break;case r.LoggerType.Custom:if(null==o.callBackLogger)throw new Error("Cannot create a custom logger, custom callback is null");u=o.callBackLogger(e,i);break;default:throw new Error("Cannot create a Logger for LoggerType: "+o.loggerType)}return this._loggerToLogGroupSettings.put(e,i),u}}throw new Error("Failed to find a match to create a Logger for: "+e)},e}();n.LoggerFactoryImpl=l},{"../../utils/DataStructures":48,"../LoggerOptions":34,"./AbstractLogger":42,"./ConsoleLoggerImpl":43,"./LoggerFactoryService":45,"./MessageBufferLoggerImpl":46}],45:[function(e,t,n){"use strict";var o=e("../../utils/DataStructures"),r=e("../LoggerOptions"),i=e("./LoggerFactoryImpl"),s=e("../../extension/ExtensionHelper"),a=function(){function e(e,t,n,o,i){void 0===n&&(n=new r.LogFormat),void 0===o&&(o=r.LoggerType.Console),void 0===i&&(i=null),this._regExp=e,this._level=t,this._logFormat=n,this._loggerType=o,this._callBackLogger=i}return Object.defineProperty(e.prototype,"regExp",{get:function(){return this._regExp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loggerType",{get:function(){return this._loggerType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logFormat",{get:function(){return this._logFormat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"callBackLogger",{get:function(){return this._callBackLogger},enumerable:!0,configurable:!0}),e}();n.LogGroupRule=a;var u=function(){function e(){this._logGroupRules=[],this._enabled=!0}return e.prototype.addLogGroupRule=function(e){return this._logGroupRules.push(e),this},e.prototype.setEnabled=function(e){return this._enabled=e,this},Object.defineProperty(e.prototype,"logGroupRules",{get:function(){return this._logGroupRules},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},enumerable:!0,configurable:!0}),e}();n.LoggerFactoryOptions=u;var l=function(){function e(e){this._logGroupRule=e,this._level=e.level,this._loggerType=e.loggerType,this._logFormat=new r.LogFormat(new r.DateFormat(e.logFormat.dateFormat.formatEnum,e.logFormat.dateFormat.dateSeparator),e.logFormat.showTimeStamp,e.logFormat.showLoggerName),this._callBackLogger=e.callBackLogger}return Object.defineProperty(e.prototype,"logGroupRule",{get:function(){return this._logGroupRule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},set:function(e){this._level=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loggerType",{get:function(){return this._loggerType},set:function(e){this._loggerType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logFormat",{get:function(){return this._logFormat},set:function(e){this._logFormat=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"callBackLogger",{get:function(){return this._callBackLogger},set:function(e){this._callBackLogger=e},enumerable:!0,configurable:!0}),e}();n.LogGroupRuntimeSettings=l;var c=function(){function e(){this._nameCounter=1,this._mapFactories=new o.SimpleMap,s.ExtensionHelper.register()}return e.getInstance=function(){return null===e._INSTANCE&&(e._INSTANCE=new e),e._INSTANCE},e.prototype.createLoggerFactory=function(e){void 0===e&&(e=null);var t="LoggerFactory"+this._nameCounter++;return this.createNamedLoggerFactory(t,e)},e.prototype.createNamedLoggerFactory=function(t,n){if(void 0===n&&(n=null),this._mapFactories.exists(t))throw new Error("LoggerFactory with name "+t+" already exists.");var o;return o=null!==n?new i.LoggerFactoryImpl(t,n):new i.LoggerFactoryImpl(t,e.createDefaultOptions()),this._mapFactories.put(t,o),o},e.prototype.closeLoggers=function(){this._mapFactories.values().forEach(function(e){e.closeLoggers()}),this._mapFactories.clear(),this._nameCounter=1},e.prototype.getRuntimeSettingsForLoggerFactories=function(){var e=[];return this._mapFactories.forEach(function(t){null!=t&&e.push(t)}),e},e.prototype.getLogGroupSettings=function(e,t){var n=this._mapFactories.get(e);return null===n?null:n.getLogGroupRuntimeSettingsByIndex(t)},e.prototype.getLoggerFactoryRuntimeSettingsByName=function(e){return this._mapFactories.get(e)},e.createDefaultOptions=function(){return(new u).addLogGroupRule(new a(new RegExp(".+"),r.LogLevel.Info))},e}();c._INSTANCE=null;var p=function(){function e(){}return e.createLoggerFactory=function(t){return void 0===t&&(t=null),e.INSTANCE_SERVICE.createLoggerFactory(t)},e.createNamedLoggerFactory=function(t,n){return void 0===n&&(n=null),e.INSTANCE_SERVICE.createNamedLoggerFactory(t,n)},e.closeLoggers=function(){return e.INSTANCE_SERVICE.closeLoggers()},e.getRuntimeSettings=function(){return e.INSTANCE_SERVICE},e}();p.INSTANCE_SERVICE=c.getInstance(),n.LFService=p},{"../../extension/ExtensionHelper":33,"../../utils/DataStructures":48,"../LoggerOptions":34,"./LoggerFactoryImpl":44}],46:[function(e,t,n){"use strict";var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=e("./AbstractLogger"),i=function(e){function t(t,n){var o=e.call(this,t,n)||this;return o.messages=[],o}return o(t,e),t.prototype.close=function(){this.messages=[],e.prototype.close.call(this)},t.prototype.getMessages=function(){return this.messages},t.prototype.toString=function(){return this.messages.map(function(e){return e}).join("\n")},t.prototype.doLog=function(e){this.messages.push(this.createDefaultLogMessage(e))},t}(r.AbstractLogger);n.MessageBufferLoggerImpl=i},{"./AbstractLogger":42}],47:[function(e,t,n){"use strict";function o(){console.log("help()\n   ** Shows this help\n   \n getLogControl(): LoggerControl\n   ** Returns LoggerControl Object, use to dynamically change loglevels for log4j logging.\n   ** Call .help() on LoggerControl object for available options.\n   \n getCategoryControl(): CategoryServiceControl\n   ** Returns CategoryServiceControl Object, use to dynamically change loglevels for category logging.\n   ** Call .help() on CategoryServiceControl object for available options.   \n")}function r(){return new s.LoggerControlImpl}function i(){return new a.CategoryServiceControlImpl}var s=e("./control/LogGroupControl"),a=e("./control/CategoryServiceControl"),u=e("./extension/ExtensionHelper");n.ExtensionHelper=u.ExtensionHelper;var l=e("./log/category/AbstractCategoryLogger");n.AbstractCategoryLogger=l.AbstractCategoryLogger;var c=e("./log/category/CategoryConsoleLoggerImpl");n.CategoryConsoleLoggerImpl=c.CategoryConsoleLoggerImpl;var p=e("./log/category/CategoryDelegateLoggerImpl");n.CategoryDelegateLoggerImpl=p.CategoryDelegateLoggerImpl;var h=e("./log/category/CategoryLogger");n.Category=h.Category;var g=e("./log/category/CategoryMessageBufferImpl");n.CategoryMessageBufferLoggerImpl=g.CategoryMessageBufferLoggerImpl;var f=e("./log/category/CategoryService");n.CategoryDefaultConfiguration=f.CategoryDefaultConfiguration,n.CategoryRuntimeSettings=f.CategoryRuntimeSettings,n.CategoryServiceFactory=f.CategoryServiceFactory;var d=e("./log/standard/LoggerFactoryService");n.LoggerFactoryOptions=d.LoggerFactoryOptions,n.LFService=d.LFService,n.LogGroupRule=d.LogGroupRule;var y=e("./log/standard/AbstractLogger");n.AbstractLogger=y.AbstractLogger;var v=e("./log/standard/ConsoleLoggerImpl");n.ConsoleLoggerImpl=v.ConsoleLoggerImpl;var m=e("./log/standard/MessageBufferLoggerImpl");n.MessageBufferLoggerImpl=m.MessageBufferLoggerImpl;var _=e("./log/LoggerOptions");n.CategoryLogFormat=_.CategoryLogFormat,n.DateFormat=_.DateFormat,n.DateFormatEnum=_.DateFormatEnum,n.LogFormat=_.LogFormat,n.LoggerType=_.LoggerType,n.LogLevel=_.LogLevel;var L=e("./utils/DataStructures");n.SimpleMap=L.SimpleMap,n.LinkedList=L.LinkedList,function(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}(e("./utils/JSONHelper"));var w=e("./utils/MessageUtils");n.MessageFormatUtils=w.MessageFormatUtils,n.help=o,n.getLogControl=r,n.getCategoryControl=i},{"./control/CategoryServiceControl":31,"./control/LogGroupControl":32,"./extension/ExtensionHelper":33,"./log/LoggerOptions":34,"./log/category/AbstractCategoryLogger":35,"./log/category/CategoryConsoleLoggerImpl":36,"./log/category/CategoryDelegateLoggerImpl":37,"./log/category/CategoryLogger":39,"./log/category/CategoryMessageBufferImpl":40,"./log/category/CategoryService":41,"./log/standard/AbstractLogger":42,"./log/standard/ConsoleLoggerImpl":43,"./log/standard/LoggerFactoryService":45,"./log/standard/MessageBufferLoggerImpl":46,"./utils/DataStructures":48,"./utils/JSONHelper":49,"./utils/MessageUtils":50}],48:[function(e,t,n){"use strict";var o=function(){function e(e){this._previous=null,this._next=null,this._value=e}return Object.defineProperty(e.prototype,"previous",{get:function(){return this._previous},set:function(e){this._previous=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"next",{get:function(){return this._next},set:function(e){this._next=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),e}(),r=function(){function e(){this.head=null,this.size=0}return e.prototype.addHead=function(e){if(!this.createHeadIfNeeded(e)){if(null==this.head)throw new Error("This should never happen, list implementation broken");var t=this.head.next,n=new o(e);null!=t&&(t.previous=n,n.next=t),this.head=n}this.size++},e.prototype.addTail=function(e){if(!this.createHeadIfNeeded(e)){var t=this.getTailNode();if(null==t)throw new Error("List implementation broken");var n=new o(e);t.next=n,n.previous=t}this.size++},e.prototype.clear=function(){this.head=null,this.size=0},e.prototype.getHead=function(){return null!=this.head?this.head.value:null},e.prototype.removeHead=function(){if(null!=this.head){var e=this.head,t=e.value;return this.head=e.next,this.size--,t}return null},e.prototype.getTail=function(){var e=this.getTailNode();return null!=e?e.value:null},e.prototype.removeTail=function(){var e=this.getTailNode();if(null!=e){if(e===this.head)this.head=null;else{var t=e.previous;if(null==t)throw new Error("List implementation is broken");t.next=null}return this.size--,e.value}return null},e.prototype.getSize=function(){return this.size},e.prototype.filter=function(e){var t=function(e,n,o){e(n.value)&&o.push(n.value);var r=n.next;null!=r&&t(e,r,o)},n=[],o=this.head;return null!=o&&t(e,o,n),n},e.prototype.createHeadIfNeeded=function(e){return null==this.head&&(this.head=new o(e),!0)},e.prototype.getTailNode=function(){if(null==this.head)return null;for(var e=this.head;null!=e.next;)e=e.next;return e},e}();n.LinkedList=r;var i=function(){function e(){this.array={}}return e.prototype.put=function(e,t){if(void 0===t)throw new Error("Undefined value is not allowed, null is.");this.array[e]=t},e.prototype.get=function(e){var t=this.array[e];return void 0!==t?t:null},e.prototype.exists=function(e){return void 0!==this.array[e]},e.prototype.remove=function(e){var t=this.array[e];return void 0!==t&&delete this.array[e],t},e.prototype.keys=function(){var e=[];for(var t in this.array)this.array.hasOwnProperty(t)&&e.push(t);return e},e.prototype.values=function(){var e=[];for(var t in this.array)this.array.hasOwnProperty(t)&&e.push(this.get(t));return e},e.prototype.size=function(){return this.keys().length},e.prototype.isEmpty=function(){return 0===this.size()},e.prototype.clear=function(){this.array={}},e.prototype.forEach=function(e){for(var t in this.array)if(this.array.hasOwnProperty(t)){var n=this.array[t];e(n,t,this)}},e}();n.SimpleMap=i;var s=function(){function e(e,t){this._x=e,this._y=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e},enumerable:!0,configurable:!0}),e}();n.TuplePair=s;var a=function(){function e(){this.data=[]}return e.prototype.append=function(e){if(void 0===e||null==e)throw new Error("String must be set, cannot append null or undefined");return this.data.push(e),this},e.prototype.appendLine=function(e){return this.data.push(e+"\n"),this},e.prototype.isEmpty=function(){return 0===this.data.length},e.prototype.clear=function(){this.data=[]},e.prototype.toString=function(e){return void 0===e&&(e=""),this.data.join(e)},e}();n.StringBuilder=a},{}],49:[function(e,t,n){"use strict";var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=e("../log/LoggerOptions"),i=e("./DataStructures"),s=function(){function e(e){this._value=e}return e.prototype.getValue=function(){return this._value},e.prototype.toString=function(){var e=this.getValue();return null!=e?e.toString():"null"},e}(),a=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t}(s),u=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t}(s),l=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.toString=function(){var e=this.getValue();return null!=e?JSON.stringify(e.toString()):"null"},t}(s),c=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t}(s),p=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.toString=function(){var e=this.getValue();return null!=e?e.toString():"null"},t}(s),h=function(e){function t(){return e.call(this,null)||this}return o(t,e),t.prototype.toString=function(){return"null"},t}(s),g=function(){function e(){}return e.toJSONType=function(e){if(null===e)return new h;if("string"==typeof e)return new l(e);if("number"==typeof e)return new u(e);if("boolean"==typeof e)return new a(e);if(e instanceof f)return new c(e);throw new Error("Type not supported for value: "+e)},e}(),f=function(){function e(){this.values=new i.SimpleMap}return e.prototype.addBoolean=function(t,n){return this.checkName(t),e.checkValue(n),this.values.put(t,new a(n)),this},e.prototype.addNumber=function(t,n){return this.checkName(t),e.checkValue(n),this.values.put(t,new u(n)),this},e.prototype.addString=function(t,n){return this.checkName(t),e.checkValue(n),this.values.put(t,new l(n)),this},e.prototype.addNull=function(e){return this.checkName(e),this.values.put(e,new h),this},e.prototype.addArray=function(t,n){if(this.checkName(t),e.checkValue(n),null==n)throw new Error("Cannot add array as null");return this.values.put(t,new p(n)),this},e.prototype.addObject=function(t,n){if(this.checkName(t),e.checkValue(n),null==n)throw new Error("Cannot add object as null");return this.values.put(t,new c(n)),this},e.prototype.toString=function(e){var t=this;void 0===e&&(e=!1);var n=!1,o=new i.StringBuilder;return o.append("{"),this.values.keys().forEach(function(e){var r=t.values.get(e);null!=r&&(n&&o.append(","),o.append('"').append(e).append('":').append(r.toString()),n=!0)}),o.append("}"),o.toString()},e.prototype.checkName=function(e){if(null==e||void 0===e)throw new Error("Name is null or undefined");if(this.values.exists(e))throw new Error("Name "+e+" is already present for this object")},e.checkValue=function(e){if(void 0===e)throw new Error("Value is undefined")},e}();n.JSONObject=f;var d=function(){function e(){this.objects=[]}return e.prototype.add=function(e){if(void 0===e)throw new Error("Object is not allowed to be undefined");return this.objects.push(g.toJSONType(e)),this},e.prototype.toString=function(e){void 0===e&&(e=!1);var t=new i.StringBuilder;return t.append("["),this.objects.forEach(function(e,n){n>0&&t.append(","),t.append(e.toString())}),t.append("]"),t.toString()},e}();n.JSONArray=d;var y=function(){function e(){}return e.categoryToJSON=function(t,n){var o=new d;e._categoryToJSON(t,o,n);var r=new f;return r.addArray("categories",o),r},e._categoryToJSON=function(t,n,o){var i=new f;i.addNumber("id",t.id),i.addString("name",t.name),i.addString("logLevel",r.LogLevel[t.logLevel].toString()),null!=t.parent?i.addNumber("parent",t.parent.id):i.addNull("parent"),n.add(i),o&&t.children.forEach(function(t){e._categoryToJSON(t,n,o)})},e}();n.JSONHelper=y},{"../log/LoggerOptions":34,"./DataStructures":48}],50:[function(e,t,n){"use strict";var o=e("stacktrace-js"),r=e("../log/LoggerOptions"),i=function(){function e(){}return e.renderDate=function(e,t){var n=function(e,t,n){var o=t-e.length;if(o>0){for(var r="",i=0;i<o;i++)r+=n;return r+=e}return e},o=function(e){return n(e.getFullYear().toString(),4,"0")},i=function(e){return n((e.getMonth()+1).toString(),2,"0")},s=function(e){return n(e.getDate().toString(),2,"0")},a=function(e){return n(e.getHours().toString(),2,"0")},u=function(e){return n(e.getMinutes().toString(),2,"0")},l=function(e){return n(e.getSeconds().toString(),2,"0")},c=function(e){return n(e.getMilliseconds().toString(),3,"0")},p=t.dateSeparator,h="";switch(t.formatEnum){case r.DateFormatEnum.Default:h=o(e)+p+i(e)+p+s(e)+" "+a(e)+":"+u(e)+":"+l(e)+","+c(e);break;case r.DateFormatEnum.YearMonthDayTime:h=o(e)+p+i(e)+p+s(e)+" "+a(e)+":"+u(e)+":"+l(e);break;case r.DateFormatEnum.YearDayMonthWithFullTime:h=o(e)+p+s(e)+p+i(e)+" "+a(e)+":"+u(e)+":"+l(e)+","+c(e);break;case r.DateFormatEnum.YearDayMonthTime:h=o(e)+p+s(e)+p+i(e)+" "+a(e)+":"+u(e)+":"+l(e);break;default:throw new Error("Unsupported date format enum: "+t.formatEnum)}return h},e.renderDefaultMessage=function(t,n){var o="",i=t.getLogFormat();return i.showTimeStamp&&(o+=e.renderDate(t.getDate(),i.dateFormat)+" "),o+=r.LogLevel[t.getLevel()].toUpperCase(),t.isResolvedErrorMessage()&&(o+=" (resolved)"),o+=" ",i.showCategoryName&&(o+="[",t.getCategories().forEach(function(e,t){t>0&&(o+=", "),o+=e.name}),o+="]"),o+=" "+t.getMessage(),n&&null!==t.getErrorAsStack()&&(o+="\n"+t.getErrorAsStack()),o},e.renderDefaultLog4jMessage=function(t,n){var o=t.logGroupRule.logFormat,i="";return o.showTimeStamp&&(i+=e.renderDate(t.date,o.dateFormat)+" "),i+=r.LogLevel[t.level].toUpperCase()+" ",o.showLoggerName&&(i+="["+t.loggerName+"]"),i+=" "+t.message,n&&null!==t.errorAsStack&&(i+="\n"+t.errorAsStack),i},e.renderError=function(e){var t=e.name+": "+e.message+"\n@";return new Promise(function(n){o.fromError(e,{offline:!0}).then(function(e){var o=e.map(function(e){return e.toString()}).join("\n  ");t+="\n"+o,n(t)})})},e}();n.MessageFormatUtils=i},{"../log/LoggerOptions":34,"stacktrace-js":14}],51:[function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=e("../logging/ConfigLog4j"),i=e("./Board"),s=(r.factory.getLogger("model.ActiveBoard"),function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.addPieceToActiveBoard=function(e){this.board.setValue(e.uniqueId,e.index)},t.prototype.removePieceFromActiveBoard=function(e){this.board.remove(e.uniqueId)},t.prototype.movement=function(e,t){"eom"===e?(this.board.setValue(t.uniqueId,t.index),this.signal.dispatch("rom",t)):"backToHome"===e&&this.board.remove(t.uniqueId)},t.prototype.containsInActiveBoard=function(e){return this.board.containsKey(e.uniqueId)},t}(i.Board));n.ActiveBoard=s},{"../logging/ConfigLog4j":67,"./Board":52}],52:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("typescript-collections"),r=e("../logging/ConfigLog4j"),i=(r.factory.getLogger("model.Board"),function(){function e(e){this.signal=e,this.board=new o.Dictionary,this.signal.add(this.movement,this,0,"eom")}return e}());n.Board=i},{"../logging/ConfigLog4j":67,"typescript-collections":29}],53:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Die"),r=e("../logging/ConfigLog4j"),i=r.factory.getLogger("model.Dice"),s=function(){function e(e,t,n,r,i){this.dieOne=new o.Die(e,330,390,t,r,n),this.dieTwo=new o.Die(e,390,330,t,i,n),this.signal=n}return e.prototype.roll=function(e,t,n){this.dieOne.roll(e,t),this.dieTwo.roll(e,n)},e.prototype.getHigherDieValue=function(){return this.dieOne.getValue()>this.dieTwo.getValue()?this.dieOne.uniqueId:this.dieTwo.uniqueId},e.prototype.setDicePlayerId=function(e){this.dieOne.setPlayerId(e),this.dieTwo.setPlayerId(e)},e.prototype.getDieByValue=function(e){return this.dieOne.getValue()===e?this.dieOne.uniqueId:this.dieTwo.getValue()===e?this.dieTwo.uniqueId:null},e.prototype.getDieValueByUniqueId=function(e){for(var t=[],n=e.split("#"),o=0,r=n;o<r.length;o++){var i=r[o];if(i===this.dieOne.uniqueId){t.push(this.dieOne.getValue());break}}for(var s=0,a=n;s<a.length;s++){var i=a[s];if(i===this.dieTwo.uniqueId){t.push(this.dieTwo.getValue());break}}return t},e.prototype.getSelectedDiceUniqueIds=function(){var e=[];return this.dieOne.isSelected()&&e.push(this.dieOne.uniqueId),this.dieTwo.isSelected()&&e.push(this.dieTwo.uniqueId),e},e.prototype.consumeDieValueSix=function(e){var t=e.split("#");i.debug("Show me: "+t.join());for(var n=0,o=t;n<o.length;n++){var r=o[n];if(r===this.dieOne.uniqueId&&this.dieOne.equalsValueSix()){this.dieOne.consume();break}if(r===this.dieTwo.uniqueId&&this.dieTwo.equalsValueSix()){this.dieTwo.consume();break}}},e}();n.Dice=s},{"../logging/ConfigLog4j":67,"./Die":54}],54:[function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=e("../logging/ConfigLog4j"),i=r.factory.getLogger("model.Die"),s=function(e){function t(t,n,o,r,i,s){var a=e.call(this,t,n,o,r)||this;a.pixels=[],a.diceArr=[5,1,6,2,0,4],a.extFrame=null,a.uniqueId=i,a.signal=s,a.playerId=null,a.group=a.game.add.group(),a.group.add(a),a.frame=1,a.anchor.setTo(.5,.5),a.inputEnabled=!0;for(var u=0;u<15;u++)a.pixels[u]=a.game.rnd.pick([0,1,2,4,5,6]);return a.animation=a.animations.add("roll",a.pixels),a.animation.onComplete.add(a.rollComplete,a),a.events.onInputDown.add(a.selectActiveDie,a),a}return o(t,e),t.prototype.selectActiveDie=function(){.5===this.alpha?this.alpha=1:this.alpha=.5},t.prototype.isSelected=function(){return.5===this.alpha},t.prototype.rollComplete=function(){var e=Math.floor(6*Math.random());this.frame=this.diceArr[e],null!==this.extFrame&&(this.frame=this.extFrame,this.extFrame=null),this.signal.dispatch("endOfDieRoll")},t.prototype.roll=function(e,t){this.playerId===e?this.animation.play(20):i.debug("Dice PlayerId "+this.playerId+" does not match playerId: "+e),void 0!==t&&(this.extFrame=this.getFrame(t))},t.prototype.consume=function(){this.frame=8},t.prototype.isConsume=function(){return 1===this.frame},t.prototype.setPlayerId=function(e){this.playerId=e},t.prototype.getPlayerId=function(){return this.playerId},t.prototype.equalsValueSix=function(){return 6===this.getValue()},t.prototype.getFrame=function(e){switch(e){case 1:return 1;case 2:return 2;case 3:return 5;case 4:return 6;case 5:return 4;case 6:return 0;default:return 8}},t.prototype.getValue=function(){switch(this.frame){case 0:return 6;case 1:return 1;case 2:return 2;case 4:return 5;case 5:return 3;case 6:return 4;default:return 0}},t}(Phaser.Sprite);n.Die=s},{"../logging/ConfigLog4j":67}],55:[function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=e("../logging/ConfigLog4j"),i=e("./Board"),s=r.factory.getLogger("model.HomeBoard"),a=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.addPieceToHomeBoard=function(e){this.board.setValue(e.uniqueId,e.index)},t.prototype.removePieceFromHomeBoard=function(e){this.board.remove(e.uniqueId)},t.prototype.movement=function(e,t){"rom"===e?this.board.containsKey(t.uniqueId)&&(this.board.remove(t.uniqueId),s.debug("From Listener: "+e+" I am removing <"+t.uniqueId+" "+t.index+"> from homeboard: New size: "+this.board.size())):"backToHome"===e&&(this.board.setValue(t.uniqueId,t.index),s.debug("From Listener: "+e+" I am adding <"+t.uniqueId+" "+t.index+"> to homeboard: New Size "+this.board.size()))},t.prototype.containsInHomeBoard=function(e){
return this.board.containsKey(e.uniqueId)},t}(i.Board);n.HomeBoard=a},{"../logging/ConfigLog4j":67,"./Board":52}],56:[function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=e("../logging/ConfigLog4j"),i=e("./Board"),s=(r.factory.getLogger("model.OnWayOutBoard"),function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.addPieceToOnWayOutBoard=function(e){this.board.setValue(e.uniqueId,e.index)},t.prototype.removePieceFromOnWayOutBoard=function(e){this.board.remove(e.uniqueId)},t.prototype.movement=function(e,t){"exit"===e&&this.board.remove(t.uniqueId)},t.prototype.containsInActiveBoard=function(e){return this.board.containsKey(e.uniqueId)},t}(i.Board));n.OnWayOutBoard=s},{"../logging/ConfigLog4j":67,"./Board":52}],57:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../enums/MoveStatus"),r=function(){function e(){this.x=new Array,this.y=new Array,this.moveStatus=o.MoveStatus.ShouldContinue,this.moveRemainder=0,this.newIndex=-1}return e.prototype.setPath=function(e,t){this.x=e,this.y=t},e.prototype.isEmpty=function(){return this.x.length<1||this.y.length<1},e}();n.Path=r},{"../enums/MoveStatus":65}],58:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../enums/ColorType"),r=e("../enums/MoveStatus"),i=e("../logging/ConfigLog4j"),s=i.factory.getLogger("model.Paths.ActivePath"),a=i.factory.getLogger("model.Paths.OnWayOutPaths"),u=e("./PiecePosition"),l=function(){function e(){this.x=[0,48,96,144,192,240,288,288,288,288,288,288,336,384,384,384,384,384,384,432,480,528,576,624,672,672,672,624,576,528,480,432,384,384,384,384,384,384,336,288,288,288,288,288,288,240,192,144,96,48,0,0,0],this.y=[288,288,288,288,288,288,237,189.6,142.2,94.8,47.4,0,0,0,48,95,142.5,190,237.5,288,288,288,288,288,288,336,384,384,384,384,384,384,432,480,528,576,624,672,672,672,624,576,528,480,432,384,384,384,384,384,384,336,285]}return e.prototype.getPath=function(e,t,n){e.isAtHome()&&(n.x.push(e.startPosition.x),n.y.push(e.startPosition.y),e.setActive(),n.newIndex=e.startIndex);var o=e.entryIndex,i=e.index+1;e.isAtEntryPoint()&&(i=e.index);for(var a=i;a<t+1;a++)if(a<52){if(a===o){n.x.push(this.x[a]),n.y.push(this.y[a]);var u=t%o;n.moveRemainder=u,n.newIndex=o,n.moveStatus=r.MoveStatus.ShouldBeExiting,s.debug("i === entryPoint "+o+" time to enter entry with "+n.moveRemainder);break}n.x.push(this.x[a]),n.y.push(this.y[a]),n.newIndex=a}else if(a>51){for(var u=t%51,l=0;l<u;l++)n.x.push(this.x[l]),n.y.push(this.y[l]);n.newIndex=u-1;break}return n},e.prototype.getPiecePostionByIndex=function(e){if(e>51){var t=e%51;return new u.PiecePosition(this.x[t],this.y[t])}return new u.PiecePosition(this.x[e],this.y[e])},e}();n.ActivePath=l;var c=function(){function e(){this.red_x=[48,96,144,192,240,288],this.red_y=[336,336,336,336,336,336],this.blue_x=[336,336,336,336,336,336],this.blue_y=[48,96,144,192,240,288],this.yellow_x=[624,576,528,480,432,384],this.yellow_y=[336,336,336,336,336,336],this.green_x=[336,336,336,336,336,336],this.green_y=[624,572,528,480,432,384]}return e.prototype.getPath=function(e,t,n,o){var r;r=this.getPiecePath(e);var i=r[0],s=r[1];if(e.isActive())if(n>6)a.debug("to "+n+" is greater than six! Something went wrong!!!");else{for(var u=t;u<n;u++)o.x.push(i[u]),o.y.push(s[u]);o.newIndex=n-1,e.setOnWayOut()}else if(e.isOnWayOut())if(n>5)a.debug("to "+n+" is greater than five! Something went wrong!!!");else{for(var u=t;u<n+1;u++)o.x.push(i[u]),o.y.push(s[u]);o.newIndex=n}return o},e.prototype.getPiecePostionByIndex=function(e,t){var n;n=this.getPiecePath(e);var o=n[0],r=n[1];return t>6?void a.debug("Error!!! Index cannot be greater than six"):new u.PiecePosition(o[t],r[t])},e.prototype.getPiecePath=function(e){var t;switch(e.color){case o.ColorType.Red:t=[this.red_x,this.red_y];break;case o.ColorType.Blue:t=[this.blue_x,this.blue_y];break;case o.ColorType.Yellow:t=[this.yellow_x,this.yellow_y];break;case o.ColorType.Green:t=[this.green_x,this.green_y]}return t},e}();n.OnWayOutPaths=c},{"../enums/ColorType":64,"../enums/MoveStatus":65,"../logging/ConfigLog4j":67,"./PiecePosition":61}],59:[function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=e("../enums/ColorType"),i=e("../enums/States"),s=e("../movement/Movement"),a=e("../entities/PiecePosition"),u=e("../logging/ConfigLog4j"),l=u.factory.getLogger("model.Piece"),c=function(e){function t(t,n,o,r,u,l,c,p,h){var g=e.call(this,t,n,o,r)||this;return g.color=u,g.playerId=l,g.uniqueId=c,g.startPosition=p,g.homePosition=new a.PiecePosition(n,o),g.game.physics.enable(g,Phaser.Physics.ARCADE),g.frame=0,g.index=-1,g.entryIndex=g.getEntryIndex(),g.startIndex=g.getStartIndex(u),g.state=i.States.AtHome,g.group=g.game.add.group(),g.group.add(g),g.signal=h,g.scale.x=1.1,g.scale.y=1.1,g.anchor.x=-.07,g.anchor.y=-.07,g.inputEnabled=!0,g.movement=new s.PieceMovement,g.speedConstant=72e3,g.events.onInputDown.add(g.setActivePiece,g),g}return o(t,e),t.prototype.movePiece=function(e){if(this.isOnWayOut()){var t=this.movement.constructOnWayOutPath(this,this.index,e);if(t.isEmpty())l.debug("On Way out Path is empty! Nothing to do...");else{this.index=t.newIndex,this.signal.dispatch("eom",this),this.game.world.bringToTop(this.group);var n=this.getSpeed(t.x.length);this.movePieceTo(t,n)}}else{var t=this.movement.constructActivePath(this,e);if(t.isEmpty())l.debug("Path is empty! Nothing to do...");else{this.index=t.newIndex,this.signal.dispatch("eom",this),this.game.world.bringToTop(this.group);var n=this.getSpeed(t.x.length);this.movePieceTo(t,n)}}},t.prototype.onCompleteMovementBackToHome=function(){l.debug("My index is "+this.index+" my state is "+this.getState())},t.prototype.moveToHome=function(){var e=this.movement.constructOnWayOutPath(this,this.index,this.index);e.isEmpty?l.debug("Path is empty."):(this.signal.dispatch("backToHome",this),this.index=e.newIndex,this.game.world.bringToTop(this.group),this.game.add.tween(this).to({x:e.x,y:e.y},6e3,Phaser.Easing.Linear.None,!0))},t.prototype.getSpeed=function(e){return Math.floor(this.speedConstant/e)},t.prototype.isAtHome=function(){return this.state===i.States.AtHome},t.prototype.isActive=function(){return this.state===i.States.Active},t.prototype.isOnWayOut=function(){return this.state===i.States.onWayOut},t.prototype.isExited=function(){return this.state===i.States.Exited},t.prototype.setAtHome=function(){this.state=i.States.AtHome},t.prototype.setActive=function(){this.state=i.States.Active},t.prototype.setExited=function(){this.state=i.States.Exited},t.prototype.setOnWayOut=function(){this.state=i.States.onWayOut},t.prototype.isAtEntryPoint=function(){return this.index===this.entryIndex},t.prototype.setActivePiece=function(){this.signal.dispatch("select",this.uniqueId,this.playerId)},t.prototype.unsetActivePiece=function(){this.signal.dispatch("unselect",this.uniqueId,this.playerId),this.frame=0},t.prototype.select=function(){this.frame=1},t.prototype.unselect=function(){this.frame=0},t.prototype.ifYouAre=function(e){return e===this.color},t.prototype.getEntryIndex=function(){switch(this.color){case r.ColorType.Red:return 51;case r.ColorType.Blue:return 12;case r.ColorType.Yellow:return 25;case r.ColorType.Green:return 38;default:return-1}},t.prototype.getColor=function(){switch(this.color){case r.ColorType.Red:return"RED";case r.ColorType.Blue:return"BLUE";case r.ColorType.Yellow:return"YELLOW";case r.ColorType.Green:return"GREEN";default:return""}},t.prototype.getState=function(){switch(this.state){case i.States.Active:return"ACTIVE";case i.States.AtHome:return"AT HOME";case i.States.Exited:return"EXITED";case i.States.onWayOut:return"ON WAY OUT";default:return""}},t.prototype.setParameters=function(e,t,n,o){this.x=e,this.y=t,this.state=o,this.index=n},t.prototype.movePieceTo=function(e,t){this.game.add.tween(this).to(e,1e3,Phaser.Easing.Linear.None,!0).interpolation(function(e,t){return Phaser.Math.linearInterpolation(e,t)}).onComplete.add(this.onCompleteMovementBackToHome,this)},t.prototype.getStartIndex=function(e){switch(e){case r.ColorType.Red:return 1;case r.ColorType.Blue:return 14;case r.ColorType.Yellow:return 27;case r.ColorType.Green:return 40;default:return 0}},t}(Phaser.Sprite);n.Piece=c},{"../entities/PiecePosition":61,"../enums/ColorType":64,"../enums/States":66,"../logging/ConfigLog4j":67,"../movement/Movement":69}],60:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../entities/Piece"),r=e("../enums/ColorType"),i=e("../entities/PiecePosition"),s=e("angular2-uuid"),a=function(){function e(e){this.game=e}return e.prototype.createNewPieces=function(e,t,n){var r=this.getImageKey(e);if("red_piece"===r){var a=new i.PiecePosition(49,287);return[new o.Piece(this.game,118,72,r,e,t,s.UUID.UUID(),a,n),new o.Piece(this.game,72,118,r,e,t,s.UUID.UUID(),a,n),new o.Piece(this.game,168,118,r,e,t,s.UUID.UUID(),a,n),new o.Piece(this.game,120,168,r,e,t,s.UUID.UUID(),a,n)]}if("blue_piece"===r){var a=new i.PiecePosition(384,48);return[new o.Piece(this.game,552,72,r,e,t,s.UUID.UUID(),a,n),new o.Piece(this.game,503,118,r,e,t,s.UUID.UUID(),a,n),new o.Piece(this.game,600,118,r,e,t,s.UUID.UUID(),a,n),new o.Piece(this.game,552,168,r,e,t,s.UUID.UUID(),a,n)]}if("yellow_piece"===r){var a=new i.PiecePosition(624,385);return[new o.Piece(this.game,552,503,r,e,t,s.UUID.UUID(),a,n),new o.Piece(this.game,503,552,r,e,t,s.UUID.UUID(),a,n),new o.Piece(this.game,600,552,r,e,t,s.UUID.UUID(),a,n),new o.Piece(this.game,552,600,r,e,t,s.UUID.UUID(),a,n)]}if("green_piece"===r){var a=new i.PiecePosition(287,622);return[new o.Piece(this.game,118,503,r,e,t,s.UUID.UUID(),a,n),new o.Piece(this.game,72,552,r,e,t,s.UUID.UUID(),a,n),new o.Piece(this.game,168,552,r,e,t,s.UUID.UUID(),a,n),new o.Piece(this.game,118,600,r,e,t,s.UUID.UUID(),a,n)]}return[]},e.prototype.createExistingPiece=function(){},e.prototype.getImageKey=function(e){switch(e){case r.ColorType.Red:return"red_piece";case r.ColorType.Blue:return"blue_piece";case r.ColorType.Green:return"green_piece";case r.ColorType.Yellow:return"yellow_piece";default:return"undefined"}},e}();n.PieceFactory=a},{"../entities/Piece":59,"../entities/PiecePosition":61,"../enums/ColorType":64,"angular2-uuid":1}],61:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){this.x=e,this.y=t}return e}();n.PiecePosition=o},{}],62:[function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=e("../entities/PieceFactory"),i=e("../logging/ConfigLog4j"),s=(i.factory.getLogger("model.Player"),function(e){function t(t,n,o,r,i,s){var a=e.call(this,t)||this;a.pieces=[],a.name=n,a.playerId=o,a.turn=r,a.pieces=new Array,a.signal=s,a.signal.add(a.selectCurrentPiece,a,0,"select"),a.currentPiece=null;for(var u=0;u<i.length;u++)for(var l=a.createNewPieces(i[u],o,a.signal),c=0,p=l;c<p.length;c++){var h=p[c];a.pieces.push(h)}return a}return o(t,e),t.prototype.roll=function(e,t,n){e.roll(this.playerId,t,n)},t.prototype.getActivePieces=function(e){for(var t=[],n=0,o=this.pieces;n<o.length;n++){var r=o[n];void 0!==e.board.getValue(r.uniqueId)&&r.isActive()&&t.push(r)}return t},t.prototype.getHomePieces=function(e){for(var t=[],n=0,o=this.pieces;n<o.length;n++){var r=o[n];void 0!==e.board.getValue(r.uniqueId)&&r.isAtHome()&&t.push(r)}return t},t.prototype.getOnWayOutPieces=function(e){for(var t=[],n=0,o=this.pieces;n<o.length;n++){var r=o[n];void 0!==e.board.getValue(r.uniqueId)&&r.isOnWayOut()&&t.push(r)}return t},t.prototype.selectAllPiece=function(){for(var e=0,t=this.pieces;e<t.length;e++){t[e].alpha=1}},t.prototype.unselectAllPiece=function(){for(var e=0,t=this.pieces;e<t.length;e++){t[e].alpha=.5}},t.prototype.selectCurrentPiece=function(e,t,n){if(this.playerId===n&&"select"===e)for(var o=0,r=this.pieces;o<r.length;o++){var i=r[o];i.uniqueId===t?(i.select(),this.currentPiece=i):i.unselect()}},t}(r.PieceFactory));n.Player=s},{"../entities/PieceFactory":60,"../logging/ConfigLog4j":67}],63:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});!function(e){e[e.PLAY=0]="PLAY",e[e.ROLL=1]="ROLL",e[e.SKIP=2]="SKIP",e[e.DO_NOTHING=3]="DO_NOTHING",e[e.EXIT=4]="EXIT"}(n.Actions||(n.Actions={}))},{}],64:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});!function(e){e[e.Red=0]="Red",e[e.Blue=1]="Blue",e[e.Green=2]="Green",e[e.Yellow=3]="Yellow"}(n.ColorType||(n.ColorType={}))},{}],65:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});!function(e){e[e.ShouldContinue=0]="ShouldContinue",e[e.IsRoundRobin=1]="IsRoundRobin",e[e.ShouldBeExiting=2]="ShouldBeExiting"}(n.MoveStatus||(n.MoveStatus={}))},{}],66:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});!function(e){e[e.AtHome=0]="AtHome",e[e.Active=1]="Active",e[e.onWayOut=2]="onWayOut",e[e.Exited=3]="Exited"}(n.States||(n.States={}))},{}],67:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("typescript-logging"),r=(new o.LoggerFactoryOptions).addLogGroupRule(new o.LogGroupRule(new RegExp("model.+"),o.LogLevel.Debug)).addLogGroupRule(new o.LogGroupRule(new RegExp(".+"),o.LogLevel.Info));n.factory=o.LFService.createNamedLoggerFactory("LoggerFactory",r)},{"typescript-logging":47}],68:[function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=e("./states/Preloader"),i=e("./states/Game"),s=function(e){function t(){var t=e.call(this,900,720,Phaser.AUTO,"gameContainer")||this;return t.state.add("Preloader",r.Preloader,!1),t.state.add("Game",i.Game,!1),t.state.start("Preloader"),t}return o(t,e),t}(Phaser.Game);n.LudoGame=s,window.onload=function(){new s}},{"./states/Game":78,"./states/Preloader":79}],69:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../entities/Paths"),r=e("../entities/Path"),i=e("../logging/ConfigLog4j"),s=e("../enums/MoveStatus"),a=(i.factory.getLogger("model.Movement"),function(){function e(){this.activePath=new o.ActivePath,this.onWayOutPaths=new o.OnWayOutPaths}return e.prototype.constructActivePath=function(e,t){var n=e.index,o=new r.Path,i=n+t;return o=this.activePath.getPath(e,i,o),o.moveStatus===s.MoveStatus.ShouldBeExiting&&o.moveRemainder>0&&(o=this.constructOnWayOutPath(e,0,o.moveRemainder,o)),o},e.prototype.constructOnWayOutPath=function(e,t,n,o){if(void 0===o){o=new r.Path;var i=e.index+n;o=this.onWayOutPaths.getPath(e,t,i,o)}else o=this.onWayOutPaths.getPath(e,t,n,o);return o},e}());n.PieceMovement=a},{"../entities/Path":57,"../entities/Paths":58,"../enums/MoveStatus":65,"../logging/ConfigLog4j":67}],70:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../enums/Actions"),r=e("./Move"),i=e("../entities/ActiveBoard"),s=e("../entities/HomeBoard"),a=e("../logging/ConfigLog4j"),u=a.factory.getLogger("model.AbstractRules"),l=function(){function e(e,t,n){this.dice=e,this.schedule=t,this.board=n,this.rulesPool=new Array,this.activeRulePool=new Array;for(var o=0;o<10;++o)this.rulesPool.push(new r.Move)}return e.prototype.rolledAtLeastOneSix=function(){return 6===this.dice.dieOne.getValue()||6===this.dice.dieTwo.getValue()},e.prototype.rolledDoubleSix=function(){return 6===this.dice.dieOne.getValue()&&6===this.dice.dieTwo.getValue()},e.prototype.getDieByValue=function(e){return this.dice.getDieByValue(e)},e.prototype.getNewRule=function(){var e=null;return this.rulesPool.length>0?e=this.rulesPool.pop():(e=new r.Move,this.activeRulePool.push(e)),e},e.prototype.showFinalResults=function(){this.board instanceof i.ActiveBoard?u.debug("Active rule: "+this.activeRulePool.length+" RulePool: "+this.rulesPool.length):this.board instanceof s.HomeBoard&&u.debug("Home rule: "+this.activeRulePool.length+" RulePool: "+this.rulesPool.length)},e.prototype.addSpentRulesBackToPool=function(e){for(var t=0,n=e;t<n.length;t++){var o=n[t];this.addToRulePool(o)}},e.prototype.willCrossEntryPoint=function(e){var t=[],n=e.index,o=n+this.dice.dieOne.getValue(),r=n+this.dice.dieTwo.getValue(),i=n+this.dice.dieOne.getValue()+this.dice.dieTwo.getValue();return e.getEntryIndex()>=n&&e.getEntryIndex()<o&&t.push(this.dice.dieOne.uniqueId),e.getEntryIndex()>=n&&e.getEntryIndex()<r&&t.push(this.dice.dieTwo.uniqueId),e.getEntryIndex()>=n&&e.getEntryIndex()<i&&t.push(this.dice.dieOne.uniqueId+"#"+this.dice.dieTwo.uniqueId),t},e.prototype.willCrossExitPoint=function(e){var t=[],n=this.dice.dieOne.getValue()+this.dice.dieTwo.getValue(),o=n-(e.entryIndex-e.index),r=this.dice.dieOne.getValue()-(e.entryIndex-e.index),i=this.dice.dieTwo.getValue()-(e.entryIndex-e.index);return u.debug("Distance: "+o+" "+r+" "+i),o<7&&t.push(this.dice.dieOne.uniqueId+"#"+this.dice.dieTwo.uniqueId),r<7&&t.push(this.dice.dieOne.uniqueId),i<7&&t.push(this.dice.dieTwo.uniqueId),t},e.prototype.getHigherDieValue=function(){return this.dice.getHigherDieValue()},e.prototype.generatePieceMovement=function(e,t,n){var r=this.getNewRule();if(2===e.length){var i=e[0]+"#"+e[1];r.action=o.Actions.PLAY,r.diceId=i,r.state=n,r.pieceId=t.uniqueId}else if(1===e.length){var i=e[0];r.action=o.Actions.PLAY,r.diceId=i,r.state=n,r.pieceId=t.uniqueId}return r},e.prototype.addToRulePool=function(e){for(var t=0,n=this.activeRulePool.length;t<n;t++)this.activeRulePool[t]===e&&this.activeRulePool.splice(t,1);e.resetRule(),this.rulesPool.push(e)},e}();n.AbstractRules=l},{"../entities/ActiveBoard":51,"../entities/HomeBoard":55,"../enums/Actions":63,"../logging/ConfigLog4j":67,"./Move":73}],71:[function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=e("../enums/Actions"),i=e("../logging/ConfigLog4j"),s=e("./AbstractRules"),a=e("../enums/States"),u=i.factory.getLogger("model.ActiveRules"),l=function(e){function t(t,n,o){var r=e.call(this,t,n,o)||this;return r.state=a.States.Active,r}return o(t,e),t.prototype.generateMoves=function(e){for(var t=[],n=e.getActivePieces(this.board),o=0,i=n;o<i.length;o++){var s=i[o],a=this.willCrossEntryPoint(s);if(a.length>0){var l=this.willCrossExitPoint(s);if(l.length>0)for(var c=0,p=l;c<p.length;c++){var h=p[c],g=this.getNewRule();g.action=r.Actions.PLAY,g.diceId=h,g.pieceId=s.uniqueId,g.state=this.state,t.push(g)}else for(var f=0,d=a;f<d.length;f++){var y=d[f],g=this.getNewRule();g.action=r.Actions.PLAY,g.diceId=y,g.pieceId=s.uniqueId,g.state=this.state,t.push(g),u.debug("Dice id makes sense "+y+" will take piece on way out piece "+s.uniqueId)}}else{u.debug("Normal play move generated ");var g=this.getNewRule();g.action=r.Actions.PLAY,g.diceId=this.dice.dieOne.uniqueId,g.pieceId=s.uniqueId,g.state=this.state,t.push(g),g=this.getNewRule(),g.action=r.Actions.PLAY,g.diceId=this.dice.dieTwo.uniqueId,g.pieceId=s.uniqueId,g.state=this.state,t.push(g),g=this.getNewRule(),g.action=r.Actions.PLAY,g.diceId=this.dice.dieOne.uniqueId+"#"+this.dice.dieTwo.uniqueId,g.pieceId=s.uniqueId,g.state=this.state,t.push(g)}}return t},t.prototype.generateActivePieceMovement=function(e,t){return this.generatePieceMovement(e,t,this.state)},t}(s.AbstractRules);n.ActiveRules=l},{"../enums/Actions":63,"../enums/States":66,"../logging/ConfigLog4j":67,"./AbstractRules":70}],72:[function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=e("../enums/Actions"),i=e("../logging/ConfigLog4j"),s=e("./AbstractRules"),a=e("../enums/States"),u=i.factory.getLogger("model.HomeRules"),l=function(e){function t(t,n,o){var r=e.call(this,t,n,o)||this;return r.state=a.States.AtHome,r}return o(t,e),t.prototype.generateMoves=function(e){var t=[];if(this.rolledDoubleSix()){var n=this.dice.dieOne.uniqueId,o=this.dice.dieTwo.uniqueId;if(null===n||null===o)return void u.debug("No matching uniqueIds for the values supplied!!!");for(var i=e.getHomePieces(this.board),s=0,a=i;s<a.length;s++){var l=a[s],c=this.getNewRule();c.action=r.Actions.PLAY,c.diceId=n,c.pieceId=l.uniqueId,c.state=this.state,t.push(c),c=this.getNewRule(),c.action=r.Actions.PLAY,c.diceId=o,c.pieceId=l.uniqueId,c.state=this.state,t.push(c),c=this.getNewRule(),c.action=r.Actions.PLAY,c.diceId=this.dice.dieOne.uniqueId+"#"+this.dice.dieTwo.uniqueId,c.pieceId=l.uniqueId,c.state=this.state,t.push(c)}}else if(this.rolledAtLeastOneSix()){var p=this.dice.getDieByValue(6);if(null===p)return void u.debug("No matching uniqueId for the value supplied!!!");for(var i=e.getHomePieces(this.board),h=0,g=i;h<g.length;h++){var l=g[h],c=this.getNewRule();c.action=r.Actions.PLAY,c.playBothDice=!0,c.diceId=this.dice.dieOne.uniqueId+"#"+this.dice.dieTwo.uniqueId,c.pieceId=l.uniqueId,c.state=this.state,t.push(c),c=this.getNewRule(),c.action=r.Actions.PLAY,c.diceId=p,c.pieceId=l.uniqueId,c.state=this.state,t.push(c)}}return t},t.prototype.generateHomePieceMovement=function(e,t){return this.generatePieceMovement(e,t,this.state)},t}(s.AbstractRules);n.HomeRules=l},{"../enums/Actions":63,"../enums/States":66,"../logging/ConfigLog4j":67,"./AbstractRules":70}],73:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../enums/Actions"),r=function(){function e(){this.pieceId=" ",this.action=o.Actions.DO_NOTHING,this.pieceId=" ",this.playBothDice=!1,this.state=null}return e.prototype.resetRule=function(){this.pieceId="",this.action=o.Actions.DO_NOTHING,this.pieceId="",this.playBothDice=!1,this.state=null},e.prototype.compare=function(e){var t=!1;return e.action===this.action&&e.diceId===this.diceId&&e.pieceId===this.pieceId&&(t=!0),t},e}();n.Move=r},{"../enums/Actions":63}],74:[function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=e("../enums/Actions"),i=e("../logging/ConfigLog4j"),s=e("../enums/States"),a=e("./AbstractRules"),u=i.factory.getLogger("model.OnWayOutRules"),l=function(e){function t(t,n,o){var r=e.call(this,t,n,o)||this;return r.state=s.States.onWayOut,r}return o(t,e),t.prototype.generateMoves=function(e){var t=[],n=this.dice.dieOne.uniqueId,o=this.dice.dieTwo.uniqueId;if(null===n||null===o)return void u.debug("No matching uniqueIds for the values supplied!!!");for(var i=e.getOnWayOutPieces(this.board),s=0,a=i;s<a.length;s++){var l=a[s];if(this.dice.dieOne.getValue()+l.index<=5){var c=this.getNewRule();c.action=r.Actions.PLAY,c.diceId=n,c.pieceId=l.uniqueId,c.state=this.state,t.push(c)}if(this.dice.dieTwo.getValue()+l.index<=5){var c=this.getNewRule();c.action=r.Actions.PLAY,c.diceId=o,c.pieceId=l.uniqueId,c.state=this.state,t.push(c)}if(this.dice.dieOne.getValue()+this.dice.dieTwo.getValue()+l.index<=5){var c=this.getNewRule();c.action=r.Actions.PLAY,c.diceId=n+"#"+o,c.pieceId=l.uniqueId,c.state=this.state,t.push(c)}}return t},t.prototype.generateOnWayOutPieceMovement=function(e,t){return this.generatePieceMovement(e,t,this.state)},t}(a.AbstractRules);n.OnWayOutRules=l},{"../enums/Actions":63,"../enums/States":66,"../logging/ConfigLog4j":67,"./AbstractRules":70}],75:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../rules/Rules"),r=e("../logging/ConfigLog4j"),i=r.factory.getLogger("model.RuleEnforcer"),s=function(){function e(e,t,n,r,i,s,a){this.rollCounter=0,this.signal=e,this.scheduler=t,this.dice=n,this.currentPossibleMovements=a,this.rule=new o.Rules(this.signal,t,n,r,i,s),this.signal.add(this.endOfDiceRoll,this,0,"endOfDieRoll")}return e.prototype.endOfDiceRoll=function(e){if("endOfDieRoll"===e&&2===++this.rollCounter){this.rollCounter=0;var t=this.scheduler.getCurrentPlayer();this.currentPossibleMovements=this.rule.generateAllPossibleMoves(t),this.analyzeAllPossibleMove(t)}},e.prototype.generatePieceMovement=function(e,t){for(var n=this.rule.generatePieceMovement(e,t),o=!1,r=0,s=this.currentPossibleMovements;r<s.length;r++){var a=s[r];if(a.compare(n)){o=!0,a=this.filterMovement(a,t);var u=this.addDiceValues(this.dice.getDieValueByUniqueId(a.diceId));t.movePiece(u),i.debug("Dice values: "+u);break}}return o||i.debug("Move not found!!!: "+this.rule.decodeMove(n)),n},e.prototype.analyzeAllPossibleMove=function(e){if(0===this.currentPossibleMovements.length){i.debug("Player Before...."+e.name);var t=this.scheduler.getNextPlayer();i.debug("Player After...."+t.name)}else this.readAllMoves()},e.prototype.readAllMoves=function(){for(var e=0,t=this.currentPossibleMovements;e<t.length;e++){var n=t[e];i.debug(this.rule.decodeMove(n))}},e.prototype.addDiceValues=function(e){for(var t=0,n=0,o=e;n<o.length;n++){t+=o[n]}return t},e.prototype.filterMovement=function(e,t){return t.isAtHome()&&(this.dice.consumeDieValueSix(e.diceId),t.index=t.startIndex),e},e}();n.RuleEnforcer=s},{"../logging/ConfigLog4j":67,"../rules/Rules":76}],76:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../logging/ConfigLog4j"),r=e("../enums/Actions"),i=e("./HomeRules"),s=e("./ActiveRules"),a=e("./OnWayOutRules"),u=e("../enums/States"),l=(o.factory.getLogger("model.Rules"),function(){function e(e,t,n,o,r,u){this.rollCounter=0,this.activeMove=new s.ActiveRules(n,t,o),this.homeMove=new i.HomeRules(n,t,r),this.onWayOutMove=new a.OnWayOutRules(n,t,u),this.schedule=t,this.signal=e,this.dice=n}return e.prototype.generateAllPossibleMoves=function(e){var t=this.activeMove.generateMoves(e),n=this.homeMove.generateMoves(e),o=this.onWayOutMove.generateMoves(e);return n.concat(t).concat(o)},e.prototype.addSpentMovesBackToPool=function(e){e.length>0&&(e[0].state===u.States.Active?this.activeMove.addSpentRulesBackToPool(e):e[0].state===u.States.AtHome?this.homeMove.addSpentRulesBackToPool(e):e[0].state===u.States.onWayOut&&this.onWayOutMove.addSpentRulesBackToPool(e))},e.prototype.decodeMove=function(e){switch(e.state){case u.States.Active:return this.decodeActiveMove(e);case u.States.AtHome:return this.decodeHomeMove(e);case u.States.onWayOut:return this.decodeOnWayOutMove(e);default:return"Unexpected"}},e.prototype.decodeActiveMove=function(e){return e.action===r.Actions.DO_NOTHING?"DO NOTHING":e.action===r.Actions.EXIT?"EXIT "+e.pieceId:e.action===r.Actions.PLAY?"ACTIVE PLAY "+this.dice.getDieValueByUniqueId(e.diceId).join()+" ON "+e.pieceId:e.action===r.Actions.ROLL?"ROLL":e.action===r.Actions.SKIP?"ACTIVE SKIP":"DO NOTHING"},e.prototype.decodeHomeMove=function(e){return e.action===r.Actions.DO_NOTHING?"DO NOTHING":e.action===r.Actions.EXIT?"EXIT "+e.pieceId:e.action===r.Actions.PLAY?"HOME PLAY "+this.dice.getDieValueByUniqueId(e.diceId).join()+" ON "+e.pieceId:e.action===r.Actions.ROLL?"ROLL":e.action===r.Actions.SKIP?"HOME SKIP":"DO NOTHING"},e.prototype.decodeOnWayOutMove=function(e){return e.action===r.Actions.DO_NOTHING?"DO NOTHING":e.action===r.Actions.EXIT?"EXIT "+e.pieceId:e.action===r.Actions.PLAY?"ONWAYOUT PLAY "+this.dice.getDieValueByUniqueId(e.diceId).join()+" ON "+e.pieceId:e.action===r.Actions.ROLL?"ROLL":e.action===r.Actions.SKIP?"ONWAYOUT SKIP":"DO NOTHING"},e.prototype.generatePieceMovement=function(e,t){switch(t.state){case u.States.Active:return this.activeMove.generateActivePieceMovement(e,t);case u.States.AtHome:return this.homeMove.generateHomePieceMovement(e,t);case u.States.onWayOut:return this.onWayOutMove.generateOnWayOutPieceMovement(e,t);default:return null}},e}());n.Rules=l},{"../enums/Actions":63,"../enums/States":66,"../logging/ConfigLog4j":67,"./ActiveRules":71,"./HomeRules":72,"./OnWayOutRules":74}],77:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("typescript-collections"),r=e("../logging/ConfigLog4j"),i=(r.factory.getLogger("model.Scheduler"),function(){function e(){this.schedule=new o.Queue}return e.prototype.getNextPlayer=function(){return this.getCurrentPlayer()},e.prototype.getCurrentPlayer=function(){return this.schedule.peek()},e}());n.Scheduler=i},{"../logging/ConfigLog4j":67,"typescript-collections":29}],78:[function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=e("angular2-uuid"),i=e("../entities/Player"),s=e("../enums/ColorType"),a=e("../entities/ActiveBoard"),u=e("../entities/HomeBoard"),l=e("../entities/OnWayOutBoard"),c=e("../entities/Dice"),p=e("../logging/ConfigLog4j"),h=e("../rules/Scheduler"),g=e("../rules/RuleEnforcer"),f=e("../entities/Paths"),d=e("../enums/States"),y=p.factory.getLogger("model.Game"),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.create=function(){this.add.sprite(0,0,"board");var e=[s.ColorType.Red,s.ColorType.Blue],t=[s.ColorType.Green,s.ColorType.Yellow];this.signal=new Phaser.Signal;var n=new a.ActiveBoard(this.signal),o=new u.HomeBoard(this.signal),p=new l.OnWayOutBoard(this.signal);this.playerOne=new i.Player(this.game,"PlayerOne",r.UUID.UUID(),!0,e,this.signal),this.playerTwo=new i.Player(this.game,"PlayerTwo",r.UUID.UUID(),!1,t,this.signal),this.scheduler=new h.Scheduler,this.scheduler.schedule.enqueue(this.playerTwo),this.scheduler.schedule.enqueue(this.playerOne);var f=this.make.button(763,540,"play",this.playDice,this,2,1,0),y=this.add.group();y.add(f);var v=this.make.button(770,440,"diceBtn",this.rollDice,this,2,1,0);v.alpha=.5,v.scale.x=.2,v.scale.y=.2,y.add(v),this.game.stage.disableVisibilityChange=!0;var m=r.UUID.UUID(),_=r.UUID.UUID();this.dice=new c.Dice(this.game,"die",this.signal,m,_),this.enforcer=new g.RuleEnforcer(this.signal,this.scheduler,this.dice,n,o,p),this.dice.setDicePlayerId(this.scheduler.getCurrentPlayer().playerId);for(var L=0,w=this.playerOne.pieces;L<w.length;L++){var I=w[L];o.addPieceToHomeBoard(I)
}for(var b=0,E=this.playerTwo.pieces;b<E.length;b++){var I=E[b];o.addPieceToHomeBoard(I)}var S=this.playerTwo.pieces[2];o.removePieceFromHomeBoard(S),this.setActivePieceParameters(S,37,d.States.Active,n);var C=this.playerTwo.pieces[3];o.removePieceFromHomeBoard(C),this.setOnWayOutPieceParameters(C,2,d.States.onWayOut,p)},t.prototype.rollDice=function(){this.dice.setDicePlayerId(this.enforcer.scheduler.getCurrentPlayer().playerId),this.enforcer.scheduler.getCurrentPlayer().roll(this.dice,6,1)},t.prototype.playDice=function(){var e=this.dice.getSelectedDiceUniqueIds(),t=this.scheduler.getCurrentPlayer();null!==t.currentPiece&&(this.dice.dieOne.isSelected()||this.dice.dieTwo.isSelected())?this.enforcer.generatePieceMovement(e,t.currentPiece):y.debug("No die selected or no piece selected")},t.prototype.setActivePieceParameters=function(e,t,n,o){var r=new f.ActivePath,i=r.getPiecePostionByIndex(t);e.setParameters(i.x,i.y,t,n),o.board.setValue(e.uniqueId,t)},t.prototype.setOnWayOutPieceParameters=function(e,t,n,o){var r=new f.OnWayOutPaths,i=r.getPiecePostionByIndex(e,t);e.setParameters(i.x,i.y,t,n),o.board.setValue(e.uniqueId,t)},t}(Phaser.State);n.Game=v},{"../entities/ActiveBoard":51,"../entities/Dice":53,"../entities/HomeBoard":55,"../entities/OnWayOutBoard":56,"../entities/Paths":58,"../entities/Player":62,"../enums/ColorType":64,"../enums/States":66,"../logging/ConfigLog4j":67,"../rules/RuleEnforcer":75,"../rules/Scheduler":77,"angular2-uuid":1}],79:[function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.preload=function(){this.load.spritesheet("red_piece","images/red.png",42,42,2),this.load.spritesheet("blue_piece","images/blue.png",42,42,2),this.load.spritesheet("green_piece","images/green.png",42,42,2),this.load.spritesheet("yellow_piece","images/yellow.png",42,42,2),this.load.spritesheet("die","images/dice.png",64,64),this.load.image("diceBtn","images/dicebtn.png"),this.load.image("play","images/playbutton.png"),this.load.image("board","images/board.jpg")},t.prototype.create=function(){this.startGame()},t.prototype.startGame=function(){this.game.state.start("Game",!0,!1)},t}(Phaser.State);n.Preloader=r},{}]},{},[68])(68)});
//# sourceMappingURL=ludo.min.js.map
